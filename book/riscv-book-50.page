<div id="pf32" class="pf w0 h0" data-page-no="32"><div class="pc pc32 w0 h0"><img class="bi x13 y94c we h75" alt="" src="bg32.png"/><div class="t m0 x13 h7 y15a ff3 fs4 fc0 sc0 ls0 ws0">CHAPTER<span class="_ _2"> </span>3.<span class="_ _22"> </span>ASSEMBL<span class="_ _7"></span>Y,<span class="_ _2"> </span>OBJECT,<span class="_ _2"> </span>AND<span class="_ _2"> </span>EXECUT<span class="_ _7"></span>ABLE<span class="_ _2"> </span>FILES</div><div class="t m0 x13 h8 yed ff5 fs4 fc0 sc0 ls0 ws0">00010074<span class="_ _11"> </span>&lt;update_x&gt;:</div><div class="t m0 x14 h8 yee ff5 fs4 fc0 sc0 ls0 ws0">10074:<span class="_ _11"> </span>00001317<span class="_ _8a"> </span>auipc<span class="_ _11"> </span>t1,0x1</div><div class="t m0 x14 h8 y116 ff5 fs4 fc0 sc0 ls0 ws0">10078:<span class="_ _11"> </span>01c30313<span class="_ _8a"> </span>addi<span class="_ _11"> </span>t1,t1,28<span class="_ _e"> </span>#<span class="_ _e"> </span>11090<span class="_ _e"> </span>&lt;__DATA_BEGIN__&gt;</div><div class="t m0 x14 h8 y29d ff5 fs4 fc0 sc0 ls0 ws0">1007c:<span class="_ _11"> </span>00a32023<span class="_ _8a"> </span>sw<span class="_ _11"> </span>a0,0(t1)</div><div class="t m0 x14 h8 y49d ff5 fs4 fc0 sc0 ls0 ws0">10080:<span class="_ _11"> </span>00008067<span class="_ _8a"> </span>ret</div><div class="t m0 x13 h8 y49f ff5 fs4 fc0 sc0 ls0 ws0">00010084<span class="_ _11"> </span>&lt;update_y&gt;:</div><div class="t m0 x14 h8 y94d ff5 fs4 fc0 sc0 ls0 ws0">10084:<span class="_ _11"> </span>80418313<span class="_ _8a"> </span>addi<span class="_ _11"> </span>t1,gp,-2044<span class="_ _e"> </span>#<span class="_ _e"> </span>11094<span class="_ _e"> </span>&lt;y&gt;</div><div class="t m0 x14 h8 y94e ff5 fs4 fc0 sc0 ls0 ws0">10088:<span class="_ _11"> </span>00a32023<span class="_ _8a"> </span>sw<span class="_ _11"> </span>a0,0(t1)</div><div class="t m0 x14 h8 y94f ff5 fs4 fc0 sc0 ls0 ws0">1008c:<span class="_ _11"> </span>00008067<span class="_ _8a"> </span>ret</div><div class="t m0 x13 h8 y20 ff5 fs4 fc0 sc0 ls0 ws0">Disassembly<span class="_ _11"> </span>of<span class="_ _e"> </span>section<span class="_ _e"> </span>.data:</div><div class="t m0 x13 h8 y22 ff5 fs4 fc0 sc0 ls0 ws0">00011090<span class="_ _11"> </span>&lt;__DATA_BEGIN__&gt;:</div><div class="t m0 x14 h8 y23 ff5 fs4 fc0 sc0 ls0 ws0">11090:<span class="_ _11"> </span>000a<span class="_ _59"> </span>c.slli<span class="_ _e"> </span>zero,0x2</div><div class="t m0 x13 h8 y24 ff5 fs4 fc0 sc0 ls0 ws0">...</div><div class="t m0 x13 h8 y26 ff5 fs4 fc0 sc0 ls0 ws0">00011094<span class="_ _11"> </span>&lt;y&gt;:</div><div class="t m0 x14 h8 y27 ff5 fs4 fc0 sc0 ls0 ws0">11094:<span class="_ _11"> </span>000c<span class="_ _59"> </span>0xc</div><div class="t m0 x13 h8 y28 ff5 fs4 fc0 sc0 ls0 ws0">...</div><div class="t m0 x14 h7 y12c ff3 fs4 fc0 sc0 ls0 ws0">Notice<span class="_ _a"> </span>that<span class="_ _a"> </span>the<span class="_ _a"> </span>linker<span class="_ _d"> </span>assigned<span class="_ _a"> </span>addresses<span class="_ _a"> </span><span class="ff5">10074<span class="_ _a"> </span></span>to<span class="_ _a"> </span><span class="ff5">1008f<span class="_ _a"> </span></span>to<span class="_ _a"> </span>the<span class="_ _a"> </span>conten<span class="_ _8"></span>ts<span class="_ _a"> </span>of<span class="_ _a"> </span>the</div><div class="t m0 x13 h7 y12d ff5 fs4 fc0 sc0 ls0 ws0">.text<span class="_ _2"> </span><span class="ff3">section<span class="_ _2"> </span>and<span class="_ _2"> </span>addresses<span class="_ _2"> </span></span>10090<span class="_ _2"> </span><span class="ff3">to<span class="_ _2"> </span></span>10097<span class="_ _2"> </span><span class="ff3">to<span class="_ _2"> </span>the<span class="_ _2"> </span>con<span class="_ _1"></span>ten<span class="_ _1"></span>ts<span class="_ _2"> </span>of<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">.data<span class="_ _2"> </span></span>section.</span></div><div class="t m0 x14 h7 y950 ff7 fs4 fc0 sc0 ls0 ws0">NOTE:<span class="_ _1a"> </span><span class="ff3">Some op<span class="_ _4"></span>erating<span class="_ _5"> </span>systems<span class="_ _5"> </span>conﬁgure<span class="_ _2"> </span>the<span class="_ _5"> </span>hardware to<span class="_ _2"> </span>prev<span class="_ _8"></span>ent<span class="_ _5"> </span>instruc-</span></div><div class="t m0 x14 h7 y951 ff3 fs4 fc0 sc0 ls0 ws0">tions<span class="_ _a"> </span>from<span class="_ _a"> </span>writing<span class="_ _a"> </span>to<span class="_ _a"> </span>memory<span class="_ _a"> </span>addresses<span class="_ _a"> </span>assigned<span class="_ _a"> </span>to<span class="_ _a"> </span>the<span class="_ _a"> </span><span class="ff5">.text<span class="_ _a"> </span></span>and<span class="_ _a"> </span><span class="ff5">.rodata</span></div><div class="t m0 x14 h7 y952 ff3 fs4 fc0 sc0 ls0 ws0">sections.<span class="_ _c"> </span>Hence,<span class="_ _d"> </span>v<span class="_ _8"></span>ariables<span class="_ _2"> </span>should<span class="_ _2"> </span>not<span class="_ _d"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>placed<span class="_ _d"> </span>on<span class="_ _2"> </span>these<span class="_ _2"> </span>sections.<span class="_ _f"> </span>Also,<span class="_ _d"> </span>some</div><div class="t m0 x14 h7 y953 ff3 fs4 fc0 sc0 ls0 ws0">op<span class="_ _4"></span>erating systems<span class="_ _5"> </span>conﬁgure<span class="_ _2"> </span>the<span class="_ _5"> </span>hardware to<span class="_ _5"> </span>preven<span class="_ _8"></span>t<span class="_ _2"> </span>the<span class="_ _5"> </span>CPU<span class="_ _5"> </span>from<span class="_ _2"> </span>executing</div><div class="t m0 x14 h7 y954 ff3 fs4 fc0 sc0 ls0 ws0">instructions<span class="_ _a"> </span>from<span class="_ _a"> </span>memory<span class="_ _a"> </span>addresses<span class="_ _a"> </span>that<span class="_ _a"> </span>are<span class="_ _3"> </span>not<span class="_ _a"> </span>assigned<span class="_ _a"> </span>to<span class="_ _a"> </span>the<span class="_ _a"> </span><span class="ff5">.text<span class="_ _a"> </span></span>sec-</div><div class="t m0 x14 h7 y955 ff3 fs4 fc0 sc0 ls0 ws0">tion.<span class="_ _3"> </span>Therefore, it<span class="_ _5"> </span>is imp<span class="_ _4"></span>ortan<span class="_ _8"></span>t to<span class="_ _5"> </span>keep the program instructions on the <span class="ff5">.text</span></div><div class="t m0 x14 h7 y956 ff3 fs4 fc0 sc0 ls0 ws0">section.</div><div class="t m0 x13 hd y957 ff6 fs3 fc0 sc0 ls0 ws0">3.4<span class="_ _36"> </span>Executable<span class="_ _e"> </span>vs<span class="_ _e"> </span>ob<span class="_ _35"></span>ject<span class="_ _1f"> </span>ﬁles</div><div class="t m0 x13 h7 y958 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _a"> </span>Executable<span class="_ _a"> </span>and<span class="_ _a"> </span>Linking<span class="_ _a"> </span>F<span class="_ _7"></span>ormat,<span class="_ _3"> </span>or<span class="_ _a"> </span>ELF,<span class="_ _a"> </span>is<span class="_ _a"> </span>used<span class="_ _a"> </span>by<span class="_ _a"> </span>sev<span class="_ _1"></span>eral<span class="_ _a"> </span>Linux-based<span class="_ _d"> </span>op<span class="_ _4"></span>er-</div><div class="t m0 x13 h7 y959 ff3 fs4 fc0 sc0 ls0 ws0">ating<span class="_ _a"> </span>systems<span class="_ _3"> </span>to<span class="_ _a"> </span>enco<span class="_ _4"></span>de<span class="_ _a"> </span>b<span class="_ _4"></span>oth<span class="_ _a"> </span>ob<span class="_ _4"></span>ject<span class="_ _3"> </span>and<span class="_ _a"> </span>executable<span class="_ _3"> </span>ﬁles.<span class="_ _2d"> </span>Even<span class="_ _a"> </span>though<span class="_ _a"> </span>ob<span class="_ _35"></span>ject<span class="_ _a"> </span>and</div><div class="t m0 x13 h7 y95a ff3 fs4 fc0 sc0 ls0 ws0">executable<span class="_ _2"> </span>ﬁles<span class="_ _d"> </span>may<span class="_ _5"> </span>contain<span class="_ _2"> </span>machine<span class="_ _2"> </span>co<span class="_ _4"></span>de<span class="_ _2"> </span>and<span class="_ _2"> </span>b<span class="_ _4"></span>oth<span class="_ _2"> </span>can<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>enco<span class="_ _4"></span>ded<span class="_ _2"> </span>using<span class="_ _d"> </span>the<span class="_ _2"> </span>ELF,</div><div class="t m0 x13 h7 y95b ff3 fs4 fc0 sc0 ls0 ws0">they<span class="_ _2"> </span>diﬀer<span class="_ _2"> </span>in<span class="_ _2"> </span>the<span class="_ _2"> </span>follo<span class="_ _1"></span>wing<span class="_ _2"> </span>asp<span class="_ _4"></span>ects:</div><div class="t m0 x14 h7 y95c ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff3">Addresses<span class="_ _2"> </span>on<span class="_ _2"> </span>ob<span class="_ _4"></span>ject<span class="_ _5"> </span>ﬁles<span class="_ _2"> </span>are<span class="_ _5"> </span>not<span class="_ _2"> </span>ﬁnal<span class="_ _5"> </span>and<span class="_ _2"> </span>elements from<span class="_ _2"> </span>diﬀerent sections<span class="_ _2"> </span>may</span></div><div class="t m0 x1c h7 y95d ff3 fs4 fc0 sc0 ls0 ws0">b<span class="_ _4"></span>e<span class="_ _5"> </span>assigned<span class="_ _d"> </span>the<span class="_ _2"> </span>same<span class="_ _2"> </span>addresses,<span class="_ _2"> </span>as<span class="_ _d"> </span>discussed<span class="_ _2"> </span>in<span class="_ _2"> </span>Section<span class="_ _d"> </span>3.3.<span class="_ _c"> </span>As<span class="_ _2"> </span>a<span class="_ _d"> </span>consequence,</div><div class="t m0 x1c h7 y95e ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _3"> </span>elements<span class="_ _a"> </span>of<span class="_ _3"> </span>diﬀerent<span class="_ _3"> </span>sections<span class="_ _3"> </span>may<span class="_ _a"> </span>not<span class="_ _3"> </span>reside<span class="_ _3"> </span>in<span class="_ _c"> </span>the<span class="_ _3"> </span>main<span class="_ _3"> </span>memory<span class="_ _3"> </span>at<span class="_ _3"> </span>the</div><div class="t m0 x1c h7 y95f ff3 fs4 fc0 sc0 ls0 ws0">same<span class="_ _2"> </span>time;</div><div class="t m0 x14 h7 y960 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff3">Ob<span class="_ _35"></span>ject<span class="_ _2"> </span>ﬁles<span class="_ _d"> </span>usually<span class="_ _d"> </span>contain<span class="_ _2"> </span>several<span class="_ _2"> </span>references<span class="_ _d"> </span>to<span class="_ _d"> </span>undeﬁned<span class="_ _d"> </span>symbols,<span class="_ _d"> </span>which<span class="_ _2"> </span>are</span></div><div class="t m0 x1c h7 y961 ff3 fs4 fc0 sc0 ls0 ws0">exp<span class="_ _4"></span>ected<span class="_ _5"> </span>to<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>resolved<span class="_ _5"> </span>by<span class="_ _5"> </span>the<span class="_ _2"> </span>linker;</div><div class="t m0 x14 h7 y962 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff3">Ob<span class="_ _35"></span>ject<span class="_ _d"> </span>ﬁles<span class="_ _d"> </span>contain<span class="_ _d"> </span>a<span class="_ _d"> </span>relo<span class="_ _4"></span>cation<span class="_ _d"> </span>table<span class="_ _a"> </span>so<span class="_ _d"> </span>that<span class="_ _a"> </span>instructions<span class="_ _d"> </span>and<span class="_ _a"> </span>data<span class="_ _d"> </span>on<span class="_ _a"> </span>ob<span class="_ _4"></span>ject</span></div><div class="t m0 x1c h7 y963 ff3 fs4 fc0 sc0 ls0 ws0">ﬁles<span class="_ _5"> </span>can<span class="_ _5"> </span>b<span class="_ _4"></span>e relo<span class="_ _4"></span>cated on<span class="_ _5"> </span>linking.<span class="_ _c"> </span>Addresses on<span class="_ _2"> </span>executable ﬁles<span class="_ _5"> </span>are<span class="_ _5"> </span>usually<span class="_ _2"> </span>ﬁnal;</div><div class="t m0 x14 h7 y964 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff3">Ob<span class="_ _35"></span>ject<span class="_ _5"> </span>ﬁles<span class="_ _2"> </span>do<span class="_ _2"> </span>not<span class="_ _2"> </span>hav<span class="_ _8"></span>e<span class="_ _2"> </span>an<span class="_ _2"> </span>entry<span class="_ _5"> </span>p<span class="_ _4"></span>oint;</span></div><div class="t m0 x44 h7 yc ff5 fs4 fc0 sc0 ls0 ws0">http://riscv-<span class="_ _4"></span>programming.org<span class="_ _2"> </span><span class="ff3">(V<span class="_ _7"></span>ersion:<span class="_ _3"> </span>May<span class="_ _2"> </span>9,<span class="_ _2"> </span>2022)<span class="_ _6a"> </span>36</span></div><a class="l" href="#pfe" data-dest-detail='[14,"XYZ",136.063,552.703,null]'><div class="d m1" style="border-style:none;position:absolute;left:398.858000px;bottom:428.461000px;width:23.440000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf2f" data-dest-detail='[47,"XYZ",90.709,354.18,null]'><div class="d m1" style="border-style:none;position:absolute;left:404.544000px;bottom:255.180000px;width:14.722000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",136.063,465.032,null]'><div class="d m1" style="border-style:none;position:absolute;left:411.379000px;bottom:243.225000px;width:62.998000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:193.915000px;bottom:36.395000px;width:148.940000px;height:13.948000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

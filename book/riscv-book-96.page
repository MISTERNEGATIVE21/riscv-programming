<div id="pf60" class="pf w0 h0" data-page-no="60"><div class="pc pc60 w0 h0"><img class="bi x13 y1034 w2 h99" alt="" src="bg60.png"/><div class="t m0 x13 h7 y15a ff3 fs4 fc0 sc0 ls0 ws0">CHAPTER<span class="_ _2"> </span>7.<span class="_ _22"> </span>CONTROLLING<span class="_ _5"> </span>THE<span class="_ _2"> </span>EXECUTION<span class="_ _2"> </span>FLOW</div><div class="t m0 x13 h7 y38 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _a"> </span><span class="ff7">“lo<span class="_ _4"></span>op<span class="_ _c"> </span>b<span class="_ _4"></span>ody”<span class="_ _3"> </span></span>(lines<span class="_ _a"> </span>3-5).<span class="_ _10"> </span>The<span class="_ _a"> </span>condition<span class="_ _a"> </span>also<span class="_ _3"> </span>consists<span class="_ _a"> </span>of<span class="_ _3"> </span>a<span class="_ _a"> </span>b<span class="_ _4"></span>oolean<span class="_ _3"> </span>expression,</div><div class="t m0 x13 h7 yed ff3 fs4 fc0 sc0 ls0 ws0">ho<span class="_ _1"></span>w<span class="_ _1"></span>ev<span class="_ _1"></span>er,<span class="_ _f"> </span>int<span class="_ _c"> </span>the<span class="_ _c"> </span><span class="ff5">do-while<span class="_ _c"> </span></span>statement,<span class="_ _f"> </span>the<span class="_ _c"> </span>condition<span class="_ _f"> </span>must<span class="_ _3"> </span>b<span class="_ _4"></span>e<span class="_ _c"> </span>ev<span class="_ _8"></span>aluated<span class="_ _c"> </span>after<span class="_ _f"> </span>eac<span class="_ _1"></span>h</div><div class="t m0 x13 h7 yee ff3 fs4 fc0 sc0 ls0 ws0">iteration<span class="_ _d"> </span>of<span class="_ _d"> </span>the<span class="_ _a"> </span><span class="ff5">do-while<span class="_ _d"> </span></span>lo<span class="_ _4"></span>op,<span class="_ _d"> </span><span class="ff8">i.e.</span>,<span class="_ _a"> </span>after<span class="_ _d"> </span>each<span class="_ _2"> </span>execution<span class="_ _a"> </span>of<span class="_ _d"> </span>the<span class="_ _d"> </span>“lo<span class="_ _4"></span>op<span class="_ _d"> </span>b<span class="_ _4"></span>ody”.<span class="_ _1f"> </span>If<span class="_ _d"> </span>the</div><div class="t m0 x13 h7 y116 ff3 fs4 fc0 sc0 ls0 ws0">“lo<span class="_ _4"></span>op condition”<span class="_ _2"> </span>ev<span class="_ _8"></span>aluates<span class="_ _5"> </span>to<span class="_ _2"> </span>true,<span class="_ _5"> </span>then<span class="_ _2"> </span>the<span class="_ _5"> </span>“lo<span class="_ _4"></span>op<span class="_ _5"> </span>b<span class="_ _4"></span>ody”<span class="_ _2"> </span>m<span class="_ _1"></span>ust<span class="_ _5"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>executed<span class="_ _2"> </span>again.<span class="_ _3"> </span>In</div><div class="t m0 x13 h7 y29d ff3 fs4 fc0 sc0 ls0 ws0">this<span class="_ _2"> </span>case,<span class="_ _2"> </span>after<span class="_ _d"> </span>completing<span class="_ _2"> </span>the<span class="_ _2"> </span>execution<span class="_ _d"> </span>of<span class="_ _2"> </span>the<span class="_ _d"> </span>“loop<span class="_ _d"> </span>b<span class="_ _4"></span>ody”,<span class="_ _d"> </span>the<span class="_ _2"> </span>“lo<span class="_ _4"></span>op<span class="_ _2"> </span>condition”<span class="_ _2"> </span>is</div><div class="t m0 x13 h7 y49d ff3 fs4 fc0 sc0 ls0 ws0">ev<span class="_ _8"></span>aluated<span class="_ _5"> </span>again.<span class="_ _c"> </span>If<span class="_ _5"> </span>the<span class="_ _5"> </span>“lo<span class="_ _4"></span>op<span class="_ _5"> </span>condition”<span class="_ _5"> </span>ev<span class="_ _8"></span>aluates<span class="_ _5"> </span>as<span class="_ _2"> </span>false,<span class="_ _5"> </span>then<span class="_ _5"> </span>the<span class="_ _2"> </span>lo<span class="_ _4"></span>op execution<span class="_ _5"> </span>is</div><div class="t m0 x13 h7 y49e ff3 fs4 fc0 sc0 ls0 ws0">complete<span class="_ _2"> </span>and<span class="_ _2"> </span>the<span class="_ _2"> </span>execution<span class="_ _2"> </span>con<span class="_ _1"></span>tin<span class="_ _1"></span>ues<span class="_ _2"> </span>after<span class="_ _2"> </span>the<span class="_ _2"> </span>lo<span class="_ _4"></span>op.</div><div class="t m0 xd5 h8 y1035 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _1f"> </span><span class="ff5 fs4">int<span class="_ _e"> </span>i=0;</span></div><div class="t m0 xd5 h8 y1036 ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _1f"> </span><span class="ff5 fs4">do</span></div><div class="t m0 xd5 h8 y1037 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _1f"> </span><span class="ff5 fs4">{</span></div><div class="t m0 xd5 h8 y1038 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _36"> </span><span class="ff5 fs4">y<span class="_ _11"> </span>=<span class="_ _e"> </span>y+2;</span></div><div class="t m0 xd5 h8 y1039 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _36"> </span><span class="ff5 fs4">i<span class="_ _11"> </span>=<span class="_ _e"> </span>i+1;</span></div><div class="t m0 xd5 h8 y103a ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _1f"> </span><span class="ff5 fs4">}<span class="_ _e"> </span>while<span class="_ _11"> </span>(i<span class="_ _e"> </span>&lt;<span class="_ _e"> </span>10);</span></div><div class="t m0 x14 h7 y103b ff3 fs4 fc0 sc0 ls0 ws0">Assuming<span class="_ _2"> </span>that<span class="_ _5"> </span>v<span class="_ _8"></span>ariables<span class="_ _2"> </span><span class="ff5">i<span class="_ _2"> </span></span>and<span class="_ _2"> </span><span class="ff5">y<span class="_ _2"> </span></span>are<span class="_ _2"> </span>mapp<span class="_ _4"></span>ed<span class="_ _5"> </span>to<span class="_ _2"> </span>registers<span class="_ _2"> </span><span class="ff5">a1<span class="_ _2"> </span></span>and<span class="_ _2"> </span><span class="ff5">a2</span>,<span class="_ _2"> </span>resp<span class="_ _4"></span>ectiv<span class="_ _8"></span>ely<span class="_ _7"></span>,</div><div class="t m0 x13 h7 y103c ff3 fs4 fc0 sc0 ls0 ws0">the following co<span class="_ _4"></span>de shows how the previous<span class="_ _5"> </span>“C”<span class="_ _5"> </span>co<span class="_ _4"></span>de can<span class="_ _5"> </span>b<span class="_ _4"></span>e implemen<span class="_ _1"></span>ted in<span class="_ _5"> </span>assembly</div><div class="t m0 x13 h7 y103d ff3 fs4 fc0 sc0 ls0 ws0">language.<span class="_ _3"> </span>First, it contains the code that comes b<span class="_ _4"></span>efore the while lo<span class="_ _4"></span>op - in this case an</div><div class="t m0 x13 h7 y103e ff3 fs4 fc0 sc0 ls0 ws0">instruction that loads<span class="_ _13"> </span>the constan<span class="_ _8"></span>t zero in<span class="_ _1"></span>to register <span class="ff5">a1<span class="_ _13"> </span></span>(line 1).<span class="_ _3"> </span>Then, there is a<span class="_ _13"> </span>lab<span class="_ _4"></span>el</div><div class="t m0 x13 h7 y103f ff3 fs4 fc0 sc0 ls0 ws0">that marks the b<span class="_ _4"></span>eginning of the loop (line 2) and the “lo<span class="_ _4"></span>op bo<span class="_ _4"></span>dy”, which is composed</div><div class="t m0 x13 h7 y1040 ff3 fs4 fc0 sc0 ls0 ws0">of<span class="_ _a"> </span>tw<span class="_ _8"></span>o<span class="_ _3"> </span>instructions<span class="_ _3"> </span>(lines<span class="_ _3"> </span>5<span class="_ _a"> </span>and<span class="_ _3"> </span>6).<span class="_ _b"> </span>The<span class="_ _a"> </span>ﬁrst<span class="_ _3"> </span>one<span class="_ _3"> </span>implements<span class="_ _a"> </span>the<span class="_ _a"> </span>statement<span class="_ _a"> </span><span class="ff5">y=y+2</span></div><div class="t m0 x13 h7 y1041 ff3 fs4 fc0 sc0 ls0 ws0">and<span class="_ _5"> </span>the<span class="_ _5"> </span>second<span class="_ _5"> </span>one<span class="_ _5"> </span>implements the<span class="_ _5"> </span>statement <span class="ff5">i=i+1</span>.<span class="_ _c"> </span>After<span class="_ _5"> </span>the<span class="_ _5"> </span>“lo<span class="_ _4"></span>op b<span class="_ _4"></span>ody”,<span class="_ _2"> </span>there<span class="_ _5"> </span>is</div><div class="t m0 x13 h7 y1042 ff3 fs4 fc0 sc0 ls0 ws0">the co<span class="_ _4"></span>de that chec<span class="_ _8"></span>ks the<span class="_ _5"> </span>“lo<span class="_ _4"></span>op condition” (lines 5 and<span class="_ _5"> </span>6).<span class="_ _3"> </span>Notice<span class="_ _5"> </span>that instruction <span class="ff5">blt</span></div><div class="t m0 x13 h7 y1043 ff3 fs4 fc0 sc0 ls0 ws0">c<span class="_ _1"></span>hec<span class="_ _1"></span>ks whether v<span class="_ _8"></span>ariable <span class="ff5">i<span class="_ _38"> </span></span>(conten<span class="_ _8"></span>ts<span class="_ _5"> </span>of register <span class="ff5">a1</span>) is<span class="_ _5"> </span>less than 10.<span class="_ _3"> </span>If<span class="_ _5"> </span>so, it jumps<span class="_ _5"> </span>back</div><div class="t m0 x13 h7 y1044 ff3 fs4 fc0 sc0 ls0 ws0">to lab<span class="_ _4"></span>el <span class="ff5">dowhile<span class="_ _5"> </span></span>to<span class="_ _5"> </span>rep<span class="_ _4"></span>eat the<span class="_ _5"> </span>lo<span class="_ _4"></span>op execution.<span class="_ _3"> </span>Otherwise,<span class="_ _5"> </span>the<span class="_ _5"> </span>execution<span class="_ _5"> </span>contin<span class="_ _8"></span>ues on</div><div class="t m0 x13 h7 y1045 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _2"> </span>next<span class="_ _2"> </span>instruction,<span class="_ _2"> </span>lea<span class="_ _1"></span>ving<span class="_ _2"> </span>the<span class="_ _2"> </span>lo<span class="_ _4"></span>op.</div><div class="t m0 xd5 h8 y1046 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _36"> </span><span class="ff5 fs4">li<span class="_ _40"> </span>a1,<span class="_ _11"> </span>0<span class="_ _8a"> </span>#<span class="_ _11"> </span>i=0</span></div><div class="t m0 xd5 h8 y1047 ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _1f"> </span><span class="ff5 fs4">dowhile:</span></div><div class="t m0 xd5 h8 y1048 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _36"> </span><span class="ff5 fs4">addi<span class="_ _11"> </span>a2,<span class="_ _e"> </span>a2,<span class="_ _e"> </span>2<span class="_ _c6"> </span>#<span class="_ _e"> </span>y<span class="_ _11"> </span>=<span class="_ _e"> </span>y+2</span></div><div class="t m0 xd5 h8 y1049 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _36"> </span><span class="ff5 fs4">addi<span class="_ _11"> </span>a1,<span class="_ _e"> </span>a1,<span class="_ _e"> </span>1<span class="_ _c6"> </span>#<span class="_ _e"> </span>i<span class="_ _11"> </span>=<span class="_ _e"> </span>i+1</span></div><div class="t m0 xd5 h8 y104a ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _36"> </span><span class="ff5 fs4">li<span class="_ _40"> </span>t1,<span class="_ _11"> </span>10</span></div><div class="t m0 xd5 h8 y104b ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _36"> </span><span class="ff5 fs4">blt<span class="_ _86"> </span>a1,<span class="_ _11"> </span>t1,<span class="_ _e"> </span>dowhile<span class="_ _e"> </span>#<span class="_ _e"> </span>jumps<span class="_ _11"> </span>back<span class="_ _e"> </span>to<span class="_ _e"> </span>dowhile<span class="_ _e"> </span>if<span class="_ _11"> </span>i<span class="_ _e"> </span>&lt;<span class="_ _e"> </span>10</span></div><div class="t m0 x13 ha y104c ff6 fs6 fc0 sc0 ls0 ws0">7.2.3<span class="_ _17"> </span><span class="ff2">for<span class="_ _c"> </span></span>lo<span class="_ _4"></span>op</div><div class="t m0 x13 h7 y104d ff3 fs4 fc0 sc0 ls0 ws0">The following code shows a <span class="ff5">for<span class="_ _38"> </span></span>lo<span class="_ _4"></span>op written in “C”. The <span class="ff5">for<span class="_ _5"> </span></span>lo<span class="_ _4"></span>op con<span class="_ _8"></span>tains four<span class="_ _5"> </span>main</div><div class="t m0 x13 h7 y104e ff3 fs4 fc0 sc0 ls0 ws0">parts:<span class="_ _3"> </span>the<span class="_ _5"> </span><span class="ff7">“initialization<span class="_ _d"> </span>co<span class="_ _4"></span>de”</span>,<span class="_ _5"> </span>the<span class="_ _5"> </span><span class="ff7">“lo<span class="_ _4"></span>op<span class="_ _d"> </span>condition”</span>,<span class="_ _5"> </span>the<span class="_ _5"> </span><span class="ff7">“up<span class="_ _4"></span>date<span class="_ _d"> </span>co<span class="_ _4"></span>de” </span>and</div><div class="t m0 x13 h7 y104f ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _f"> </span><span class="ff7">“lo<span class="_ _4"></span>op<span class="_ _1f"> </span>b<span class="_ _4"></span>ody”<span class="_ _f"> </span></span>(lines<span class="_ _11"> </span>2-4).<span class="_ _31"> </span>The<span class="_ _11"> </span>“initialization<span class="_ _f"> </span>co<span class="_ _4"></span>de”<span class="_ _f"> </span>(<span class="ff5">i=0</span>)<span class="_ _f"> </span>must<span class="_ _f"> </span>b<span class="_ _4"></span>e<span class="_ _c"> </span>executed</div><div class="t m0 x13 h7 y1050 ff3 fs4 fc0 sc0 ls0 ws0">exactly<span class="_ _3"> </span>once<span class="_ _c"> </span>b<span class="_ _4"></span>efore<span class="_ _3"> </span>the<span class="_ _c"> </span>execution<span class="_ _3"> </span>of<span class="_ _c"> </span>the<span class="_ _c"> </span>“lo<span class="_ _4"></span>op<span class="_ _3"> </span>b<span class="_ _4"></span>ody”.<span class="_ _22"> </span>Similar<span class="_ _3"> </span>to<span class="_ _c"> </span>the<span class="_ _c"> </span><span class="ff5">while<span class="_ _3"> </span></span>lo<span class="_ _4"></span>op,</div><div class="t m0 x13 h7 y1051 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _2"> </span>“lo<span class="_ _4"></span>op<span class="_ _2"> </span>condition”<span class="_ _2"> </span>(<span class="ff5">i&lt;10</span>)<span class="_ _2"> </span>consists<span class="_ _d"> </span>of<span class="_ _2"> </span>a<span class="_ _d"> </span>b<span class="_ _4"></span>oolean<span class="_ _2"> </span>expression<span class="_ _d"> </span>that<span class="_ _2"> </span>must<span class="_ _5"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>ev<span class="_ _8"></span>aluated</div><div class="t m0 x13 h7 y1052 ff3 fs4 fc0 sc0 ls0 ws0">b<span class="_ _4"></span>efore<span class="_ _2"> </span>each<span class="_ _2"> </span>iteration<span class="_ _d"> </span>of<span class="_ _d"> </span>the<span class="_ _a"> </span><span class="ff5">for<span class="_ _d"> </span></span>lo<span class="_ _4"></span>op,<span class="_ _2"> </span><span class="ff8">i.e.</span>,<span class="_ _a"> </span>b<span class="_ _4"></span>efore<span class="_ _2"> </span>each<span class="_ _2"> </span>execution<span class="_ _a"> </span>of<span class="_ _d"> </span>the<span class="_ _d"> </span>“lo<span class="_ _4"></span>op<span class="_ _2"> </span>b<span class="_ _4"></span>o<span class="_ _4"></span>dy”</div><div class="t m0 x13 h7 y1053 ff3 fs4 fc0 sc0 ls0 ws0">(lines<span class="_ _d"> </span>2-4).<span class="_ _11"> </span>If<span class="_ _d"> </span>the<span class="_ _d"> </span>“lo<span class="_ _4"></span>op<span class="_ _2"> </span>condition”<span class="_ _d"> </span>ev<span class="_ _8"></span>aluates<span class="_ _d"> </span>to<span class="_ _d"> </span>true,<span class="_ _d"> </span>then<span class="_ _d"> </span>the<span class="_ _d"> </span>“loop<span class="_ _d"> </span>b<span class="_ _4"></span>o<span class="_ _4"></span>dy”<span class="_ _2"> </span>must<span class="_ _2"> </span>b<span class="_ _4"></span>e</div><div class="t m0 x13 h7 y1054 ff3 fs4 fc0 sc0 ls0 ws0">executed.<span class="_ _3"> </span>In this<span class="_ _12"> </span>case, after completing<span class="_ _12"> </span>the execution of<span class="_ _12"> </span>the “loop b<span class="_ _4"></span>ody”, the “update</div><div class="t m0 x13 h7 y1055 ff3 fs4 fc0 sc0 ls0 ws0">co<span class="_ _4"></span>de” (<span class="ff5">i=i+1</span>)<span class="_ _5"> </span>is<span class="_ _5"> </span>executed<span class="_ _5"> </span>and<span class="_ _5"> </span>the<span class="_ _5"> </span>execution<span class="_ _5"> </span>jumps<span class="_ _5"> </span>back to<span class="_ _5"> </span>the<span class="_ _5"> </span>b<span class="_ _4"></span>eginning<span class="_ _5"> </span>of<span class="_ _5"> </span>the<span class="_ _5"> </span>lo<span class="_ _4"></span>op</div><div class="t m0 x13 h7 y1056 ff3 fs4 fc0 sc0 ls0 ws0">so that the “loop condition” can b<span class="_ _4"></span>e ev<span class="_ _7"></span>aluated again.<span class="_ _3"> </span>If the “lo<span class="_ _4"></span>op condition” ev<span class="_ _7"></span>aluates</div><div class="t m0 x13 h7 y1057 ff3 fs4 fc0 sc0 ls0 ws0">to<span class="_ _a"> </span>false,<span class="_ _c"> </span>then<span class="_ _3"> </span>the<span class="_ _a"> </span>lo<span class="_ _4"></span>op<span class="_ _a"> </span>execution<span class="_ _3"> </span>is<span class="_ _3"> </span>complete<span class="_ _3"> </span>and<span class="_ _a"> </span>the<span class="_ _3"> </span>execution<span class="_ _3"> </span>contin<span class="_ _8"></span>ues<span class="_ _3"> </span>after<span class="_ _a"> </span>the</div><div class="t m0 x13 h7 y1058 ff3 fs4 fc0 sc0 ls0 ws0">lo<span class="_ _4"></span>op<span class="_ _5"> </span>b<span class="_ _4"></span>ody<span class="_ _7"></span>.</div><div class="t m0 xd5 h8 y1059 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _1f"> </span><span class="ff5 fs4">for<span class="_ _e"> </span>(i=0;<span class="_ _11"> </span>i&lt;10;<span class="_ _e"> </span>i=i+1)</span></div><div class="t m0 xd5 h8 y105a ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _1f"> </span><span class="ff5 fs4">{</span></div><div class="t m0 xd5 h8 y105b ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _36"> </span><span class="ff5 fs4">y<span class="_ _11"> </span>=<span class="_ _e"> </span>y+2;</span></div><div class="t m0 xd5 h8 y105c ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _1f"> </span><span class="ff5 fs4">}</span></div><div class="t m0 x14 h7 yec ff3 fs4 fc0 sc0 ls0 ws0">Assuming<span class="_ _2"> </span>that<span class="_ _5"> </span>v<span class="_ _8"></span>ariables<span class="_ _2"> </span><span class="ff5">i<span class="_ _2"> </span></span>and<span class="_ _2"> </span><span class="ff5">y<span class="_ _2"> </span></span>are<span class="_ _2"> </span>mapp<span class="_ _4"></span>ed<span class="_ _5"> </span>to<span class="_ _2"> </span>registers<span class="_ _2"> </span><span class="ff5">a1<span class="_ _2"> </span></span>and<span class="_ _2"> </span><span class="ff5">a2</span>,<span class="_ _2"> </span>resp<span class="_ _4"></span>ectiv<span class="_ _8"></span>ely<span class="_ _7"></span>,</div><div class="t m0 x13 h7 y61 ff3 fs4 fc0 sc0 ls0 ws0">the following co<span class="_ _4"></span>de shows how the previous<span class="_ _5"> </span>“C”<span class="_ _5"> </span>co<span class="_ _4"></span>de can<span class="_ _5"> </span>b<span class="_ _4"></span>e implemen<span class="_ _1"></span>ted in<span class="_ _5"> </span>assembly</div><div class="t m0 x44 h7 yc ff5 fs4 fc0 sc0 ls0 ws0">http://riscv-<span class="_ _4"></span>programming.org<span class="_ _2"> </span><span class="ff3">(V<span class="_ _7"></span>ersion:<span class="_ _3"> </span>May<span class="_ _2"> </span>9,<span class="_ _2"> </span>2022)<span class="_ _6a"> </span>82</span></div><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:193.915000px;bottom:36.395000px;width:148.940000px;height:13.948000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

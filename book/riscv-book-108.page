<div id="pf6c" class="pf w0 h0" data-page-no="6c"><div class="pc pc6c w0 h0"><img class="bi x15 y20a w2 h29" alt="" src="bg6c.png"/><div class="t m0 x15 h7 y147 ff3 fs4 fc0 sc0 ls0 ws0">8.6.<span class="_ _19"> </span>GLOBAL<span class="_ _2"> </span>VS<span class="_ _2"> </span>LOCAL<span class="_ _2"> </span>V<span class="_ _23"></span>ARIABLES</div><div class="t m0 x15 hd y1e ff7 fs3 fc0 sc0 ls0 ws0">8.6<span class="_ _32"> </span>Global<span class="_ _31"> </span>vs<span class="_ _31"> </span>lo<span class="_ _4"></span>cal<span class="_ _31"> </span>v<span class="_ _7"></span>ariables</div><div class="t m0 x15 h7 y9a4 ff3 fs4 fc0 sc0 ls0 ws0">In<span class="_ _b"> </span>high-level<span class="_ _b"> </span>languages,<span class="_ _b"> </span>suc<span class="_ _1"></span>h<span class="_ _b"> </span>as<span class="_ _b"> </span>“C”,<span class="_ _b"> </span>global<span class="_ _b"> </span>v<span class="_ _8"></span>ariables<span class="_ _b"> </span>are<span class="_ _3"> </span>v<span class="_ _7"></span>ariables<span class="_ _b"> </span>declared<span class="_ _3"> </span>outside</div><div class="t m0 x15 h7 y9a5 ff3 fs4 fc0 sc0 ls0 ws0">routines,<span class="_ _2"> </span>and<span class="_ _2"> </span>they<span class="_ _2"> </span>can<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>accessed<span class="_ _2"> </span>on<span class="_ _2"> </span>any<span class="_ _5"> </span>routine<span class="_ _2"> </span>in<span class="_ _2"> </span>the<span class="_ _2"> </span>program.</div><div class="t m0 xd h7 y9a6 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _3"> </span>following<span class="_ _b"> </span>co<span class="_ _4"></span>de<span class="_ _3"> </span>shows<span class="_ _3"> </span>an<span class="_ _3"> </span>example<span class="_ _3"> </span>of<span class="_ _3"> </span>a<span class="_ _3"> </span>“C”<span class="_ _3"> </span>program<span class="_ _a"> </span>with<span class="_ _3"> </span>a<span class="_ _3"> </span>global<span class="_ _3"> </span>v<span class="_ _8"></span>ariable</div><div class="t m0 x15 h7 y9a7 ff3 fs4 fc0 sc0 ls0 ws0">named<span class="_ _2"> </span><span class="ff5">x</span>.<span class="_ _3"> </span>Notice<span class="_ _2"> </span>that<span class="_ _2"> </span>the<span class="_ _2"> </span>global<span class="_ _2"> </span>v<span class="_ _8"></span>ariable<span class="_ _2"> </span>may<span class="_ _2"> </span>be<span class="_ _2"> </span>accessed<span class="_ _2"> </span>from<span class="_ _2"> </span>within<span class="_ _2"> </span>any<span class="_ _2"> </span>routine.</div><div class="t m0 x111 h8 y122e ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _16"> </span><span class="ff5 fs4">int<span class="_ _31"> </span>x;</span></div><div class="t m0 x111 h38 y122f ff24 fs12 fc0 sc0 ls0 ws0">2</div><div class="t m0 x111 h8 y1230 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _16"> </span><span class="ff5 fs4">int<span class="_ _31"> </span>main()</span></div><div class="t m0 x111 h8 y1231 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _16"> </span><span class="ff5 fs4">{</span></div><div class="t m0 x111 h8 y1232 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _7a"> </span><span class="ff5 fs4">return<span class="_ _31"> </span>x+1;</span></div><div class="t m0 x111 h8 y1233 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _16"> </span><span class="ff5 fs4">}</span></div><div class="t m0 xd h7 y1234 ff6 fs4 fc0 sc0 ls0 ws0">Global v<span class="_ _7"></span>ariables<span class="_ _2"> </span>are allo<span class="_ _4"></span>cated on the static data<span class="_ _2"> </span>space by the assem<span class="_ _8"></span>bler</div><div class="t m0 x15 h7 y1235 ff6 fs4 fc0 sc0 ls0 ws0">and are usually declared on assem<span class="_ _8"></span>bly programs with the help of directiv<span class="_ _8"></span>es<span class="ff3">.</span></div><div class="t m0 x15 h7 y1236 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _2"> </span>follo<span class="_ _1"></span>wing<span class="_ _2"> </span>co<span class="_ _4"></span>de<span class="_ _5"> </span>shows<span class="_ _5"> </span>the<span class="_ _2"> </span>assembly<span class="_ _5"> </span>co<span class="_ _4"></span>de<span class="_ _5"> </span>for<span class="_ _2"> </span>the<span class="_ _2"> </span>previous<span class="_ _2"> </span>“C”<span class="_ _2"> </span>program.</div><div class="t m0 x111 h8 y1237 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _16"> </span><span class="ff5 fs4">.data</span></div><div class="t m0 x111 h8 y1238 ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _16"> </span><span class="ff5 fs4">x:</span></div><div class="t m0 x111 h8 y1239 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _7a"> </span><span class="ff5 fs4">.skip<span class="_ _31"> </span>4</span></div><div class="t m0 x111 h38 y123a ff24 fs12 fc0 sc0 ls0 ws0">4</div><div class="t m0 x111 h8 y123b ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _16"> </span><span class="ff5 fs4">.text</span></div><div class="t m0 x111 h8 y123c ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _16"> </span><span class="ff5 fs4">main:</span></div><div class="t m0 x111 h8 y123d ff24 fs12 fc0 sc0 ls0 ws0">7<span class="_ _7a"> </span><span class="ff5 fs4">la<span class="_ _3b"> </span>a0,<span class="_ _31"> </span>x<span class="_ _56"> </span>#<span class="_ _9"> </span>Loads<span class="_ _31"> </span>the<span class="_ _31"> </span>address<span class="_ _31"> </span>of<span class="_ _9"> </span>variable<span class="_ _31"> </span>x</span></div><div class="t m0 x111 h8 y123e ff24 fs12 fc0 sc0 ls0 ws0">8<span class="_ _7a"> </span><span class="ff5 fs4">lw<span class="_ _3b"> </span>a0,<span class="_ _31"> </span>0(a0)<span class="_ _82"> </span>#<span class="_ _31"> </span>Loads<span class="_ _9"> </span>the<span class="_ _31"> </span>value<span class="_ _31"> </span>o<span class="_ _31"> </span>x</span></div><div class="t m0 x111 h8 y123f ff24 fs12 fc0 sc0 ls0 ws0">9<span class="_ _7a"> </span><span class="ff5 fs4">addi<span class="_ _31"> </span>a0,<span class="_ _31"> </span>a0,<span class="_ _31"> </span>1<span class="_ _11"> </span>#<span class="_ _31"> </span>Increments<span class="_ _31"> </span>the<span class="_ _31"> </span>value</span></div><div class="t m0 x11d h8 y1240 ff24 fs12 fc0 sc0 ls0 ws0">10<span class="_ _33"> </span><span class="ff5 fs4">ret<span class="_ _97"> </span>#<span class="_ _9"> </span>Return</span></div><div class="t m0 xd h7 y1241 ff3 fs4 fc0 sc0 ls0 ws0">In<span class="_ _2"> </span>the<span class="_ _b"> </span>previous<span class="_ _2"> </span>co<span class="_ _4"></span>de,<span class="_ _b"> </span>the<span class="_ _2"> </span><span class="ff5">.data<span class="_ _2"> </span></span>directive<span class="_ _2"> </span>(line<span class="_ _b"> </span>1)<span class="_ _2"> </span>informs<span class="_ _b"> </span>the<span class="_ _2"> </span>assembler<span class="_ _2"> </span>that<span class="_ _b"> </span>the</div><div class="t m0 x15 h7 y1242 ff3 fs4 fc0 sc0 ls0 ws0">follo<span class="_ _1"></span>wing<span class="_ _2"> </span>conten<span class="_ _8"></span>ts<span class="_ _b"> </span>m<span class="_ _8"></span>ust<span class="_ _b"> </span>be<span class="_ _b"> </span>placed<span class="_ _2"> </span>into<span class="_ _2"> </span>the<span class="_ _b"> </span>static<span class="_ _2"> </span>data<span class="_ _2"> </span>space<span class="_ _4"></span>.<span class="_ _25"> </span>The<span class="_ _b"> </span><span class="ff5">x<span class="_ _2"> </span></span>lab<span class="_ _4"></span>el<span class="_ _2"> </span>marks<span class="_ _b"> </span>the</div><div class="t m0 x15 h7 y1243 ff3 fs4 fc0 sc0 ls0 ws0">address<span class="_ _2"> </span>of<span class="_ _b"> </span>v<span class="_ _7"></span>ariable<span class="_ _b"> </span><span class="ff5">x</span>.<span class="_ _25"> </span>The<span class="_ _b"> </span><span class="ff5">.skip<span class="_ _9"> </span>4<span class="_ _b"> </span></span>directiv<span class="_ _8"></span>e<span class="_ _b"> </span>(line<span class="_ _2"> </span>3)<span class="_ _2"> </span>instructs<span class="_ _b"> </span>the<span class="_ _2"> </span>assembler<span class="_ _2"> </span>to<span class="_ _2"> </span>skip</div><div class="t m0 x15 h7 y1244 ff3 fs4 fc0 sc0 ls0 ws0">four bytes, which is<span class="_ _5"> </span>used<span class="_ _5"> </span>to allo<span class="_ _4"></span>cate space<span class="_ _5"> </span>for<span class="_ _5"> </span>v<span class="_ _8"></span>ariable<span class="_ _5"> </span><span class="ff5">x</span>.<span class="_ _3"> </span>The<span class="_ _5"> </span><span class="ff5">.text<span class="_ _5"> </span></span>directive (line 5)</div><div class="t m0 x15 h7 y1245 ff3 fs4 fc0 sc0 ls0 ws0">informs<span class="_ _2"> </span>the<span class="_ _b"> </span>assem<span class="_ _1"></span>bler<span class="_ _2"> </span>that<span class="_ _b"> </span>the<span class="_ _2"> </span>following<span class="_ _2"> </span>conten<span class="_ _8"></span>ts<span class="_ _b"> </span>m<span class="_ _8"></span>ust<span class="_ _b"> </span>no<span class="_ _8"></span>w<span class="_ _b"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>placed<span class="_ _b"> </span>in<span class="_ _8"></span>to<span class="_ _b"> </span>the<span class="_ _2"> </span>co<span class="_ _4"></span>de</div><div class="t m0 x15 h7 y1246 ff3 fs4 fc0 sc0 ls0 ws0">space.<span class="_ _3"> </span>The<span class="_ _2"> </span>remainder<span class="_ _2"> </span>of<span class="_ _2"> </span>the<span class="_ _2"> </span>co<span class="_ _4"></span>de<span class="_ _2"> </span>(lines<span class="_ _2"> </span>6-10)<span class="_ _2"> </span>implements<span class="_ _5"> </span>the<span class="_ _2"> </span>main<span class="_ _2"> </span>routine.</div><div class="t m0 xd h7 y1247 ff3 fs4 fc0 sc0 ls0 ws0">In high-lev<span class="_ _8"></span>el languages, suc<span class="_ _8"></span>h as in<span class="_ _2f"> </span>“C”,<span class="_ _2f"> </span>lo<span class="_ _4"></span>cal<span class="_ _30"> </span>v<span class="_ _8"></span>ariables are v<span class="_ _7"></span>ariables declared inside</div><div class="t m0 x15 h7 y1248 ff3 fs4 fc0 sc0 ls0 ws0">routines,<span class="_ _2"> </span>and<span class="_ _2"> </span>can<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>used<span class="_ _2"> </span>only<span class="_ _2"> </span>inside<span class="_ _2"> </span>the<span class="_ _2"> </span>routine<span class="_ _2"> </span>that<span class="_ _2"> </span>declared<span class="_ _2"> </span>it.</div><div class="t m0 xd h7 y1249 ff3 fs4 fc0 sc0 ls0 ws0">Ideally<span class="_ _7"></span>,<span class="_ _b"> </span>lo<span class="_ _4"></span>cal<span class="_ _b"> </span>v<span class="_ _7"></span>ariables<span class="_ _b"> </span>should<span class="_ _b"> </span>be<span class="_ _b"> </span>allo<span class="_ _4"></span>cated<span class="_ _b"> </span>on<span class="_ _b"> </span>registers.<span class="_ _31"> </span>The<span class="_ _b"> </span>following<span class="_ _b"> </span>code<span class="_ _b"> </span>con-</div><div class="t m0 x15 h7 y124a ff3 fs4 fc0 sc0 ls0 ws0">tains<span class="_ _2"> </span>a<span class="_ _2"> </span>lo<span class="_ _4"></span>cal<span class="_ _5"> </span>v<span class="_ _8"></span>ariable<span class="_ _2"> </span>called<span class="_ _2"> </span><span class="ff5">tmp<span class="_ _2"> </span></span>that<span class="_ _2"> </span>can<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>allo<span class="_ _4"></span>cated<span class="_ _2"> </span>on<span class="_ _2"> </span>a<span class="_ _2"> </span>register.</div><div class="t m0 x111 h8 y124b ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _16"> </span><span class="ff5 fs4">void<span class="_ _31"> </span>exchange(int*<span class="_ _31"> </span>a,<span class="_ _9"> </span>int*<span class="_ _31"> </span>b)</span></div><div class="t m0 x111 h8 y124c ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _16"> </span><span class="ff5 fs4">{</span></div><div class="t m0 x111 h8 y124d ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _7a"> </span><span class="ff5 fs4">int<span class="_ _31"> </span>tmp<span class="_ _31"> </span>=<span class="_ _31"> </span>*b;</span></div><div class="t m0 x111 h8 y124e ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _7a"> </span><span class="ff5 fs4">*b<span class="_ _31"> </span>=<span class="_ _31"> </span>*a</span></div><div class="t m0 x111 h8 y124f ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _7a"> </span><span class="ff5 fs4">*a<span class="_ _31"> </span>=<span class="_ _31"> </span>tmp;</span></div><div class="t m0 x111 h8 y1250 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _16"> </span><span class="ff5 fs4">}</span></div><div class="t m0 xd h7 y1251 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _b"> </span>following<span class="_ _b"> </span>co<span class="_ _4"></span>de<span class="_ _b"> </span>shows<span class="_ _b"> </span>the<span class="_ _3"> </span>assem<span class="_ _8"></span>bly<span class="_ _3"> </span>co<span class="_ _4"></span>de<span class="_ _b"> </span>for<span class="_ _b"> </span>the<span class="_ _3"> </span>previous<span class="_ _b"> </span>“C”<span class="_ _3"> </span>co<span class="_ _4"></span>de.<span class="_ _26"> </span>Notice</div><div class="t m0 x15 h7 y1252 ff3 fs4 fc0 sc0 ls0 ws0">that<span class="_ _2"> </span>the<span class="_ _2"> </span>lo<span class="_ _4"></span>cal<span class="_ _5"> </span>v<span class="_ _8"></span>ariable<span class="_ _2"> </span><span class="ff5">tmp<span class="_ _2"> </span></span>was<span class="_ _5"> </span>allo<span class="_ _4"></span>cated<span class="_ _5"> </span>on<span class="_ _2"> </span>register<span class="_ _2"> </span>a2.</div><div class="t m0 x111 h8 y1253 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _16"> </span><span class="ff5 fs4">exchange:</span></div><div class="t m0 x111 h8 y1254 ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _32"> </span><span class="ff5 fs4">lw<span class="_ _9"> </span>a2,<span class="_ _31"> </span>(a1)<span class="_ _3b"> </span>#<span class="_ _31"> </span>tmp<span class="_ _31"> </span>=<span class="_ _31"> </span>*b</span></div><div class="t m0 x111 h8 y1255 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _32"> </span><span class="ff5 fs4">lw<span class="_ _9"> </span>a3,<span class="_ _31"> </span>(a0)<span class="_ _3b"> </span>#<span class="_ _31"> </span>a3<span class="_ _31"> </span>=<span class="_ _31"> </span>*a</span></div><div class="t m0 x111 h8 y1256 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _32"> </span><span class="ff5 fs4">sw<span class="_ _9"> </span>a3,<span class="_ _31"> </span>(a1)<span class="_ _3b"> </span>#<span class="_ _31"> </span>*b<span class="_ _31"> </span>=<span class="_ _31"> </span>a3</span></div><div class="t m0 x111 h8 y1257 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _32"> </span><span class="ff5 fs4">sw<span class="_ _9"> </span>a2,<span class="_ _31"> </span>(a0)<span class="_ _3b"> </span>#<span class="_ _31"> </span>*a<span class="_ _31"> </span>=<span class="_ _31"> </span>tmp</span></div><div class="t m0 x111 h8 ycc8 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _32"> </span><span class="ff5 fs4">ret</span></div><div class="t m0 x1f h7 yc ff5 fs4 fc0 sc0 ls0 ws0">http://riscv-<span class="_ _4"></span>programming.org<span class="_ _2"> </span><span class="ff3">(V<span class="_ _7"></span>ersion:<span class="_ _a"> </span>Marc<span class="_ _8"></span>h<span class="_ _2"> </span>29,<span class="_ _2"> </span>2021)<span class="_ _4e"> </span>95</span></div><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:141.766000px;bottom:36.395000px;width:148.940000px;height:13.948000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

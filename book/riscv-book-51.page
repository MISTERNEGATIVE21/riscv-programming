<div id="pf33" class="pf w0 h0" data-page-no="33"><div class="pc pc33 w0 h0"><img class="bi x17 y97c w2 h77" alt="" src="bg33.png"/><div class="t m0 x17 h7 y147 ff3 fs4 fc0 sc0 ls0 ws0">CHAPTER<span class="_ _2"> </span>4.<span class="_ _19"> </span>ASSEMBL<span class="_ _7"></span>Y<span class="_ _2"> </span>LANGUAGE</div><div class="t m0 x13 h7 y1e ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff3">a<span class="_ _2"> </span>line<span class="_ _2"> </span>ma<span class="_ _1"></span>y<span class="_ _2"> </span>con<span class="_ _1"></span>tain<span class="_ _2"> </span>a<span class="_ _2"> </span>single<span class="_ _2"> </span>lab<span class="_ _4"></span>el;</span></div><div class="t m0 x13 h7 y97d ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff3">a<span class="_ _2"> </span>line<span class="_ _2"> </span>ma<span class="_ _1"></span>y<span class="_ _2"> </span>con<span class="_ _1"></span>tain<span class="_ _2"> </span>a<span class="_ _2"> </span>lab<span class="_ _4"></span>el<span class="_ _5"> </span>follow<span class="_ _8"></span>ed<span class="_ _2"> </span>by<span class="_ _5"> </span>an<span class="_ _2"> </span>assembly<span class="_ _5"> </span>instruction;</span></div><div class="t m0 x13 h7 y97e ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff3">a<span class="_ _2"> </span>line<span class="_ _2"> </span>ma<span class="_ _1"></span>y<span class="_ _2"> </span>con<span class="_ _1"></span>tain<span class="_ _2"> </span>a<span class="_ _2"> </span>single<span class="_ _2"> </span>assem<span class="_ _1"></span>bly<span class="_ _2"> </span>instruction;</span></div><div class="t m0 x13 h7 y97f ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff3">a<span class="_ _2"> </span>line<span class="_ _2"> </span>ma<span class="_ _1"></span>y<span class="_ _2"> </span>con<span class="_ _1"></span>tain<span class="_ _2"> </span>a<span class="_ _2"> </span>lab<span class="_ _4"></span>el<span class="_ _5"> </span>follow<span class="_ _8"></span>ed<span class="_ _2"> </span>by<span class="_ _5"> </span>an<span class="_ _2"> </span>assembly<span class="_ _5"> </span>directive;</span></div><div class="t m0 x13 h7 y980 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff3">a<span class="_ _2"> </span>line<span class="_ _2"> </span>ma<span class="_ _1"></span>y<span class="_ _2"> </span>con<span class="_ _1"></span>tain<span class="_ _2"> </span>a<span class="_ _2"> </span>single<span class="_ _2"> </span>assem<span class="_ _1"></span>bly<span class="_ _2"> </span>directiv<span class="_ _1"></span>e;</span></div><div class="t m0 x13 h7 y981 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _2"> </span>follo<span class="_ _1"></span>wing<span class="_ _2"> </span>R<span class="_ _23"></span>V32I<span class="_ _2"> </span>assembly<span class="_ _5"> </span>co<span class="_ _4"></span>de<span class="_ _2"> </span>con<span class="_ _1"></span>tains<span class="_ _2"> </span>examples<span class="_ _2"> </span>of<span class="_ _2"> </span>v<span class="_ _8"></span>alid<span class="_ _2"> </span>assem<span class="_ _1"></span>bly<span class="_ _2"> </span>lines:</div><div class="t m0 xd5 h8 y982 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _32"> </span><span class="ff5 fs4">x:</span></div><div class="t m0 xd5 h38 y983 ff24 fs12 fc0 sc0 ls0 ws0">2</div><div class="t m0 xd5 h8 y984 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _16"> </span><span class="ff5 fs4">sum:<span class="_ _82"> </span>addi<span class="_ _31"> </span>a0,<span class="_ _9"> </span>a1,<span class="_ _31"> </span>1</span></div><div class="t m0 xd5 h8 y985 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _64"> </span><span class="ff5 fs4">ret</span></div><div class="t m0 xd5 h8 y986 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _16"> </span><span class="ff5 fs4">.section<span class="_ _82"> </span>.data</span></div><div class="t m0 xd5 h8 y987 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _16"> </span><span class="ff5 fs4">y:<span class="_ _81"> </span>.word<span class="_ _31"> </span>10</span></div><div class="t m0 x13 h7 y988 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _b"> </span>following<span class="_ _b"> </span>R<span class="_ _23"></span>V32I<span class="_ _b"> </span>assembly<span class="_ _b"> </span>code<span class="_ _b"> </span>contains<span class="_ _b"> </span>examples<span class="_ _b"> </span>of<span class="_ _b"> </span>in<span class="_ _1"></span>v<span class="_ _8"></span>alid<span class="_ _b"> </span>assembly<span class="_ _b"> </span>lines.</div><div class="t m0 x17 h7 y989 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _5"> </span>ﬁrst<span class="_ _5"> </span>line<span class="_ _2"> </span>con<span class="_ _8"></span>tains<span class="_ _2"> </span>tw<span class="_ _8"></span>o<span class="_ _5"> </span>lab<span class="_ _4"></span>els<span class="_ _5"> </span>and<span class="_ _5"> </span>the<span class="_ _5"> </span>second<span class="_ _2"> </span>one<span class="_ _5"> </span>contains an<span class="_ _5"> </span>instruction<span class="_ _2"> </span>follo<span class="_ _1"></span>wed</div><div class="t m0 x17 h7 y98a ff3 fs4 fc0 sc0 ls0 ws0">b<span class="_ _1"></span>y a<span class="_ _5"> </span>lab<span class="_ _4"></span>el<span class="_ _5"> </span>(notice that<span class="_ _5"> </span>the<span class="_ _5"> </span>lab<span class="_ _4"></span>el has<span class="_ _5"> </span>to<span class="_ _5"> </span>precede<span class="_ _5"> </span>the<span class="_ _5"> </span>instruction<span class="_ _5"> </span>when<span class="_ _5"> </span>b<span class="_ _4"></span>oth are<span class="_ _5"> </span>lo<span class="_ _4"></span>cated</div><div class="t m0 x17 h7 y98b ff3 fs4 fc0 sc0 ls0 ws0">in the<span class="_ _2f"> </span>same line).<span class="_ _3"> </span>The third<span class="_ _2f"> </span>line con<span class="_ _8"></span>tains t<span class="_ _8"></span>wo instructions<span class="_ _2f"> </span>and the<span class="_ _2f"> </span>fourth one<span class="_ _2f"> </span>con<span class="_ _8"></span>tains</div><div class="t m0 x17 h7 y98c ff3 fs4 fc0 sc0 ls0 ws0">t<span class="_ _1"></span>w<span class="_ _1"></span>o<span class="_ _5"> </span>assembly<span class="_ _5"> </span>directives, how<span class="_ _8"></span>ever,<span class="_ _5"> </span>only<span class="_ _2"> </span>one<span class="_ _5"> </span>instruction<span class="_ _2"> </span>or<span class="_ _5"> </span>one<span class="_ _2"> </span>directiv<span class="_ _1"></span>e<span class="_ _5"> </span>is<span class="_ _2"> </span>allo<span class="_ _1"></span>w<span class="_ _1"></span>ed<span class="_ _5"> </span>p<span class="_ _4"></span>er</div><div class="t m0 x17 h7 y98d ff3 fs4 fc0 sc0 ls0 ws0">line.<span class="_ _12"> </span>The<span class="_ _b"> </span>ﬁfth<span class="_ _2"> </span>line<span class="_ _b"> </span>contains<span class="_ _b"> </span>an<span class="_ _b"> </span>assem<span class="_ _8"></span>bly<span class="_ _b"> </span>directive<span class="_ _b"> </span>follo<span class="_ _8"></span>wed<span class="_ _b"> </span>b<span class="_ _8"></span>y<span class="_ _b"> </span>a<span class="_ _b"> </span>lab<span class="_ _4"></span>el,<span class="_ _b"> </span>ho<span class="_ _1"></span>w<span class="_ _1"></span>ev<span class="_ _1"></span>er,<span class="_ _b"> </span>the</div><div class="t m0 x17 h7 y98e ff3 fs4 fc0 sc0 ls0 ws0">lab<span class="_ _4"></span>el<span class="_ _5"> </span>has<span class="_ _b"> </span>to<span class="_ _5"> </span>precede<span class="_ _b"> </span>the<span class="_ _2"> </span>directiv<span class="_ _8"></span>e<span class="_ _b"> </span>when<span class="_ _2"> </span>both<span class="_ _b"> </span>are<span class="_ _5"> </span>lo<span class="_ _4"></span>cated<span class="_ _2"> </span>in<span class="_ _b"> </span>the<span class="_ _5"> </span>same<span class="_ _b"> </span>line.<span class="_ _a"> </span>The<span class="_ _2"> </span>sixth</div><div class="t m0 x17 h7 y98f ff3 fs4 fc0 sc0 ls0 ws0">line<span class="_ _a"> </span>contains<span class="_ _3"> </span>an<span class="_ _a"> </span>instruction<span class="_ _25"> </span>and<span class="_ _a"> </span>an<span class="_ _a"> </span>assembly<span class="_ _a"> </span>directiv<span class="_ _8"></span>e<span class="_ _25"> </span>on<span class="_ _a"> </span>the<span class="_ _a"> </span>same<span class="_ _25"> </span>line<span class="_ _a"> </span>while<span class="_ _a"> </span>the</div><div class="t m0 x17 h7 y990 ff3 fs4 fc0 sc0 ls0 ws0">sev<span class="_ _1"></span>en<span class="_ _1"></span>th<span class="_ _2"> </span>line<span class="_ _2"> </span>con<span class="_ _1"></span>tains<span class="_ _2"> </span>an<span class="_ _2"> </span>in<span class="_ _1"></span>v<span class="_ _8"></span>alid<span class="_ _2"> </span>directiv<span class="_ _1"></span>e.</div><div class="t m0 xd5 h8 y991 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _32"> </span><span class="ff5 fs4">x:<span class="_ _9"> </span>z:</span></div><div class="t m0 xd5 h8 y992 ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _16"> </span><span class="ff5 fs4">addi<span class="_ _31"> </span>a0,<span class="_ _31"> </span>a1,<span class="_ _9"> </span>1<span class="_ _31"> </span>sum:</span></div><div class="t m0 xd5 h8 y993 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _32"> </span><span class="ff5 fs4">li<span class="_ _9"> </span>a0,<span class="_ _31"> </span>2<span class="_ _81"> </span>li<span class="_ _31"> </span>a1,<span class="_ _31"> </span>1</span></div><div class="t m0 xd5 h8 y994 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _16"> </span><span class="ff5 fs4">.word<span class="_ _31"> </span>10<span class="_ _31"> </span>.word<span class="_ _9"> </span>20</span></div><div class="t m0 xd5 h8 y995 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _7a"> </span><span class="ff5 fs4">.word<span class="_ _31"> </span>10<span class="_ _82"> </span>y:</span></div><div class="t m0 xd5 h8 y996 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _16"> </span><span class="ff5 fs4">addi<span class="_ _31"> </span>a0,<span class="_ _31"> </span>a1,<span class="_ _9"> </span>1<span class="_ _82"> </span>.word<span class="_ _31"> </span>12</span></div><div class="t m0 xd5 h8 y997 ff24 fs12 fc0 sc0 ls0 ws0">7<span class="_ _16"> </span><span class="ff5 fs4">.sdfoiywer<span class="_ _31"> </span>1</span></div><div class="t m0 x13 h7 y998 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _5"> </span>following R<span class="_ _7"></span>V32I<span class="_ _5"> </span>assembly co<span class="_ _4"></span>de<span class="_ _5"> </span>is<span class="_ _5"> </span>also<span class="_ _2"> </span>in<span class="_ _1"></span>v<span class="_ _8"></span>alid<span class="_ _5"> </span>b<span class="_ _4"></span>ecause<span class="_ _5"> </span>all<span class="_ _5"> </span>elements<span class="_ _5"> </span>of<span class="_ _5"> </span>a<span class="_ _2"> </span>single</div><div class="t m0 x17 h7 y999 ff3 fs4 fc0 sc0 ls0 ws0">instruction,<span class="_ _25"> </span><span class="ff8">i.e.</span>,<span class="_ _25"> </span>its<span class="_ _a"> </span>mnemonic<span class="_ _a"> </span>and<span class="_ _3"> </span>op<span class="_ _4"></span>erands,<span class="_ _25"> </span>must<span class="_ _3"> </span>b<span class="_ _4"></span>e<span class="_ _3"> </span>expressed<span class="_ _a"> </span>in<span class="_ _a"> </span>the<span class="_ _a"> </span>same<span class="_ _a"> </span>line.</div><div class="t m0 x17 h7 y99a ff3 fs4 fc0 sc0 ls0 ws0">This<span class="_ _2"> </span>is<span class="_ _2"> </span>also<span class="_ _2"> </span>a<span class="_ _2"> </span>requiremen<span class="_ _1"></span>t<span class="_ _2"> </span>for<span class="_ _2"> </span>assem<span class="_ _1"></span>bly<span class="_ _2"> </span>directiv<span class="_ _1"></span>es.</div><div class="t m0 xd5 h8 y99b ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _16"> </span><span class="ff5 fs4">addi</span></div><div class="t m0 xd5 h8 y99c ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _16"> </span><span class="ff5 fs4">a0,<span class="_ _31"> </span>a1,<span class="_ _31"> </span>1</span></div><div class="t m0 x13 h7 y99d ff3 fs4 fc0 sc0 ls0 ws0">The GNU<span class="_ _5"> </span>assembler tool<span class="_ _5"> </span>is<span class="_ _5"> </span>actually a<span class="_ _5"> </span>family<span class="_ _5"> </span>of assemblers.<span class="_ _3"> </span>It includes<span class="_ _5"> </span>assemblers</div><div class="t m0 x17 h7 y99e ff3 fs4 fc0 sc0 ls0 ws0">for<span class="_ _2"> </span>several<span class="_ _2"> </span>ISAs,<span class="_ _b"> </span>including<span class="_ _2"> </span>the<span class="_ _b"> </span>R<span class="_ _23"></span>V32I<span class="_ _b"> </span>ISA.<span class="_ _2"> </span>Even<span class="_ _2"> </span>though<span class="_ _b"> </span>the<span class="_ _2"> </span>assembly<span class="_ _2"> </span>language<span class="_ _2"> </span>pro-</div><div class="t m0 x17 h7 y99f ff3 fs4 fc0 sc0 ls0 ws0">cessed by eac<span class="_ _8"></span>h<span class="_ _5"> </span>GNU assembler is diﬀerent (usually due to<span class="_ _5"> </span>diﬀerences on<span class="_ _5"> </span>the assembly</div><div class="t m0 x17 h7 y9a0 ff3 fs4 fc0 sc0 ls0 ws0">instructions, whic<span class="_ _8"></span>h are designed<span class="_ _30"> </span>to b<span class="_ _4"></span>e<span class="_ _30"> </span>similar to the<span class="_ _30"> </span>machine instructions<span class="_ _30"> </span>on the ISA),</div><div class="t m0 x17 h7 y9a1 ff3 fs4 fc0 sc0 ls0 ws0">most of<span class="_ _2f"> </span>them share<span class="_ _2f"> </span>the same<span class="_ _2f"> </span>syn<span class="_ _8"></span>tax for commen<span class="_ _8"></span>ts and labels, and the same<span class="_ _2f"> </span>syn<span class="_ _8"></span>tax for</div><div class="t m0 x17 h7 y9a2 ff3 fs4 fc0 sc0 ls0 ws0">most<span class="_ _5"> </span>of<span class="_ _5"> </span>the<span class="_ _5"> </span>assembly directives.<span class="_ _3"> </span>In<span class="_ _5"> </span>this<span class="_ _5"> </span>sense,<span class="_ _2"> </span>once<span class="_ _5"> </span>you learn<span class="_ _5"> </span>one<span class="_ _2"> </span>assem<span class="_ _8"></span>bly<span class="_ _2"> </span>language,</div><div class="t m0 x17 h7 y9a3 ff3 fs4 fc0 sc0 ls0 ws0">it<span class="_ _2"> </span>should<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>easy<span class="_ _2"> </span>to<span class="_ _2"> </span>learn<span class="_ _2"> </span>new<span class="_ _2"> </span>assembly<span class="_ _5"> </span>languages.</div><div class="t m0 x13 h7 yd1 ff3 fs4 fc0 sc0 ls0 ws0">In<span class="_ _3"> </span>this<span class="_ _a"> </span>b<span class="_ _4"></span>ook<span class="_ _a"> </span>we<span class="_ _3"> </span>will<span class="_ _3"> </span>fo<span class="_ _4"></span>cus<span class="_ _3"> </span>on<span class="_ _a"> </span>the<span class="_ _a"> </span>R<span class="_ _23"></span>V32I<span class="_ _a"> </span>assembly<span class="_ _3"> </span>language<span class="_ _a"> </span>in<span class="_ _8"></span>terpreted<span class="_ _a"> </span>by<span class="_ _3"> </span>the</div><div class="t m0 x17 h7 yd2 ff3 fs4 fc0 sc0 ls0 ws0">GNU<span class="_ _2"> </span>assembler<span class="_ _2"> </span>to<span class="_ _4"></span>ol.<span class="_ _25"> </span>The<span class="_ _b"> </span>follo<span class="_ _8"></span>wing<span class="_ _b"> </span>sections<span class="_ _2"> </span>discuss<span class="_ _2"> </span>the<span class="_ _b"> </span>syn<span class="_ _8"></span>tax<span class="_ _b"> </span>of<span class="_ _2"> </span>comments,<span class="_ _2"> </span>lab<span class="_ _4"></span>els,</div><div class="t m0 x17 h7 yd3 ff3 fs4 fc0 sc0 ls0 ws0">assem<span class="_ _1"></span>bly<span class="_ _b"> </span>instructions,<span class="_ _b"> </span>and<span class="_ _2"> </span>assembly<span class="_ _b"> </span>directiv<span class="_ _8"></span>es<span class="_ _b"> </span>on<span class="_ _b"> </span>R<span class="_ _23"></span>V32I<span class="_ _b"> </span>assem<span class="_ _8"></span>bly<span class="_ _b"> </span>programs<span class="_ _b"> </span>for<span class="_ _2"> </span>the</div><div class="t m0 x17 h7 y48 ff3 fs4 fc0 sc0 ls0 ws0">GNU<span class="_ _2"> </span>assem<span class="_ _1"></span>bler<span class="_ _2"> </span>to<span class="_ _4"></span>ol.</div><div class="t m0 x42 h7 yc ff5 fs4 fc0 sc0 ls0 ws0">http://riscv-<span class="_ _4"></span>programming.org<span class="_ _2"> </span><span class="ff3">(V<span class="_ _7"></span>ersion:<span class="_ _3"> </span>March<span class="_ _2"> </span>29,<span class="_ _2"> </span>2021)<span class="_ _85"> </span>38</span></div><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,506.875,null]'><div class="d m1" style="border-style:none;position:absolute;left:183.527000px;bottom:176.214000px;width:18.597000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,506.875,null]'><div class="d m1" style="border-style:none;position:absolute;left:302.066000px;bottom:176.214000px;width:18.597000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,506.875,null]'><div class="d m1" style="border-style:none;position:absolute;left:480.324000px;bottom:151.750000px;width:18.597000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:187.121000px;bottom:36.395000px;width:148.940000px;height:13.948000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

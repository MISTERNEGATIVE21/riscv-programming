<div id="pf34" class="pf w0 h0" data-page-no="34"><div class="pc pc34 w0 h0"><img class="bi x13 y98d w2 h76" alt="" src="bg34.png"/><div class="t m0 x13 h7 y15a ff3 fs4 fc0 sc0 ls0 ws0">CHAPTER<span class="_ _2"> </span>4.<span class="_ _22"> </span>ASSEMBL<span class="_ _7"></span>Y<span class="_ _2"> </span>LANGUAGE</div><div class="t m0 x14 h7 y38 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff3">a<span class="_ _2"> </span>line<span class="_ _2"> </span>may<span class="_ _2"> </span>con<span class="_ _8"></span>tain<span class="_ _2"> </span>a<span class="_ _2"> </span>single<span class="_ _2"> </span>lab<span class="_ _4"></span>el;</span></div><div class="t m0 x14 h7 y98e ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff3">a<span class="_ _2"> </span>line<span class="_ _2"> </span>may<span class="_ _2"> </span>con<span class="_ _8"></span>tain<span class="_ _2"> </span>a<span class="_ _2"> </span>lab<span class="_ _4"></span>el<span class="_ _2"> </span>follo<span class="_ _1"></span>w<span class="_ _1"></span>ed<span class="_ _2"> </span>by<span class="_ _5"> </span>an<span class="_ _2"> </span>assembly<span class="_ _5"> </span>instruction;</span></div><div class="t m0 x14 h7 y98f ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff3">a<span class="_ _2"> </span>line<span class="_ _2"> </span>may<span class="_ _2"> </span>con<span class="_ _8"></span>tain<span class="_ _2"> </span>a<span class="_ _2"> </span>single<span class="_ _2"> </span>assembly<span class="_ _2"> </span>instruction;</span></div><div class="t m0 x14 h7 y990 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff3">a<span class="_ _2"> </span>line<span class="_ _2"> </span>may<span class="_ _2"> </span>con<span class="_ _8"></span>tain<span class="_ _2"> </span>a<span class="_ _2"> </span>lab<span class="_ _4"></span>el<span class="_ _2"> </span>follo<span class="_ _1"></span>w<span class="_ _1"></span>ed<span class="_ _2"> </span>by<span class="_ _5"> </span>an<span class="_ _2"> </span>assembly<span class="_ _5"> </span>directive;</span></div><div class="t m0 x14 h7 y991 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff3">a<span class="_ _2"> </span>line<span class="_ _2"> </span>may<span class="_ _2"> </span>con<span class="_ _8"></span>tain<span class="_ _2"> </span>a<span class="_ _2"> </span>single<span class="_ _2"> </span>assembly<span class="_ _2"> </span>directiv<span class="_ _8"></span>e;</span></div><div class="t m0 x14 h7 y992 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _2"> </span>follo<span class="_ _1"></span>wing<span class="_ _2"> </span>R<span class="_ _2c"></span>V32I<span class="_ _2"> </span>assem<span class="_ _1"></span>bly<span class="_ _2"> </span>co<span class="_ _4"></span>de<span class="_ _5"> </span>contains<span class="_ _5"> </span>examples<span class="_ _2"> </span>of<span class="_ _2"> </span>v<span class="_ _8"></span>alid<span class="_ _2"> </span>assembly<span class="_ _5"> </span>lines:</div><div class="t m0 xd5 h8 y993 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _36"> </span><span class="ff5 fs4">x:</span></div><div class="t m0 xd5 h38 y994 ff24 fs12 fc0 sc0 ls0 ws0">2</div><div class="t m0 xd5 h8 y995 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _1f"> </span><span class="ff5 fs4">sum:<span class="_ _85"> </span>addi<span class="_ _e"> </span>a0,<span class="_ _11"> </span>a1,<span class="_ _e"> </span>1</span></div><div class="t m0 xd5 h8 y996 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _67"> </span><span class="ff5 fs4">ret</span></div><div class="t m0 xd5 h8 y997 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _1f"> </span><span class="ff5 fs4">.section<span class="_ _85"> </span>.data</span></div><div class="t m0 xd5 h8 y998 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _1f"> </span><span class="ff5 fs4">y:<span class="_ _86"> </span>.word<span class="_ _11"> </span>10</span></div><div class="t m0 x14 h7 y999 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _a"> </span>follo<span class="_ _1"></span>wing<span class="_ _d"> </span>R<span class="_ _2c"></span>V32I<span class="_ _a"> </span>assembly<span class="_ _d"> </span>co<span class="_ _4"></span>de<span class="_ _a"> </span>con<span class="_ _1"></span>tains<span class="_ _d"> </span>examples<span class="_ _a"> </span>of<span class="_ _a"> </span>inv<span class="_ _7"></span>alid<span class="_ _a"> </span>assembly<span class="_ _d"> </span>lines.</div><div class="t m0 x13 h7 y99a ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _5"> </span>ﬁrst<span class="_ _5"> </span>line<span class="_ _2"> </span>con<span class="_ _8"></span>tains<span class="_ _2"> </span>tw<span class="_ _8"></span>o<span class="_ _5"> </span>lab<span class="_ _4"></span>els<span class="_ _5"> </span>and<span class="_ _5"> </span>the<span class="_ _5"> </span>second<span class="_ _2"> </span>one<span class="_ _5"> </span>contains an<span class="_ _5"> </span>instruction<span class="_ _2"> </span>follo<span class="_ _1"></span>wed</div><div class="t m0 x13 h7 y99b ff3 fs4 fc0 sc0 ls0 ws0">b<span class="_ _1"></span>y a<span class="_ _5"> </span>lab<span class="_ _4"></span>el<span class="_ _5"> </span>(notice that<span class="_ _5"> </span>the<span class="_ _5"> </span>lab<span class="_ _4"></span>el has<span class="_ _5"> </span>to<span class="_ _5"> </span>precede<span class="_ _5"> </span>the<span class="_ _5"> </span>instruction<span class="_ _5"> </span>when<span class="_ _5"> </span>b<span class="_ _4"></span>oth are<span class="_ _5"> </span>lo<span class="_ _4"></span>cated</div><div class="t m0 x13 h7 y99c ff3 fs4 fc0 sc0 ls0 ws0">in the<span class="_ _13"> </span>same line).<span class="_ _a"> </span>The third line con<span class="_ _8"></span>tains t<span class="_ _8"></span>wo instructions<span class="_ _13"> </span>and the<span class="_ _13"> </span>fourth one<span class="_ _13"> </span>con<span class="_ _1"></span>tains</div><div class="t m0 x13 h7 y99d ff3 fs4 fc0 sc0 ls0 ws0">t<span class="_ _1"></span>w<span class="_ _1"></span>o<span class="_ _5"> </span>assembly<span class="_ _5"> </span>directives, how<span class="_ _8"></span>ever,<span class="_ _5"> </span>only<span class="_ _2"> </span>one<span class="_ _5"> </span>instruction<span class="_ _2"> </span>or<span class="_ _5"> </span>one<span class="_ _2"> </span>directiv<span class="_ _1"></span>e<span class="_ _5"> </span>is<span class="_ _2"> </span>allo<span class="_ _1"></span>w<span class="_ _1"></span>ed<span class="_ _5"> </span>p<span class="_ _4"></span>er</div><div class="t m0 x13 h7 y99e ff3 fs4 fc0 sc0 ls0 ws0">line.<span class="_ _1b"> </span>The<span class="_ _d"> </span>ﬁfth<span class="_ _d"> </span>line<span class="_ _a"> </span>contains<span class="_ _d"> </span>an<span class="_ _d"> </span>assembly<span class="_ _d"> </span>directive<span class="_ _d"> </span>follow<span class="_ _8"></span>ed<span class="_ _d"> </span>by<span class="_ _d"> </span>a<span class="_ _a"> </span>lab<span class="_ _4"></span>el,<span class="_ _d"> </span>how<span class="_ _8"></span>ever,<span class="_ _d"> </span>the</div><div class="t m0 x13 h7 y99f ff3 fs4 fc0 sc0 ls0 ws0">lab<span class="_ _4"></span>el<span class="_ _5"> </span>has<span class="_ _d"> </span>to<span class="_ _2"> </span>precede<span class="_ _2"> </span>the<span class="_ _d"> </span>directive<span class="_ _5"> </span>when<span class="_ _d"> </span>b<span class="_ _4"></span>oth<span class="_ _5"> </span>are<span class="_ _d"> </span>lo<span class="_ _4"></span>cated<span class="_ _2"> </span>in<span class="_ _2"> </span>the<span class="_ _2"> </span>same<span class="_ _d"> </span>line.<span class="_ _f"> </span>The<span class="_ _2"> </span>sixth</div><div class="t m0 x13 h7 y9a0 ff3 fs4 fc0 sc0 ls0 ws0">line<span class="_ _c"> </span>contains<span class="_ _3"> </span>an<span class="_ _c"> </span>instruction<span class="_ _c"> </span>and<span class="_ _f"> </span>an<span class="_ _c"> </span>assembly<span class="_ _3"> </span>directive<span class="_ _3"> </span>on<span class="_ _f"> </span>the<span class="_ _c"> </span>same<span class="_ _c"> </span>line<span class="_ _c"> </span>while<span class="_ _f"> </span>the</div><div class="t m0 x13 h7 y9a1 ff3 fs4 fc0 sc0 ls0 ws0">sev<span class="_ _1"></span>en<span class="_ _1"></span>th<span class="_ _2"> </span>line<span class="_ _2"> </span>con<span class="_ _1"></span>tains<span class="_ _2"> </span>an<span class="_ _2"> </span>in<span class="_ _1"></span>v<span class="_ _8"></span>alid<span class="_ _2"> </span>directiv<span class="_ _1"></span>e.</div><div class="t m0 xd5 h8 y9a2 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _36"> </span><span class="ff5 fs4">x:<span class="_ _11"> </span>z:</span></div><div class="t m0 xd5 h8 y9a3 ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _1f"> </span><span class="ff5 fs4">addi<span class="_ _e"> </span>a0,<span class="_ _11"> </span>a1,<span class="_ _e"> </span>1<span class="_ _e"> </span>sum:</span></div><div class="t m0 xd5 h8 y9a4 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _36"> </span><span class="ff5 fs4">li<span class="_ _11"> </span>a0,<span class="_ _e"> </span>2<span class="_ _86"> </span>li<span class="_ _e"> </span>a1,<span class="_ _11"> </span>1</span></div><div class="t m0 xd5 h8 y9a5 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _1f"> </span><span class="ff5 fs4">.word<span class="_ _e"> </span>10<span class="_ _11"> </span>.word<span class="_ _e"> </span>20</span></div><div class="t m0 xd5 h8 y9a6 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _7e"> </span><span class="ff5 fs4">.word<span class="_ _e"> </span>10<span class="_ _85"> </span>y:</span></div><div class="t m0 xd5 h8 y9a7 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _1f"> </span><span class="ff5 fs4">addi<span class="_ _e"> </span>a0,<span class="_ _11"> </span>a1,<span class="_ _e"> </span>1<span class="_ _85"> </span>.word<span class="_ _e"> </span>12</span></div><div class="t m0 xd5 h8 y9a8 ff24 fs12 fc0 sc0 ls0 ws0">7<span class="_ _1f"> </span><span class="ff5 fs4">.sdfoiywer<span class="_ _e"> </span>1</span></div><div class="t m0 x14 h7 y9a9 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _5"> </span>following R<span class="_ _2c"></span>V32I<span class="_ _2"> </span>assembly co<span class="_ _4"></span>de<span class="_ _5"> </span>is<span class="_ _5"> </span>also<span class="_ _2"> </span>in<span class="_ _1"></span>v<span class="_ _8"></span>alid<span class="_ _5"> </span>b<span class="_ _4"></span>ecause<span class="_ _5"> </span>all<span class="_ _5"> </span>elements<span class="_ _5"> </span>of<span class="_ _5"> </span>a<span class="_ _2"> </span>single</div><div class="t m0 x13 h7 y9aa ff3 fs4 fc0 sc0 ls0 ws0">instruction,<span class="_ _c"> </span><span class="ff8">i.e.</span>,<span class="_ _f"> </span>its<span class="_ _c"> </span>mnemonic<span class="_ _c"> </span>and<span class="_ _c"> </span>op<span class="_ _4"></span>erands,<span class="_ _c"> </span>must<span class="_ _3"> </span>b<span class="_ _4"></span>e<span class="_ _3"> </span>expressed<span class="_ _c"> </span>in<span class="_ _c"> </span>the<span class="_ _c"> </span>same<span class="_ _c"> </span>line.</div><div class="t m0 x13 h7 y9ab ff3 fs4 fc0 sc0 ls0 ws0">This<span class="_ _2"> </span>is<span class="_ _2"> </span>also<span class="_ _2"> </span>a<span class="_ _2"> </span>requiremen<span class="_ _1"></span>t<span class="_ _2"> </span>for<span class="_ _2"> </span>assem<span class="_ _1"></span>bly<span class="_ _2"> </span>directiv<span class="_ _1"></span>es.</div><div class="t m0 xd5 h8 y9ac ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _1f"> </span><span class="ff5 fs4">addi</span></div><div class="t m0 xd5 h8 y9ad ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _1f"> </span><span class="ff5 fs4">a0,<span class="_ _e"> </span>a1,<span class="_ _11"> </span>1</span></div><div class="t m0 x14 h7 y9ae ff3 fs4 fc0 sc0 ls0 ws0">The GNU<span class="_ _5"> </span>assembler tool<span class="_ _5"> </span>is<span class="_ _5"> </span>actually a<span class="_ _5"> </span>family<span class="_ _5"> </span>of assemblers.<span class="_ _3"> </span>It includes<span class="_ _5"> </span>assemblers</div><div class="t m0 x13 h7 y9af ff3 fs4 fc0 sc0 ls0 ws0">for<span class="_ _2"> </span>several<span class="_ _2"> </span>ISAs,<span class="_ _d"> </span>including<span class="_ _d"> </span>the<span class="_ _d"> </span>R<span class="_ _2c"></span>V32I<span class="_ _d"> </span>ISA.<span class="_ _d"> </span>Ev<span class="_ _1"></span>en<span class="_ _2"> </span>though<span class="_ _d"> </span>the<span class="_ _d"> </span>assembly<span class="_ _2"> </span>language<span class="_ _d"> </span>pro-</div><div class="t m0 x13 h7 y9b0 ff3 fs4 fc0 sc0 ls0 ws0">cessed by eac<span class="_ _8"></span>h<span class="_ _5"> </span>GNU assembler is diﬀerent (usually due to<span class="_ _5"> </span>diﬀerences on<span class="_ _5"> </span>the assembly</div><div class="t m0 x13 h7 y9b1 ff3 fs4 fc0 sc0 ls0 ws0">instructions, whic<span class="_ _8"></span>h are designed<span class="_ _12"> </span>to b<span class="_ _4"></span>e<span class="_ _12"> </span>similar to<span class="_ _13"> </span>the mac<span class="_ _8"></span>hine instructions<span class="_ _12"> </span>on the ISA),</div><div class="t m0 x13 h7 y9b2 ff3 fs4 fc0 sc0 ls0 ws0">most of<span class="_ _13"> </span>them share<span class="_ _13"> </span>the same<span class="_ _12"> </span>syntax for<span class="_ _12"> </span>comments and<span class="_ _12"> </span>lab<span class="_ _4"></span>els, and the<span class="_ _13"> </span>same syn<span class="_ _8"></span>tax for</div><div class="t m0 x13 h7 y9b3 ff3 fs4 fc0 sc0 ls0 ws0">most<span class="_ _5"> </span>of<span class="_ _5"> </span>the<span class="_ _5"> </span>assembly directives.<span class="_ _3"> </span>In<span class="_ _5"> </span>this<span class="_ _5"> </span>sense,<span class="_ _2"> </span>once<span class="_ _5"> </span>you learn<span class="_ _5"> </span>one<span class="_ _2"> </span>assem<span class="_ _8"></span>bly<span class="_ _2"> </span>language,</div><div class="t m0 x13 h7 y9b4 ff3 fs4 fc0 sc0 ls0 ws0">it<span class="_ _2"> </span>should<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>easy<span class="_ _2"> </span>to<span class="_ _2"> </span>learn<span class="_ _2"> </span>new<span class="_ _2"> </span>assembly<span class="_ _5"> </span>languages.</div><div class="t m0 x14 h7 yea ff3 fs4 fc0 sc0 ls0 ws0">In<span class="_ _3"> </span>this<span class="_ _c"> </span>b<span class="_ _4"></span>ook<span class="_ _c"> </span>we<span class="_ _3"> </span>will<span class="_ _3"> </span>fo<span class="_ _4"></span>cus<span class="_ _3"> </span>on<span class="_ _c"> </span>the<span class="_ _c"> </span>R<span class="_ _2c"></span>V32I<span class="_ _3"> </span>assembly<span class="_ _3"> </span>language<span class="_ _c"> </span>in<span class="_ _1"></span>terpreted<span class="_ _3"> </span>by<span class="_ _3"> </span>the</div><div class="t m0 x13 h7 yeb ff3 fs4 fc0 sc0 ls0 ws0">GNU<span class="_ _2"> </span>assembler<span class="_ _2"> </span>to<span class="_ _4"></span>ol.<span class="_ _f"> </span>The<span class="_ _d"> </span>following<span class="_ _2"> </span>sections<span class="_ _2"> </span>discuss<span class="_ _d"> </span>the<span class="_ _d"> </span>syn<span class="_ _1"></span>tax<span class="_ _2"> </span>of<span class="_ _d"> </span>comments,<span class="_ _2"> </span>lab<span class="_ _4"></span>els,</div><div class="t m0 x13 h7 yec ff3 fs4 fc0 sc0 ls0 ws0">assem<span class="_ _1"></span>bly<span class="_ _d"> </span>instructions,<span class="_ _a"> </span>and<span class="_ _d"> </span>assembly<span class="_ _2"> </span>directives<span class="_ _2"> </span>on<span class="_ _a"> </span>R<span class="_ _2c"></span>V32I<span class="_ _d"> </span>assembly<span class="_ _2"> </span>programs<span class="_ _a"> </span>for<span class="_ _d"> </span>the</div><div class="t m0 x13 h7 y61 ff3 fs4 fc0 sc0 ls0 ws0">GNU<span class="_ _2"> </span>assem<span class="_ _1"></span>bler<span class="_ _2"> </span>to<span class="_ _4"></span>ol.</div><div class="t m0 x43 h7 yc ff5 fs4 fc0 sc0 ls0 ws0">http://riscv-<span class="_ _4"></span>programming.org<span class="_ _2"> </span><span class="ff3">(V<span class="_ _7"></span>ersion:<span class="_ _c"> </span>August<span class="_ _5"> </span>26,<span class="_ _d"> </span>2021)<span class="_ _6f"> </span>38</span></div><a class="l" href="#pfe" data-dest-detail='[14,"XYZ",136.063,506.875,null]'><div class="d m1" style="border-style:none;position:absolute;left:183.527000px;bottom:176.214000px;width:18.597000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfe" data-dest-detail='[14,"XYZ",136.063,506.875,null]'><div class="d m1" style="border-style:none;position:absolute;left:302.066000px;bottom:176.214000px;width:18.597000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfe" data-dest-detail='[14,"XYZ",136.063,506.875,null]'><div class="d m1" style="border-style:none;position:absolute;left:480.324000px;bottom:151.750000px;width:18.597000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:185.308000px;bottom:36.395000px;width:148.940000px;height:13.948000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

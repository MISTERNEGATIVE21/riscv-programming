<div id="pf26" class="pf w0 h0" data-page-no="26"><div class="pc pc26 w0 h0"><img class="bi x13 y159 w2 h62" alt="" src="bg26.png"/><div class="t m0 x13 hc y72e ff6 fs8 fc0 sc0 ls0 ws0">Chapter<span class="_ _22"> </span>3</div><div class="t m0 x13 h9 y72f ff6 fs5 fc0 sc0 ls0 ws0">Assem<span class="_ _7"></span>bly<span class="_ _9"></span>,<span class="_ _18"> </span>ob<span class="_ _3b"></span>ject,<span class="_ _18"> </span>and</div><div class="t m0 x13 h9 y730 ff6 fs5 fc0 sc0 ls0 ws0">executable<span class="_ _18"> </span>ﬁles</div><div class="t m0 x13 h7 y731 ff3 fs4 fc0 sc0 ls0 ws0">This<span class="_ _d"> </span>c<span class="_ _1"></span>hapter<span class="_ _d"> </span>presen<span class="_ _1"></span>ts<span class="_ _d"> </span>the<span class="_ _d"> </span>main<span class="_ _d"> </span>concepts<span class="_ _d"> </span>and<span class="_ _d"> </span>elemen<span class="_ _1"></span>ts<span class="_ _d"> </span>of<span class="_ _d"> </span>assembly<span class="_ _2c"></span>,<span class="_ _d"> </span>ob<span class="_ _4"></span>ject,<span class="_ _d"> </span>and<span class="_ _d"> </span>exe-</div><div class="t m0 x13 h7 y732 ff3 fs4 fc0 sc0 ls0 ws0">cutable<span class="_ _2"> </span>ﬁles.</div><div class="t m0 x13 hd y733 ff6 fs3 fc0 sc0 ls0 ws0">3.1<span class="_ _36"> </span>Generating<span class="_ _e"> </span>nativ<span class="_ _8"></span>e<span class="_ _1f"> </span>programs</div><div class="t m0 x13 h7 y734 ff3 fs4 fc0 sc0 ls0 ws0">In this<span class="_ _5"> </span>section,<span class="_ _5"> </span>we discuss<span class="_ _5"> </span>how a program<span class="_ _5"> </span>written<span class="_ _5"> </span>in<span class="_ _5"> </span>a<span class="_ _5"> </span>high-level language,<span class="_ _5"> </span>suc<span class="_ _1"></span>h as<span class="_ _5"> </span>C,</div><div class="t m0 x13 h7 y735 ff3 fs4 fc0 sc0 ls0 ws0">is<span class="_ _2"> </span>translated<span class="_ _2"> </span>in<span class="_ _1"></span>to<span class="_ _2"> </span>a<span class="_ _2"> </span>nativ<span class="_ _1"></span>e<span class="_ _2"> </span>program.</div><div class="t m0 x14 h7 y736 ff3 fs4 fc0 sc0 ls0 ws0">As<span class="_ _c"> </span>discussed<span class="_ _f"> </span>in<span class="_ _c"> </span>Chapter<span class="_ _f"> </span>1,<span class="_ _11"> </span><span class="ff7">a<span class="_ _e"> </span>native<span class="_ _11"> </span>program<span class="_ _e"> </span>is<span class="_ _1f"> </span>a<span class="_ _e"> </span>program<span class="_ _e"> </span>enco<span class="_ _4"></span>ded<span class="_ _11"> </span>us-</span></div><div class="t m0 x13 h7 y737 ff7 fs4 fc0 sc0 ls0 ws0">ing<span class="_ _d"> </span>instructions<span class="_ _d"> </span>that<span class="_ _d"> </span>can<span class="_ _a"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>directly<span class="_ _d"> </span>executed<span class="_ _a"> </span>b<span class="_ _1"></span>y<span class="_ _d"> </span>the<span class="_ _d"> </span>computer<span class="_ _d"> </span>hardware,</div><div class="t m0 x13 h7 y738 ff7 fs4 fc0 sc0 ls0 ws0">without<span class="_ _f"> </span>help<span class="_ _11"> </span>from<span class="_ _11"> </span>an<span class="_ _11"> </span>em<span class="_ _1"></span>ulator<span class="_ _f"> </span>or<span class="_ _11"> </span>a<span class="_ _11"> </span>virtual<span class="_ _11"> </span>mac<span class="_ _1"></span>hine<span class="ff3">.<span class="_ _0"> </span>These<span class="_ _3"> </span>programs<span class="_ _c"> </span>are</span></div><div class="t m0 x13 h7 y739 ff3 fs4 fc0 sc0 ls0 ws0">usually<span class="_ _5"> </span>automatically<span class="_ _5"> </span>translated<span class="_ _2"> </span>from<span class="_ _5"> </span>programs<span class="_ _2"> </span>written<span class="_ _5"> </span>in<span class="_ _5"> </span>high-level<span class="_ _5"> </span>languages,<span class="_ _5"> </span>such</div><div class="t m0 x13 h7 y73a ff3 fs4 fc0 sc0 ls0 ws0">as<span class="_ _2"> </span>C,<span class="_ _2"> </span>b<span class="_ _1"></span>y<span class="_ _2"> </span>to<span class="_ _4"></span>ols<span class="_ _5"> </span>like<span class="_ _5"> </span>compilers,<span class="_ _2"> </span>assemblers,<span class="_ _5"> </span>and<span class="_ _2"> </span>linkers.</div><div class="t m0 x14 h7 y73b ff3 fs4 fc0 sc0 ls0 ws0">A<span class="_ _2"> </span>program<span class="_ _5"> </span>written<span class="_ _2"> </span>in<span class="_ _2"> </span>a<span class="_ _2"> </span>high-level<span class="_ _5"> </span>language,<span class="_ _2"> </span>such<span class="_ _5"> </span>as<span class="_ _2"> </span>C,<span class="_ _2"> </span>is<span class="_ _2"> </span>enco<span class="_ _4"></span>ded<span class="_ _5"> </span>as<span class="_ _2"> </span>a<span class="_ _2"> </span>plain<span class="_ _2"> </span>text</div><div class="t m0 x13 h7 y73c ff3 fs4 fc0 sc0 ls0 ws0">ﬁle.<span class="_ _3"> </span>High-lev<span class="_ _1"></span>el languages are<span class="_ _13"> </span>designed to be agnostic of ISA<span class="_ _12"> </span>and they are composed of</div><div class="t m0 x13 h7 y73d ff3 fs4 fc0 sc0 ls0 ws0">sev<span class="_ _1"></span>eral<span class="_ _12"> </span>abstract<span class="_ _13"> </span>elemen<span class="_ _1"></span>ts, suc<span class="_ _8"></span>h<span class="_ _12"> </span>as v<span class="_ _7"></span>ariables, repetition, or<span class="_ _12"> </span>lo<span class="_ _4"></span>op<span class="_ _12"> </span>statemen<span class="_ _8"></span>ts, conditional</div><div class="t m0 x13 h7 y73e ff3 fs4 fc0 sc0 ls0 ws0">statemen<span class="_ _1"></span>ts, routines, <span class="ff8">etc.</span>.<span class="_ _3"> </span>The following code shows an example of a<span class="_ _13"> </span>program written</div><div class="t m0 x13 h7 y73f ff3 fs4 fc0 sc0 ls0 ws0">using<span class="_ _2"> </span>the<span class="_ _2"> </span>C<span class="_ _2"> </span>language,<span class="_ _2"> </span>whic<span class="_ _1"></span>h<span class="_ _2"> </span>is<span class="_ _2"> </span>a<span class="_ _2"> </span>high-lev<span class="_ _1"></span>el<span class="_ _2"> </span>language.</div><div class="t m0 xd5 h8 y740 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _1f"> </span><span class="ff5 fs4">int<span class="_ _e"> </span>main()</span></div><div class="t m0 xd5 h8 y741 ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _1f"> </span><span class="ff5 fs4">{</span></div><div class="t m0 xd5 h8 y742 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _36"> </span><span class="ff5 fs4">int<span class="_ _11"> </span>r<span class="_ _e"> </span>=<span class="_ _e"> </span>func<span class="_ _e"> </span>(10)</span></div><div class="t m0 xd5 h8 y743 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _36"> </span><span class="ff5 fs4">return<span class="_ _11"> </span>r+1;</span></div><div class="t m0 xd5 h8 y744 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _1f"> </span><span class="ff5 fs4">}</span></div><div class="t m0 x14 h7 y745 ff7 fs4 fc0 sc0 ls0 ws0">A<span class="_ _f"> </span>compiler<span class="_ _f"> </span>is<span class="_ _f"> </span>a<span class="_ _f"> </span>to<span class="_ _4"></span>ol<span class="_ _c"> </span>that<span class="_ _f"> </span>translates<span class="_ _f"> </span>a<span class="_ _f"> </span>program<span class="_ _f"> </span>from<span class="_ _f"> </span>one<span class="_ _f"> </span>language<span class="_ _f"> </span>to</div><div class="t m0 x13 h7 y746 ff7 fs4 fc0 sc0 ls0 ws0">another<span class="ff3">.<span class="_ _1b"> </span>Usually<span class="_ _2c"></span>,<span class="_ _a"> </span>programming<span class="_ _a"> </span>language<span class="_ _d"> </span>compilers<span class="_ _a"> </span>are<span class="_ _a"> </span>employ<span class="_ _8"></span>ed<span class="_ _d"> </span>to<span class="_ _a"> </span>translate<span class="_ _a"> </span>pro-</span></div><div class="t m0 x13 h7 y747 ff3 fs4 fc0 sc0 ls0 ws0">grams<span class="_ _a"> </span>written<span class="_ _a"> </span>in<span class="_ _3"> </span>high-lev<span class="_ _1"></span>el<span class="_ _a"> </span>languages<span class="_ _a"> </span>into<span class="_ _a"> </span>low<span class="_ _8"></span>er-level<span class="_ _d"> </span>languages.<span class="_ _2d"> </span>F<span class="_ _7"></span>or<span class="_ _3"> </span>example,<span class="_ _3"> </span>a<span class="_ _a"> </span>C</div><div class="t m0 x13 h7 y748 ff3 fs4 fc0 sc0 ls0 ws0">compiler is<span class="_ _5"> </span>emplo<span class="_ _1"></span>y<span class="_ _1"></span>ed to<span class="_ _5"> </span>translate a<span class="_ _5"> </span>program written<span class="_ _5"> </span>in C<span class="_ _5"> </span>language into assembly lan-</div><div class="t m0 x13 h7 y749 ff3 fs4 fc0 sc0 ls0 ws0">guage.<span class="_ _3"> </span>The<span class="_ _5"> </span>GNU<span class="_ _5"> </span>pro<span class="_ _4"></span>ject<span class="_ _5"> </span>C<span class="_ _5"> </span>and C++<span class="_ _5"> </span>compiler</div><div class="t m0 x11d h11 y74a ffc fs7 fc0 sc0 ls0 ws0">1</div><div class="t m0 x78 h7 y749 ff3 fs4 fc0 sc0 ls0 ws0">,<span class="_ _5"> </span>or <span class="ff5">gcc</span>,<span class="_ _2"> </span>is a<span class="_ _5"> </span>compiler<span class="_ _5"> </span>that<span class="_ _5"> </span>is capable</div><div class="t m0 x13 h7 y74b ff3 fs4 fc0 sc0 ls0 ws0">of<span class="_ _3"> </span>translating<span class="_ _3"> </span>programs<span class="_ _3"> </span>written<span class="_ _a"> </span>in<span class="_ _3"> </span>C<span class="_ _3"> </span>and<span class="_ _3"> </span>C++<span class="_ _3"> </span>languages<span class="_ _3"> </span>into<span class="_ _a"> </span>assembly<span class="_ _a"> </span>programs,</div><div class="t m0 x13 h7 y74c ff8 fs4 fc0 sc0 ls0 ws0">i.e.<span class="ff3">,<span class="_ _5"> </span>a<span class="_ _5"> </span>program<span class="_ _5"> </span>written<span class="_ _5"> </span>in<span class="_ _5"> </span>assem<span class="_ _1"></span>bly<span class="_ _5"> </span>language.<span class="_ _3"> </span>The<span class="_ _5"> </span>following command<span class="_ _5"> </span>line<span class="_ _5"> </span>illustrates</span></div><div class="t m0 x13 h7 y74d ff3 fs4 fc0 sc0 ls0 ws0">ho<span class="_ _1"></span>w<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">riscv64-unknown-elf-gcc<span class="_ _d"> </span></span>tool,<span class="_ _d"> </span>a<span class="_ _2"> </span>GNU<span class="_ _2"> </span>pro<span class="_ _35"></span>ject<span class="_ _2"> </span>C<span class="_ _2"> </span>and<span class="_ _2"> </span>C++<span class="_ _d"> </span>compiler<span class="_ _2"> </span>that</div><div class="t m0 x13 h7 y74e ff3 fs4 fc0 sc0 ls0 ws0">pro<span class="_ _4"></span>duces<span class="_ _2"> </span>co<span class="_ _4"></span>de<span class="_ _2"> </span>for<span class="_ _2"> </span>RISC-V<span class="_ _d"> </span>based<span class="_ _d"> </span>computers,<span class="_ _2"> </span>can<span class="_ _d"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>inv<span class="_ _8"></span>oked<span class="_ _2"> </span>to<span class="_ _d"> </span>pro<span class="_ _4"></span>duce<span class="_ _2"> </span>a<span class="_ _2"> </span>R<span class="_ _2c"></span>V32I<span class="_ _d"> </span>as-</div><div class="t m0 x13 h7 y74f ff3 fs4 fc0 sc0 ls0 ws0">sem<span class="_ _1"></span>bly<span class="_ _2"> </span>program<span class="_ _2"> </span>from<span class="_ _2"> </span>a<span class="_ _2"> </span>C<span class="_ _2"> </span>program.<span class="_ _c"> </span>In<span class="_ _2"> </span>this<span class="_ _2"> </span>example,<span class="_ _2"> </span>the<span class="_ _2"> </span>C<span class="_ _2"> </span>program<span class="_ _2"> </span>is<span class="_ _2"> </span>stored<span class="_ _2"> </span>on<span class="_ _2"> </span>the</div><div class="t m0 x13 h7 y750 ff5 fs4 fc0 sc0 ls0 ws0">main.c<span class="_ _2"> </span><span class="ff3">ﬁle<span class="_ _2"> </span>and<span class="_ _2"> </span>the<span class="_ _2"> </span>R<span class="_ _2c"></span>V32I<span class="_ _2"> </span>assem<span class="_ _1"></span>bly<span class="_ _2"> </span>program<span class="_ _2"> </span>will<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>stored<span class="_ _2"> </span>on<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">main.s<span class="_ _2"> </span></span>ﬁle.</span></div><div class="t m0 x13 h8 y751 ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _11"> </span>riscv64-unknown-elf-gcc<span class="_ _e"> </span>-mabi=ilp32<span class="_ _e"> </span>-march=rv32i<span class="_ _e"> </span>-S<span class="_ _11"> </span>main.c<span class="_ _e"> </span>-o<span class="_ _e"> </span>main.s</div><div class="t m0 x43 h1e y193 ff12 fse fc0 sc0 ls0 ws0">1</div><div class="t m0 x14 h44 y61 ff28 fsf fc0 sc0 ls0 ws0">https://gcc.gnu.org/</div><div class="t m0 x1a h7 yc ff3 fs4 fc0 sc0 ls0 ws0">24</div><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",136.063,413.56,null]'><div class="d m1" style="border-style:none;position:absolute;left:220.718000px;bottom:464.091000px;width:68.466000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf10" data-dest-detail='[16,"XYZ",136.063,771.024,null]'><div class="d m1" style="border-style:none;position:absolute;left:263.795000px;bottom:451.237000px;width:6.974000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",136.063,413.56,null]'><div class="d m1" style="border-style:none;position:absolute;left:287.450000px;bottom:451.237000px;width:80.272000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfe" data-dest-detail='[14,"XYZ",136.063,506.875,null]'><div class="d m1" style="border-style:none;position:absolute;left:374.742000px;bottom:378.608000px;width:18.597000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf26" data-dest-detail='[38,"XYZ",151.306,80.331,null]'><div class="d m1" style="border-style:none;position:absolute;left:338.631000px;bottom:187.235000px;width:6.462000px;height:12.316000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://gcc.gnu.org/"><div class="d m1" style="border-style:none;position:absolute;left:150.310000px;bottom:67.030000px;width:86.676000px;height:11.497000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

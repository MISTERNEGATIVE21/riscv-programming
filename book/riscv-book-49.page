<div id="pf31" class="pf w0 h0" data-page-no="31"><div class="pc pc31 w0 h0"><img class="bi x17 y937 we h75" alt="" src="bg31.png"/><div class="t m0 x17 h7 y147 ff3 fs4 fc0 sc0 ls0 ws0">CHAPTER<span class="_ _2"> </span>3.<span class="_ _19"> </span>ASSEMBL<span class="_ _7"></span>Y,<span class="_ _2"> </span>OBJECT,<span class="_ _2"> </span>AND<span class="_ _2"> </span>EXECUT<span class="_ _7"></span>ABLE<span class="_ _2"> </span>FILES</div><div class="t m0 x17 h8 yd4 ff5 fs4 fc0 sc0 ls0 ws0">00010074<span class="_ _9"> </span>&lt;update_x&gt;:</div><div class="t m0 x13 h8 yd5 ff5 fs4 fc0 sc0 ls0 ws0">10074:<span class="_ _9"> </span>00001317<span class="_ _87"> </span>auipc<span class="_ _9"> </span>t1,0x1</div><div class="t m0 x13 h8 yfd ff5 fs4 fc0 sc0 ls0 ws0">10078:<span class="_ _9"> </span>01c30313<span class="_ _87"> </span>addi<span class="_ _9"> </span>t1,t1,28<span class="_ _31"> </span>#<span class="_ _31"> </span>11090<span class="_ _31"> </span>&lt;__DATA_BEGIN__&gt;</div><div class="t m0 x13 h8 y28a ff5 fs4 fc0 sc0 ls0 ws0">1007c:<span class="_ _9"> </span>00a32023<span class="_ _87"> </span>sw<span class="_ _9"> </span>a0,0(t1)</div><div class="t m0 x13 h8 y48a ff5 fs4 fc0 sc0 ls0 ws0">10080:<span class="_ _9"> </span>00008067<span class="_ _87"> </span>ret</div><div class="t m0 x17 h8 y23 ff5 fs4 fc0 sc0 ls0 ws0">00010084<span class="_ _9"> </span>&lt;update_y&gt;:</div><div class="t m0 x13 h8 y938 ff5 fs4 fc0 sc0 ls0 ws0">10084:<span class="_ _9"> </span>80418313<span class="_ _87"> </span>addi<span class="_ _9"> </span>t1,gp,-2044<span class="_ _31"> </span>#<span class="_ _31"> </span>11094<span class="_ _31"> </span>&lt;y&gt;</div><div class="t m0 x13 h8 y939 ff5 fs4 fc0 sc0 ls0 ws0">10088:<span class="_ _9"> </span>00a32023<span class="_ _87"> </span>sw<span class="_ _9"> </span>a0,0(t1)</div><div class="t m0 x13 h8 y93a ff5 fs4 fc0 sc0 ls0 ws0">1008c:<span class="_ _9"> </span>00008067<span class="_ _87"> </span>ret</div><div class="t m0 x17 h8 y93b ff5 fs4 fc0 sc0 ls0 ws0">Disassembly<span class="_ _9"> </span>of<span class="_ _31"> </span>section<span class="_ _31"> </span>.data:</div><div class="t m0 x17 h8 y105 ff5 fs4 fc0 sc0 ls0 ws0">00011090<span class="_ _9"> </span>&lt;__DATA_BEGIN__&gt;:</div><div class="t m0 x13 h8 y106 ff5 fs4 fc0 sc0 ls0 ws0">11090:<span class="_ _9"> </span>000a<span class="_ _8f"> </span>c.slli<span class="_ _9"> </span>zero,0x2</div><div class="t m0 x17 h8 y93c ff5 fs4 fc0 sc0 ls0 ws0">...</div><div class="t m0 x17 h8 y117 ff5 fs4 fc0 sc0 ls0 ws0">00011094<span class="_ _9"> </span>&lt;y&gt;:</div><div class="t m0 x13 h8 y93d ff5 fs4 fc0 sc0 ls0 ws0">11094:<span class="_ _9"> </span>000c<span class="_ _8f"> </span>0xc</div><div class="t m0 x17 h8 y93e ff5 fs4 fc0 sc0 ls0 ws0">...</div><div class="t m0 x13 h7 y119 ff3 fs4 fc0 sc0 ls0 ws0">Notice<span class="_ _b"> </span>that<span class="_ _b"> </span>the<span class="_ _b"> </span>linker<span class="_ _b"> </span>assigned<span class="_ _b"> </span>addresses<span class="_ _b"> </span><span class="ff5">10074<span class="_ _3"> </span></span>to<span class="_ _b"> </span><span class="ff5">1008f<span class="_ _b"> </span></span>to<span class="_ _b"> </span>the<span class="_ _3"> </span>con<span class="_ _8"></span>tents<span class="_ _b"> </span>of<span class="_ _b"> </span>the</div><div class="t m0 x17 h7 y11a ff5 fs4 fc0 sc0 ls0 ws0">.text<span class="_ _2"> </span><span class="ff3">section<span class="_ _2"> </span>and<span class="_ _2"> </span>addresses<span class="_ _2"> </span></span>10090<span class="_ _2"> </span><span class="ff3">to<span class="_ _2"> </span></span>10097<span class="_ _2"> </span><span class="ff3">to<span class="_ _2"> </span>the<span class="_ _2"> </span>con<span class="_ _1"></span>ten<span class="_ _1"></span>ts<span class="_ _2"> </span>of<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">.data<span class="_ _2"> </span></span>section.</span></div><div class="t m0 x13 h7 y93f ff6 fs4 fc0 sc0 ls0 ws0">NOTE:<span class="_ _11"> </span><span class="ff3">Some op<span class="_ _4"></span>erating<span class="_ _5"> </span>systems<span class="_ _5"> </span>conﬁgure<span class="_ _2"> </span>the<span class="_ _5"> </span>hardware to<span class="_ _2"> </span>prev<span class="_ _8"></span>ent<span class="_ _5"> </span>instruc-</span></div><div class="t m0 x13 h7 y940 ff3 fs4 fc0 sc0 ls0 ws0">tions<span class="_ _b"> </span>from<span class="_ _b"> </span>writing<span class="_ _b"> </span>to<span class="_ _3"> </span>memory<span class="_ _b"> </span>addresses<span class="_ _b"> </span>assigned<span class="_ _b"> </span>to<span class="_ _b"> </span>the<span class="_ _3"> </span><span class="ff5">.text<span class="_ _b"> </span></span>and<span class="_ _b"> </span><span class="ff5">.rodata</span></div><div class="t m0 x13 h7 y941 ff3 fs4 fc0 sc0 ls0 ws0">sections.<span class="_ _a"> </span>Hence,<span class="_ _b"> </span>v<span class="_ _7"></span>ariables<span class="_ _2"> </span>should<span class="_ _b"> </span>not<span class="_ _5"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>placed<span class="_ _2"> </span>on<span class="_ _2"> </span>these<span class="_ _b"> </span>sections.<span class="_ _a"> </span>Also,<span class="_ _2"> </span>some</div><div class="t m0 x13 h7 y942 ff3 fs4 fc0 sc0 ls0 ws0">op<span class="_ _4"></span>erating systems<span class="_ _5"> </span>conﬁgure<span class="_ _2"> </span>the<span class="_ _5"> </span>hardware to<span class="_ _5"> </span>preven<span class="_ _8"></span>t<span class="_ _2"> </span>the<span class="_ _5"> </span>CPU<span class="_ _5"> </span>from<span class="_ _2"> </span>executing</div><div class="t m0 x13 h7 y943 ff3 fs4 fc0 sc0 ls0 ws0">instructions<span class="_ _b"> </span>from<span class="_ _b"> </span>memory<span class="_ _3"> </span>addresses<span class="_ _b"> </span>that<span class="_ _b"> </span>are<span class="_ _3"> </span>not<span class="_ _b"> </span>assigned<span class="_ _b"> </span>to<span class="_ _3"> </span>the<span class="_ _b"> </span><span class="ff5">.text<span class="_ _b"> </span></span>sec-</div><div class="t m0 x13 h7 y944 ff3 fs4 fc0 sc0 ls0 ws0">tion.<span class="_ _3"> </span>Therefore, it<span class="_ _5"> </span>is imp<span class="_ _4"></span>ortan<span class="_ _8"></span>t to<span class="_ _5"> </span>keep the program instructions on the <span class="ff5">.text</span></div><div class="t m0 x13 h7 y945 ff3 fs4 fc0 sc0 ls0 ws0">section.</div><div class="t m0 x17 hd y946 ff7 fs3 fc0 sc0 ls0 ws0">3.4<span class="_ _32"> </span>Executable<span class="_ _31"> </span>vs<span class="_ _31"> </span>ob<span class="_ _67"></span>ject<span class="_ _9"> </span>ﬁles</div><div class="t m0 x17 h7 y947 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _b"> </span>Executable<span class="_ _b"> </span>and<span class="_ _3"> </span>Linking<span class="_ _b"> </span>F<span class="_ _7"></span>ormat,<span class="_ _3"> </span>or<span class="_ _b"> </span>ELF,<span class="_ _b"> </span>is<span class="_ _3"> </span>used<span class="_ _b"> </span>by<span class="_ _b"> </span>sev<span class="_ _8"></span>eral<span class="_ _3"> </span>Lin<span class="_ _8"></span>ux-based<span class="_ _3"> </span>oper-</div><div class="t m0 x17 h7 y948 ff3 fs4 fc0 sc0 ls0 ws0">ating<span class="_ _b"> </span>systems<span class="_ _3"> </span>to<span class="_ _3"> </span>encode<span class="_ _3"> </span>b<span class="_ _4"></span>oth<span class="_ _b"> </span>ob<span class="_ _4"></span>ject<span class="_ _3"> </span>and<span class="_ _b"> </span>executable<span class="_ _3"> </span>ﬁles.<span class="_ _26"> </span>Even<span class="_ _b"> </span>though<span class="_ _3"> </span>ob<span class="_ _4"></span>ject<span class="_ _b"> </span>and</div><div class="t m0 x17 h7 y949 ff3 fs4 fc0 sc0 ls0 ws0">executable<span class="_ _2"> </span>ﬁles<span class="_ _2"> </span>contain<span class="_ _2"> </span>mac<span class="_ _1"></span>hine<span class="_ _2"> </span>co<span class="_ _4"></span>de<span class="_ _2"> </span>and<span class="_ _2"> </span>b<span class="_ _4"></span>oth<span class="_ _2"> </span>can<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>enco<span class="_ _4"></span>ded<span class="_ _5"> </span>using<span class="_ _b"> </span>the<span class="_ _5"> </span>ELF,<span class="_ _b"> </span>they</div><div class="t m0 x17 h7 y94a ff3 fs4 fc0 sc0 ls0 ws0">diﬀer<span class="_ _2"> </span>in<span class="_ _2"> </span>the<span class="_ _2"> </span>follo<span class="_ _1"></span>wing<span class="_ _2"> </span>asp<span class="_ _4"></span>ects:</div><div class="t m0 x13 h7 y94b ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff3">Address on ob<span class="_ _4"></span>ject ﬁles are not ﬁnal and elements from diﬀeren<span class="_ _1"></span>t sections may be</span></div><div class="t m0 x14 h7 y94c ff3 fs4 fc0 sc0 ls0 ws0">assigned<span class="_ _5"> </span>the<span class="_ _5"> </span>same<span class="_ _5"> </span>addresses,<span class="_ _2"> </span>as<span class="_ _5"> </span>discussed<span class="_ _5"> </span>in<span class="_ _2"> </span>Section<span class="_ _5"> </span>3.3.<span class="_ _3"> </span>As<span class="_ _2"> </span>a<span class="_ _5"> </span>consequence,<span class="_ _5"> </span>the</div><div class="t m0 x14 h7 y94d ff3 fs4 fc0 sc0 ls0 ws0">elemen<span class="_ _1"></span>ts<span class="_ _b"> </span>of<span class="_ _2"> </span>diﬀerent<span class="_ _2"> </span>sections<span class="_ _b"> </span>may<span class="_ _2"> </span>not<span class="_ _b"> </span>reside<span class="_ _2"> </span>in<span class="_ _b"> </span>the<span class="_ _b"> </span>main<span class="_ _2"> </span>memory<span class="_ _b"> </span>at<span class="_ _b"> </span>the<span class="_ _2"> </span>same</div><div class="t m0 x14 h7 y94e ff3 fs4 fc0 sc0 ls0 ws0">time;</div><div class="t m0 x13 h7 y94f ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff3">Ob<span class="_ _4"></span>ject<span class="_ _b"> </span>ﬁles<span class="_ _2"> </span>usually<span class="_ _b"> </span>con<span class="_ _8"></span>tain<span class="_ _b"> </span>sev<span class="_ _8"></span>eral<span class="_ _b"> </span>references<span class="_ _b"> </span>to<span class="_ _2"> </span>undeﬁned<span class="_ _b"> </span>sym<span class="_ _8"></span>b<span class="_ _4"></span>ols,<span class="_ _2"> </span>which<span class="_ _2"> </span>are</span></div><div class="t m0 x14 h7 y950 ff3 fs4 fc0 sc0 ls0 ws0">exp<span class="_ _4"></span>ected<span class="_ _5"> </span>to<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>resolved<span class="_ _5"> </span>by<span class="_ _5"> </span>the<span class="_ _2"> </span>linker;</div><div class="t m0 x13 h7 y951 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff3">Ob<span class="_ _4"></span>ject<span class="_ _b"> </span>ﬁles<span class="_ _b"> </span>con<span class="_ _8"></span>tain<span class="_ _b"> </span>a<span class="_ _b"> </span>relo<span class="_ _4"></span>cation<span class="_ _b"> </span>table<span class="_ _2"> </span>so<span class="_ _b"> </span>that<span class="_ _b"> </span>instructions<span class="_ _b"> </span>and<span class="_ _b"> </span>data<span class="_ _b"> </span>on<span class="_ _b"> </span>ob<span class="_ _4"></span>ject</span></div><div class="t m0 x14 h7 y952 ff3 fs4 fc0 sc0 ls0 ws0">ﬁles<span class="_ _5"> </span>can<span class="_ _5"> </span>b<span class="_ _4"></span>e relo<span class="_ _4"></span>cated on<span class="_ _5"> </span>linking.<span class="_ _a"> </span>Addresses<span class="_ _5"> </span>on<span class="_ _5"> </span>executable<span class="_ _5"> </span>ﬁles<span class="_ _5"> </span>are<span class="_ _5"> </span>usually<span class="_ _5"> </span>ﬁnal;</div><div class="t m0 x13 h7 y953 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff3">Ob<span class="_ _4"></span>ject<span class="_ _2"> </span>ﬁles<span class="_ _2"> </span>do<span class="_ _2"> </span>not<span class="_ _2"> </span>hav<span class="_ _8"></span>e<span class="_ _2"> </span>an<span class="_ _2"> </span>entry<span class="_ _5"> </span>p<span class="_ _4"></span>oin<span class="_ _8"></span>t;</span></div><div class="t m0 x42 h7 yc ff5 fs4 fc0 sc0 ls0 ws0">http://riscv-<span class="_ _4"></span>programming.org<span class="_ _2"> </span><span class="ff3">(V<span class="_ _7"></span>ersion:<span class="_ _3"> </span>March<span class="_ _2"> </span>29,<span class="_ _2"> </span>2021)<span class="_ _85"> </span>36</span></div><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,552.703,null]'><div class="d m1" style="border-style:none;position:absolute;left:398.858000px;bottom:428.461000px;width:23.440000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf2e" data-dest-detail='[46,"XYZ",90.709,354.18,null]'><div class="d m1" style="border-style:none;position:absolute;left:388.489000px;bottom:255.180000px;width:14.723000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",90.709,465.032,null]'><div class="d m1" style="border-style:none;position:absolute;left:387.892000px;bottom:243.225000px;width:62.398000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:187.121000px;bottom:36.395000px;width:148.940000px;height:13.948000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

<div id="pf2f" class="pf w0 h0" data-page-no="2f"><div class="pc pc2f w0 h0"><img class="bi x18 y8bf w2 h6d" alt="" src="bg2f.png"/><div class="t m0 x18 h7 y15a ff3 fs4 fc0 sc0 ls0 ws0">3.3.<span class="_ _22"> </span>PROGRAM<span class="_ _5"> </span>SECTIONS</div><div class="t m0 xd h8 y38 ff5 fs4 fc0 sc0 ls0 ws0">10060:<span class="_ _11"> </span>00a00513<span class="_ _89"> </span>li<span class="_ _11"> </span>a0,10</div><div class="t m0 xd h8 yed ff5 fs4 fc0 sc0 ls0 ws0">10064:<span class="_ _11"> </span>01400593<span class="_ _89"> </span>li<span class="_ _11"> </span>a1,20</div><div class="t m0 xd h8 yee ff5 fs4 fc0 sc0 ls0 ws0">10068:<span class="_ _11"> </span>fedff0ef<span class="_ _89"> </span>jal<span class="_ _11"> </span>ra,10054<span class="_ _e"> </span>&lt;exit&gt;</div><div class="t m0 xd h8 y116 ff5 fs4 fc0 sc0 ls0 ws0">...</div><div class="t m0 xd h7 y8c0 ff3 fs4 fc0 sc0 ls0 ws0">Ev<span class="_ _1"></span>en though<span class="_ _13"> </span>the link<span class="_ _8"></span>er placed the<span class="_ _12"> </span><span class="ff5">exit<span class="_ _38"> </span></span>function ﬁrst, the code associated with the</div><div class="t m0 x18 h7 y8c1 ff5 fs4 fc0 sc0 ls0 ws0">start<span class="_ _d"> </span><span class="ff3">lab<span class="_ _4"></span>el<span class="_ _2"> </span>will<span class="_ _a"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>executed<span class="_ _d"> </span>ﬁrst<span class="_ _a"> </span>b<span class="_ _4"></span>ecause<span class="_ _2"> </span>the<span class="_ _a"> </span>en<span class="_ _1"></span>try<span class="_ _d"> </span>p<span class="_ _4"></span>oin<span class="_ _8"></span>t<span class="_ _d"> </span>ﬁeld<span class="_ _a"> </span>con<span class="_ _1"></span>tains<span class="_ _d"> </span>the<span class="_ _d"> </span>address</span></div><div class="t m0 x18 h7 y8c2 ff3 fs4 fc0 sc0 ls0 ws0">asso<span class="_ _4"></span>ciated<span class="_ _5"> </span>with<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">start<span class="_ _2"> </span></span>lab<span class="_ _4"></span>el.</div><div class="t m0 xd h7 y8c3 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _2"> </span>GNU<span class="_ _2"> </span><span class="ff5">readelf<span class="_ _2"> </span></span>to<span class="_ _4"></span>ol<span class="_ _5"> </span>can<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>used<span class="_ _2"> </span>to<span class="_ _2"> </span>display<span class="_ _5"> </span>information<span class="_ _2"> </span>ab<span class="_ _4"></span>out<span class="_ _2"> </span>ELF<span class="_ _2"> </span>ﬁles.<span class="_ _3"> </span>The</div><div class="t m0 x18 h7 y8c4 ff3 fs4 fc0 sc0 ls0 ws0">follo<span class="_ _1"></span>wing<span class="_ _5"> </span>command<span class="_ _2"> </span>sho<span class="_ _8"></span>ws<span class="_ _2"> </span>how the<span class="_ _2"> </span><span class="ff5">riscv64-unknown-elf-readelf<span class="_ _5"> </span></span>to<span class="_ _4"></span>ol<span class="_ _5"> </span>can<span class="_ _5"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>used</div><div class="t m0 x18 h7 y8c5 ff3 fs4 fc0 sc0 ls0 ws0">to<span class="_ _f"> </span>insp<span class="_ _4"></span>ect<span class="_ _c"> </span>the<span class="_ _f"> </span>header<span class="_ _f"> </span>of<span class="_ _11"> </span>the<span class="_ _f"> </span><span class="ff5">main.x<span class="_ _f"> </span></span>executable<span class="_ _f"> </span>ﬁle.<span class="_ _31"> </span>Notice<span class="_ _f"> </span>that<span class="_ _f"> </span>the<span class="_ _f"> </span>entry<span class="_ _c"> </span>p<span class="_ _4"></span>oin<span class="_ _1"></span>t</div><div class="t m0 x18 h7 y8c6 ff3 fs4 fc0 sc0 ls0 ws0">address<span class="_ _2"> </span>ﬁeld<span class="_ _2"> </span>w<span class="_ _1"></span>as<span class="_ _2"> </span>set<span class="_ _2"> </span>to<span class="_ _2"> </span><span class="ff5">0x10060</span>,<span class="_ _2"> </span><span class="ff8">i.e.</span>,<span class="_ _2"> </span>the<span class="_ _2"> </span>address<span class="_ _2"> </span>of<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">start<span class="_ _2"> </span></span>lab<span class="_ _4"></span>el.</div><div class="t m0 x18 h8 y8c7 ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _11"> </span>riscv64-unknown-elf-readelf<span class="_ _e"> </span>-h<span class="_ _e"> </span>main.x</div><div class="t m0 x18 h8 y8c8 ff5 fs4 fc0 sc0 ls0 ws0">ELF<span class="_ _11"> </span>Header:</div><div class="t m0 x3e h8 y8c9 ff5 fs4 fc0 sc0 ls0 ws0">Magic:<span class="_ _3f"> </span>7f<span class="_ _11"> </span>45<span class="_ _e"> </span>4c<span class="_ _e"> </span>46<span class="_ _e"> </span>01<span class="_ _11"> </span>01<span class="_ _e"> </span>01<span class="_ _e"> </span>00<span class="_ _e"> </span>00<span class="_ _11"> </span>00<span class="_ _e"> </span>00<span class="_ _e"> </span>00<span class="_ _e"> </span>00<span class="_ _11"> </span>00<span class="_ _e"> </span>00<span class="_ _e"> </span>00</div><div class="t m0 x3e h8 y8ca ff5 fs4 fc0 sc0 ls0 ws0">Class:<span class="_ _8a"> </span>ELF32</div><div class="t m0 x3e h8 y8cb ff5 fs4 fc0 sc0 ls0 ws0">Data:<span class="_ _8b"> </span>2’s<span class="_ _11"> </span>complement,<span class="_ _e"> </span>little<span class="_ _e"> </span>endian</div><div class="t m0 x3e h8 y8cc ff5 fs4 fc0 sc0 ls0 ws0">Version:<span class="_ _8c"> </span>1<span class="_ _11"> </span>(current)</div><div class="t m0 x3e h8 y8cd ff5 fs4 fc0 sc0 ls0 ws0">OS/ABI:<span class="_ _8d"> </span>UNIX<span class="_ _11"> </span>-<span class="_ _e"> </span>System<span class="_ _e"> </span>V</div><div class="t m0 x3e h8 y8ce ff5 fs4 fc0 sc0 ls0 ws0">ABI<span class="_ _11"> </span>Version:<span class="_ _8e"> </span>0</div><div class="t m0 x3e h8 y8cf ff5 fs4 fc0 sc0 ls0 ws0">Type:<span class="_ _8b"> </span>EXEC<span class="_ _11"> </span>(Executable<span class="_ _e"> </span>file)</div><div class="t m0 x3e h8 y8d0 ff5 fs4 fc0 sc0 ls0 ws0">Machine:<span class="_ _8c"> </span>RISC-V</div><div class="t m0 x3e h8 y8d1 ff5 fs4 fc0 sc0 ls0 ws0">Version:<span class="_ _8c"> </span>0x1</div><div class="t m0 x3e h8 y8d2 ff5 fs4 fc0 sc0 ls0 ws0">Entry<span class="_ _11"> </span>point<span class="_ _e"> </span>address:<span class="_ _8f"> </span>0x10060</div><div class="t m0 x3e h8 y8d3 ff5 fs4 fc0 sc0 ls0 ws0">Start<span class="_ _11"> </span>of<span class="_ _e"> </span>program<span class="_ _e"> </span>headers:<span class="_ _90"> </span>52<span class="_ _11"> </span>(bytes<span class="_ _e"> </span>into<span class="_ _e"> </span>file)</div><div class="t m0 x3e h8 y8d4 ff5 fs4 fc0 sc0 ls0 ws0">Start<span class="_ _11"> </span>of<span class="_ _e"> </span>section<span class="_ _e"> </span>headers:<span class="_ _90"> </span>476<span class="_ _11"> </span>(bytes<span class="_ _e"> </span>into<span class="_ _e"> </span>file)</div><div class="t m0 x3e h8 y8d5 ff5 fs4 fc0 sc0 ls0 ws0">Flags:<span class="_ _8a"> </span>0x0</div><div class="t m0 x3e h8 y8d6 ff5 fs4 fc0 sc0 ls0 ws0">Size<span class="_ _11"> </span>of<span class="_ _e"> </span>this<span class="_ _e"> </span>header:<span class="_ _8f"> </span>52<span class="_ _11"> </span>(bytes)</div><div class="t m0 x3e h8 y8d7 ff5 fs4 fc0 sc0 ls0 ws0">Size<span class="_ _11"> </span>of<span class="_ _e"> </span>program<span class="_ _e"> </span>headers:<span class="_ _89"> </span>32<span class="_ _11"> </span>(bytes)</div><div class="t m0 x3e h8 y8d8 ff5 fs4 fc0 sc0 ls0 ws0">Number<span class="_ _11"> </span>of<span class="_ _e"> </span>program<span class="_ _e"> </span>headers:<span class="_ _91"> </span>1</div><div class="t m0 x3e h8 y8d9 ff5 fs4 fc0 sc0 ls0 ws0">Size<span class="_ _11"> </span>of<span class="_ _e"> </span>section<span class="_ _e"> </span>headers:<span class="_ _89"> </span>40<span class="_ _11"> </span>(bytes)</div><div class="t m0 x3e h8 y8da ff5 fs4 fc0 sc0 ls0 ws0">Number<span class="_ _11"> </span>of<span class="_ _e"> </span>section<span class="_ _e"> </span>headers:<span class="_ _91"> </span>6</div><div class="t m0 x3e h8 y8db ff5 fs4 fc0 sc0 ls0 ws0">Section<span class="_ _11"> </span>header<span class="_ _e"> </span>string<span class="_ _e"> </span>table<span class="_ _e"> </span>index:<span class="_ _11"> </span>5</div><div class="t m0 x18 hd y8dc ff6 fs3 fc0 sc0 ls0 ws0">3.3<span class="_ _36"> </span>Program<span class="_ _e"> </span>sections</div><div class="t m0 x18 h7 y8dd ff3 fs4 fc0 sc0 ls0 ws0">Executable and<span class="_ _5"> </span>ob<span class="_ _4"></span>ject<span class="_ _5"> </span>ﬁles, and<span class="_ _5"> </span>assembly programs are<span class="_ _5"> </span>usually organized<span class="_ _5"> </span>in<span class="_ _5"> </span>sections.</div><div class="t m0 x18 h7 y8de ff3 fs4 fc0 sc0 ls0 ws0">A<span class="_ _f"> </span>section<span class="_ _f"> </span>may<span class="_ _c"> </span>contain<span class="_ _c"> </span>data<span class="_ _f"> </span>or<span class="_ _f"> </span>instructions,<span class="_ _e"> </span>and<span class="_ _f"> </span>the<span class="_ _f"> </span>conten<span class="_ _8"></span>ts<span class="_ _f"> </span>of<span class="_ _11"> </span>eac<span class="_ _8"></span>h<span class="_ _11"> </span>section<span class="_ _f"> </span>are</div><div class="t m0 x18 h7 y8df ff3 fs4 fc0 sc0 ls0 ws0">mapp<span class="_ _4"></span>ed<span class="_ _2"> </span>to<span class="_ _a"> </span>a<span class="_ _a"> </span>set<span class="_ _d"> </span>of<span class="_ _a"> </span>consecutive<span class="_ _d"> </span>main<span class="_ _d"> </span>memory<span class="_ _a"> </span>addresses.<span class="_ _1f"> </span>The<span class="_ _a"> </span>following<span class="_ _d"> </span>sections<span class="_ _d"> </span>are</div><div class="t m0 x18 h7 y8e0 ff3 fs4 fc0 sc0 ls0 ws0">often<span class="_ _2"> </span>presen<span class="_ _1"></span>t<span class="_ _2"> </span>on<span class="_ _2"> </span>executable<span class="_ _2"> </span>ﬁles<span class="_ _2"> </span>generated<span class="_ _2"> </span>for<span class="_ _2"> </span>Lin<span class="_ _1"></span>ux-based<span class="_ _2"> </span>systems:</div><div class="t m0 xd h7 y8e1 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff5">.text<span class="ff3">:<span class="_ _c"> </span>a<span class="_ _2"> </span>section<span class="_ _2"> </span>dedicated<span class="_ _2"> </span>to<span class="_ _2"> </span>store<span class="_ _2"> </span>the<span class="_ _2"> </span>program<span class="_ _2"> </span>instructions;</span></span></div><div class="t m0 xd h7 y8e2 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff5">.data<span class="ff3">:<span class="_ _3"> </span>a section dedicated<span class="_ _12"> </span>to store initialized global<span class="_ _12"> </span>v<span class="_ _8"></span>ariables, <span class="ff8">i.e.</span>, the v<span class="_ _8"></span>ariables</span></span></div><div class="t m0 x16 h7 y8e3 ff3 fs4 fc0 sc0 ls0 ws0">that<span class="_ _2"> </span>need<span class="_ _2"> </span>their<span class="_ _2"> </span>v<span class="_ _8"></span>alue<span class="_ _2"> </span>to<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>initialized<span class="_ _2"> </span>b<span class="_ _4"></span>efore<span class="_ _5"> </span>the<span class="_ _2"> </span>program<span class="_ _2"> </span>starts<span class="_ _2"> </span>executing;</div><div class="t m0 xd h7 y8e4 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff5">.bss<span class="ff3">:<span class="_ _c"> </span>a<span class="_ _2"> </span>section<span class="_ _2"> </span>dedicated<span class="_ _2"> </span>to<span class="_ _2"> </span>store<span class="_ _2"> </span>uninitialized<span class="_ _2"> </span>global<span class="_ _2"> </span>v<span class="_ _8"></span>ariables;</span></span></div><div class="t m0 xd h7 y8e5 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _f"> </span><span class="ff5">.rodata<span class="ff3">:<span class="_ _1b"> </span>a<span class="_ _a"> </span>section<span class="_ _3"> </span>dedicated<span class="_ _a"> </span>to<span class="_ _a"> </span>store<span class="_ _3"> </span>constants,<span class="_ _a"> </span><span class="ff8">i.e.</span>,<span class="_ _3"> </span>v<span class="_ _8"></span>alues<span class="_ _3"> </span>that<span class="_ _a"> </span>are<span class="_ _a"> </span>read<span class="_ _3"> </span>by</span></span></div><div class="t m0 x16 h7 y8e6 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _2"> </span>program<span class="_ _2"> </span>but<span class="_ _2"> </span>not<span class="_ _2"> </span>mo<span class="_ _4"></span>diﬁed<span class="_ _5"> </span>during<span class="_ _2"> </span>execution.</div><div class="t m0 xd h7 y680 ff3 fs4 fc0 sc0 ls0 ws0">When<span class="_ _3"> </span>linking<span class="_ _c"> </span>multiple<span class="_ _3"> </span>ob<span class="_ _4"></span>ject<span class="_ _c"> </span>ﬁles,<span class="_ _f"> </span>the<span class="_ _c"> </span>link<span class="_ _8"></span>er<span class="_ _c"> </span>groups<span class="_ _c"> </span>information<span class="_ _c"> </span>from<span class="_ _3"> </span>sections</div><div class="t m0 x18 h7 y681 ff3 fs4 fc0 sc0 ls0 ws0">with<span class="_ _5"> </span>the<span class="_ _5"> </span>same<span class="_ _2"> </span>name<span class="_ _5"> </span>and<span class="_ _2"> </span>places<span class="_ _5"> </span>them<span class="_ _5"> </span>together<span class="_ _2"> </span>in<span class="_ _1"></span>to<span class="_ _5"> </span>a<span class="_ _2"> </span>single<span class="_ _5"> </span>section<span class="_ _5"> </span>on<span class="_ _2"> </span>the<span class="_ _5"> </span>executable</div><div class="t m0 x18 h7 y682 ff3 fs4 fc0 sc0 ls0 ws0">ﬁle.<span class="_ _a"> </span>F<span class="_ _7"></span>or example, when<span class="_ _12"> </span>linking<span class="_ _13"> </span>m<span class="_ _1"></span>ultiple<span class="_ _13"> </span>ob<span class="_ _4"></span>ject<span class="_ _13"> </span>ﬁles, the<span class="_ _12"> </span>conten<span class="_ _8"></span>ts of<span class="_ _12"> </span>the<span class="_ _13"> </span><span class="ff5">.text<span class="_ _12"> </span></span>sections</div><div class="t m0 x18 h7 y683 ff3 fs4 fc0 sc0 ls0 ws0">from<span class="_ _d"> </span>all<span class="_ _d"> </span>ob<span class="_ _35"></span>ject<span class="_ _d"> </span>ﬁles<span class="_ _d"> </span>are<span class="_ _a"> </span>group<span class="_ _4"></span>ed<span class="_ _2"> </span>together<span class="_ _a"> </span>and<span class="_ _d"> </span>placed<span class="_ _a"> </span>sequentially<span class="_ _2"> </span>on<span class="_ _a"> </span>the<span class="_ _d"> </span>executable</div><div class="t m0 x18 h7 y115 ff3 fs4 fc0 sc0 ls0 ws0">ﬁle<span class="_ _a"> </span>on<span class="_ _a"> </span>a<span class="_ _a"> </span>single<span class="_ _a"> </span>section<span class="_ _a"> </span>that<span class="_ _a"> </span>is<span class="_ _3"> </span>also<span class="_ _a"> </span>called<span class="_ _a"> </span><span class="ff5">.text</span>.<span class="_ _1b"> </span>Figure<span class="_ _3"> </span>3.2<span class="_ _a"> </span>sho<span class="_ _1"></span>ws<span class="_ _a"> </span>the<span class="_ _a"> </span>lay<span class="_ _8"></span>out<span class="_ _a"> </span>of<span class="_ _a"> </span>an</div><div class="t m0 x18 h7 yeb ff3 fs4 fc0 sc0 ls0 ws0">R<span class="_ _2c"></span>V32I<span class="_ _5"> </span>executable<span class="_ _2"> </span>ﬁle<span class="_ _5"> </span>that<span class="_ _5"> </span>was<span class="_ _5"> </span>generated<span class="_ _5"> </span>by<span class="_ _5"> </span>the<span class="_ _5"> </span><span class="ff5">riscv64-unknown-elf-ld<span class="_ _2"> </span></span>to<span class="_ _4"></span>ol, and</div><div class="t m0 x18 h7 yec ff3 fs4 fc0 sc0 ls0 ws0">is<span class="_ _13"> </span>enco<span class="_ _4"></span>ded<span class="_ _12"> </span>using the<span class="_ _12"> </span>Executable and<span class="_ _12"> </span>Linking F<span class="_ _2c"></span>ormat.<span class="_ _3"> </span>This ﬁle<span class="_ _12"> </span>contains<span class="_ _13"> </span>three<span class="_ _13"> </span>sections:</div><div class="t m0 x18 h7 y61 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _d"> </span><span class="ff5">.data</span>,<span class="_ _d"> </span>the<span class="_ _d"> </span><span class="ff5">.rodata</span>,<span class="_ _a"> </span>and<span class="_ _d"> </span>the<span class="_ _d"> </span><span class="ff5">.text<span class="_ _d"> </span></span>sections.<span class="_ _e"> </span>The<span class="_ _d"> </span>conten<span class="_ _8"></span>ts<span class="_ _a"> </span>of<span class="_ _d"> </span>section<span class="_ _d"> </span><span class="ff5">.text<span class="_ _d"> </span></span>are</div><div class="t m0 x32 h7 yc ff5 fs4 fc0 sc0 ls0 ws0">http://riscv-<span class="_ _4"></span>programming.org<span class="_ _2"> </span><span class="ff3">(V<span class="_ _7"></span>ersion:<span class="_ _3"> </span>August<span class="_ _2"> </span>26,<span class="_ _d"> </span>2021)<span class="_ _6f"> </span>33</span></div><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",136.063,465.032,null]'><div class="d m1" style="border-style:none;position:absolute;left:230.354000px;bottom:289.797000px;width:62.526000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf30" data-dest-detail='[48,"XYZ",136.063,777.001,null]'><div class="d m1" style="border-style:none;position:absolute;left:341.345000px;bottom:103.798000px;width:14.723000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:139.954000px;bottom:36.395000px;width:148.940000px;height:13.948000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

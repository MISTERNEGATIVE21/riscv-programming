<div id="pf5f" class="pf w0 h0" data-page-no="5f"><div class="pc pc5f w0 h0"><img class="bi x17 y102d w2 h9a" alt="" src="bg5f.png"/><div class="t m0 x17 h7 y147 ff3 fs4 fc0 sc0 ls0 ws0">CHAPTER<span class="_ _2"> </span>7.<span class="_ _19"> </span>CONTROLLING<span class="_ _5"> </span>THE<span class="_ _2"> </span>EXECUTION<span class="_ _2"> </span>FLOW</div><div class="t m0 x17 h7 y1e ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _b"> </span><span class="ff6">“lo<span class="_ _4"></span>op<span class="_ _a"> </span>b<span class="_ _4"></span>o<span class="_ _4"></span>dy”<span class="_ _b"> </span></span>(lines<span class="_ _b"> </span>3-5).<span class="_ _26"> </span>The<span class="_ _3"> </span>condition<span class="_ _b"> </span>also<span class="_ _3"> </span>consists<span class="_ _b"> </span>of<span class="_ _3"> </span>a<span class="_ _b"> </span>b<span class="_ _4"></span>oolean<span class="_ _3"> </span>expression,</div><div class="t m0 x17 h7 yd4 ff3 fs4 fc0 sc0 ls0 ws0">ho<span class="_ _1"></span>w<span class="_ _1"></span>ev<span class="_ _1"></span>er,<span class="_ _25"> </span>int<span class="_ _a"> </span>the<span class="_ _a"> </span><span class="ff5">do-while<span class="_ _25"> </span></span>statemen<span class="_ _1"></span>t,<span class="_ _25"> </span>the<span class="_ _25"> </span>condition<span class="_ _a"> </span>must<span class="_ _a"> </span>b<span class="_ _4"></span>e<span class="_ _3"> </span>ev<span class="_ _8"></span>aluated<span class="_ _25"> </span>after<span class="_ _a"> </span>each</div><div class="t m0 x17 h7 yd5 ff3 fs4 fc0 sc0 ls0 ws0">iteration<span class="_ _b"> </span>of<span class="_ _b"> </span>the<span class="_ _2"> </span><span class="ff5">do-while<span class="_ _b"> </span></span>lo<span class="_ _4"></span>op,<span class="_ _b"> </span><span class="ff8">i.e.</span>,<span class="_ _b"> </span>after<span class="_ _2"> </span>each<span class="_ _2"> </span>execution<span class="_ _b"> </span>of<span class="_ _b"> </span>the<span class="_ _b"> </span>“loop<span class="_ _b"> </span>b<span class="_ _4"></span>ody”.<span class="_ _16"> </span>If<span class="_ _b"> </span>the</div><div class="t m0 x17 h7 yfd ff3 fs4 fc0 sc0 ls0 ws0">“lo<span class="_ _4"></span>op condition”<span class="_ _2"> </span>ev<span class="_ _8"></span>aluates<span class="_ _5"> </span>to<span class="_ _2"> </span>true,<span class="_ _5"> </span>then<span class="_ _2"> </span>the<span class="_ _5"> </span>“lo<span class="_ _4"></span>op<span class="_ _5"> </span>b<span class="_ _4"></span>ody”<span class="_ _2"> </span>m<span class="_ _1"></span>ust<span class="_ _5"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>executed<span class="_ _2"> </span>again.<span class="_ _3"> </span>In</div><div class="t m0 x17 h7 y28a ff3 fs4 fc0 sc0 ls0 ws0">this<span class="_ _2"> </span>case,<span class="_ _2"> </span>after<span class="_ _b"> </span>completing<span class="_ _5"> </span>the<span class="_ _b"> </span>execution<span class="_ _5"> </span>of<span class="_ _b"> </span>the<span class="_ _5"> </span>“lo<span class="_ _4"></span>op<span class="_ _2"> </span>b<span class="_ _4"></span>ody”,<span class="_ _b"> </span>the<span class="_ _5"> </span>“lo<span class="_ _4"></span>op<span class="_ _2"> </span>condition”<span class="_ _2"> </span>is</div><div class="t m0 x17 h7 y48a ff3 fs4 fc0 sc0 ls0 ws0">ev<span class="_ _8"></span>aluated<span class="_ _5"> </span>again.<span class="_ _a"> </span>If<span class="_ _5"> </span>the<span class="_ _5"> </span>“lo<span class="_ _4"></span>op<span class="_ _5"> </span>condition”<span class="_ _5"> </span>ev<span class="_ _8"></span>aluates<span class="_ _5"> </span>as<span class="_ _2"> </span>false,<span class="_ _5"> </span>then<span class="_ _5"> </span>the<span class="_ _2"> </span>lo<span class="_ _4"></span>op execution<span class="_ _5"> </span>is</div><div class="t m0 x17 h7 y22 ff3 fs4 fc0 sc0 ls0 ws0">complete<span class="_ _2"> </span>and<span class="_ _2"> </span>the<span class="_ _2"> </span>execution<span class="_ _2"> </span>con<span class="_ _1"></span>tin<span class="_ _1"></span>ues<span class="_ _2"> </span>after<span class="_ _2"> </span>the<span class="_ _2"> </span>lo<span class="_ _4"></span>op.</div><div class="t m0 xd5 h8 y102e ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _16"> </span><span class="ff5 fs4">int<span class="_ _31"> </span>i=0;</span></div><div class="t m0 xd5 h8 y102f ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _16"> </span><span class="ff5 fs4">do</span></div><div class="t m0 xd5 h8 y1030 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _16"> </span><span class="ff5 fs4">{</span></div><div class="t m0 xd5 h8 y1031 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _32"> </span><span class="ff5 fs4">y<span class="_ _9"> </span>=<span class="_ _31"> </span>y+2;</span></div><div class="t m0 xd5 h8 y1032 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _32"> </span><span class="ff5 fs4">i<span class="_ _9"> </span>=<span class="_ _31"> </span>i+1;</span></div><div class="t m0 xd5 h8 y1033 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _16"> </span><span class="ff5 fs4">}<span class="_ _31"> </span>while<span class="_ _31"> </span>(i<span class="_ _9"> </span>&lt;<span class="_ _31"> </span>10);</span></div><div class="t m0 x13 h7 y1034 ff3 fs4 fc0 sc0 ls0 ws0">Assuming<span class="_ _2"> </span>that<span class="_ _5"> </span>v<span class="_ _8"></span>ariables<span class="_ _2"> </span><span class="ff5">i<span class="_ _2"> </span></span>and<span class="_ _2"> </span><span class="ff5">y<span class="_ _2"> </span></span>are<span class="_ _2"> </span>mapp<span class="_ _4"></span>ed<span class="_ _5"> </span>to<span class="_ _2"> </span>registers<span class="_ _2"> </span><span class="ff5">a1<span class="_ _2"> </span></span>and<span class="_ _2"> </span><span class="ff5">a2</span>,<span class="_ _2"> </span>resp<span class="_ _4"></span>ectiv<span class="_ _8"></span>ely<span class="_ _7"></span>,</div><div class="t m0 x17 h7 y1035 ff3 fs4 fc0 sc0 ls0 ws0">the following co<span class="_ _4"></span>de shows how the previous<span class="_ _5"> </span>“C”<span class="_ _5"> </span>co<span class="_ _4"></span>de can<span class="_ _5"> </span>b<span class="_ _4"></span>e implemen<span class="_ _1"></span>ted in<span class="_ _5"> </span>assembly</div><div class="t m0 x17 h7 y1036 ff3 fs4 fc0 sc0 ls0 ws0">language.<span class="_ _3"> </span>First, it contains the code that comes b<span class="_ _4"></span>efore the while lo<span class="_ _4"></span>op - in this case an</div><div class="t m0 x17 h7 y1037 ff3 fs4 fc0 sc0 ls0 ws0">instruction that loads<span class="_ _2f"> </span>the constan<span class="_ _8"></span>t zero in<span class="_ _1"></span>to register <span class="ff5">a1<span class="_ _2f"> </span></span>(line 1).<span class="_ _3"> </span>Then, there is a<span class="_ _2f"> </span>label</div><div class="t m0 x17 h7 y1038 ff3 fs4 fc0 sc0 ls0 ws0">that marks the b<span class="_ _4"></span>eginning of the loop (line 2) and the “lo<span class="_ _4"></span>op bo<span class="_ _4"></span>dy”, which is composed</div><div class="t m0 x17 h7 y1039 ff3 fs4 fc0 sc0 ls0 ws0">of<span class="_ _3"> </span>t<span class="_ _8"></span>wo<span class="_ _b"> </span>instructions<span class="_ _3"> </span>(lines<span class="_ _3"> </span>5<span class="_ _3"> </span>and<span class="_ _3"> </span>6).<span class="_ _26"> </span>The<span class="_ _3"> </span>ﬁrst<span class="_ _3"> </span>one<span class="_ _3"> </span>implemen<span class="_ _8"></span>ts<span class="_ _3"> </span>the<span class="_ _3"> </span>statemen<span class="_ _1"></span>t<span class="_ _3"> </span><span class="ff5">y=y+2</span></div><div class="t m0 x17 h7 y103a ff3 fs4 fc0 sc0 ls0 ws0">and<span class="_ _5"> </span>the<span class="_ _5"> </span>second<span class="_ _5"> </span>one<span class="_ _5"> </span>implements the<span class="_ _5"> </span>statement <span class="ff5">i=i+1</span>.<span class="_ _a"> </span>After<span class="_ _5"> </span>the<span class="_ _5"> </span>“lo<span class="_ _4"></span>op b<span class="_ _4"></span>ody”,<span class="_ _2"> </span>there<span class="_ _5"> </span>is</div><div class="t m0 x17 h7 y103b ff3 fs4 fc0 sc0 ls0 ws0">the co<span class="_ _4"></span>de that chec<span class="_ _8"></span>ks the<span class="_ _5"> </span>“lo<span class="_ _4"></span>op condition” (lines 5 and<span class="_ _5"> </span>6).<span class="_ _3"> </span>Notice<span class="_ _5"> </span>that instruction <span class="ff5">blt</span></div><div class="t m0 x17 h7 y103c ff3 fs4 fc0 sc0 ls0 ws0">c<span class="_ _1"></span>hec<span class="_ _1"></span>ks whether v<span class="_ _8"></span>ariable <span class="ff5">i<span class="_ _37"> </span></span>(conten<span class="_ _8"></span>ts<span class="_ _5"> </span>of register <span class="ff5">a1</span>) is<span class="_ _5"> </span>less than 10.<span class="_ _3"> </span>If<span class="_ _5"> </span>so, it jumps<span class="_ _5"> </span>back</div><div class="t m0 x17 h7 y103d ff3 fs4 fc0 sc0 ls0 ws0">to lab<span class="_ _4"></span>el <span class="ff5">dowhile<span class="_ _5"> </span></span>to<span class="_ _5"> </span>rep<span class="_ _4"></span>eat the<span class="_ _5"> </span>lo<span class="_ _4"></span>op execution.<span class="_ _3"> </span>Otherwise,<span class="_ _5"> </span>the<span class="_ _5"> </span>execution<span class="_ _5"> </span>contin<span class="_ _8"></span>ues on</div><div class="t m0 x17 h7 y103e ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _2"> </span>next<span class="_ _2"> </span>instruction,<span class="_ _2"> </span>lea<span class="_ _1"></span>ving<span class="_ _2"> </span>the<span class="_ _2"> </span>lo<span class="_ _4"></span>op.</div><div class="t m0 xd5 h8 y103f ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _32"> </span><span class="ff5 fs4">li<span class="_ _3b"> </span>a1,<span class="_ _31"> </span>0<span class="_ _c1"> </span>#<span class="_ _9"> </span>i=0</span></div><div class="t m0 xd5 h8 y1040 ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _16"> </span><span class="ff5 fs4">dowhile:</span></div><div class="t m0 xd5 h8 y1041 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _32"> </span><span class="ff5 fs4">addi<span class="_ _9"> </span>a2,<span class="_ _31"> </span>a2,<span class="_ _31"> </span>2<span class="_ _c4"> </span>#<span class="_ _31"> </span>y<span class="_ _31"> </span>=<span class="_ _31"> </span>y+2</span></div><div class="t m0 xd5 h8 y1042 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _32"> </span><span class="ff5 fs4">addi<span class="_ _9"> </span>a1,<span class="_ _31"> </span>a1,<span class="_ _31"> </span>1<span class="_ _c4"> </span>#<span class="_ _31"> </span>i<span class="_ _31"> </span>=<span class="_ _31"> </span>i+1</span></div><div class="t m0 xd5 h8 y1043 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _32"> </span><span class="ff5 fs4">li<span class="_ _3b"> </span>t1,<span class="_ _31"> </span>10</span></div><div class="t m0 xd5 h8 y1044 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _32"> </span><span class="ff5 fs4">blt<span class="_ _82"> </span>a1,<span class="_ _9"> </span>t1,<span class="_ _31"> </span>dowhile<span class="_ _31"> </span>#<span class="_ _31"> </span>jumps<span class="_ _31"> </span>back<span class="_ _9"> </span>to<span class="_ _31"> </span>dowhile<span class="_ _31"> </span>if<span class="_ _31"> </span>i<span class="_ _31"> </span>&lt;<span class="_ _9"> </span>10</span></div><div class="t m0 x17 ha y1045 ff7 fs6 fc0 sc0 ls0 ws0">7.2.3<span class="_ _e"> </span><span class="ff2">for<span class="_ _a"> </span></span>lo<span class="_ _4"></span>op</div><div class="t m0 x17 h7 y1046 ff3 fs4 fc0 sc0 ls0 ws0">The following code shows a <span class="ff5">for<span class="_ _37"> </span></span>lo<span class="_ _4"></span>op written in “C”. The <span class="ff5">for<span class="_ _5"> </span></span>lo<span class="_ _4"></span>op con<span class="_ _8"></span>tains four<span class="_ _5"> </span>main</div><div class="t m0 x17 h7 y1047 ff3 fs4 fc0 sc0 ls0 ws0">parts:<span class="_ _3"> </span>the<span class="_ _5"> </span><span class="ff6">“initialization<span class="_ _b"> </span>co<span class="_ _4"></span>de”</span>, the<span class="_ _2"> </span><span class="ff6">“lo<span class="_ _4"></span>op condition”</span>,<span class="_ _2"> </span>the<span class="_ _5"> </span><span class="ff6">“up<span class="_ _4"></span>date<span class="_ _2"> </span>co<span class="_ _4"></span>de” </span>and</div><div class="t m0 x17 h7 y1048 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _25"> </span><span class="ff6">“lo<span class="_ _4"></span>op<span class="_ _16"> </span>b<span class="_ _4"></span>ody”<span class="_ _9"> </span></span>(lines<span class="_ _25"> </span>2-4).<span class="_ _f"> </span>The<span class="_ _25"> </span>“initialization<span class="_ _9"> </span>co<span class="_ _4"></span>de”<span class="_ _a"> </span>(<span class="ff5">i=0</span>)<span class="_ _9"> </span>must<span class="_ _a"> </span>b<span class="_ _4"></span>e<span class="_ _25"> </span>executed</div><div class="t m0 x17 h7 y1049 ff3 fs4 fc0 sc0 ls0 ws0">exactly<span class="_ _3"> </span>once<span class="_ _a"> </span>b<span class="_ _4"></span>efore<span class="_ _3"> </span>the<span class="_ _a"> </span>execution<span class="_ _3"> </span>of<span class="_ _a"> </span>the<span class="_ _a"> </span>“lo<span class="_ _4"></span>op<span class="_ _3"> </span>b<span class="_ _4"></span>ody”.<span class="_ _19"> </span>Similar<span class="_ _a"> </span>to<span class="_ _3"> </span>the<span class="_ _a"> </span><span class="ff5">while<span class="_ _a"> </span></span>lo<span class="_ _4"></span>op,</div><div class="t m0 x17 h7 y104a ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _2"> </span>“lo<span class="_ _4"></span>op<span class="_ _2"> </span>condition”<span class="_ _2"> </span>(<span class="ff5">i&lt;10</span>)<span class="_ _2"> </span>consists<span class="_ _b"> </span>of<span class="_ _2"> </span>a<span class="_ _2"> </span>b<span class="_ _4"></span>oolean<span class="_ _2"> </span>expression<span class="_ _b"> </span>that<span class="_ _2"> </span>m<span class="_ _8"></span>ust<span class="_ _b"> </span>be<span class="_ _2"> </span>ev<span class="_ _8"></span>aluated</div><div class="t m0 x17 h7 y104b ff3 fs4 fc0 sc0 ls0 ws0">b<span class="_ _4"></span>efore<span class="_ _2"> </span>each<span class="_ _2"> </span>iteration<span class="_ _b"> </span>of<span class="_ _b"> </span>the<span class="_ _2"> </span><span class="ff5">for<span class="_ _b"> </span></span>loop,<span class="_ _b"> </span><span class="ff8">i.e.</span>,<span class="_ _b"> </span>b<span class="_ _4"></span>efore<span class="_ _2"> </span>each<span class="_ _2"> </span>execution<span class="_ _b"> </span>of<span class="_ _b"> </span>the<span class="_ _2"> </span>“lo<span class="_ _4"></span>op<span class="_ _b"> </span>bo<span class="_ _4"></span>dy”</div><div class="t m0 x17 h7 y104c ff3 fs4 fc0 sc0 ls0 ws0">(lines<span class="_ _b"> </span>2-4).<span class="_ _25"> </span>If<span class="_ _b"> </span>the<span class="_ _2"> </span>“lo<span class="_ _4"></span>op<span class="_ _b"> </span>condition”<span class="_ _2"> </span>ev<span class="_ _8"></span>aluates<span class="_ _b"> </span>to<span class="_ _2"> </span>true,<span class="_ _b"> </span>then<span class="_ _2"> </span>the<span class="_ _b"> </span>“loop<span class="_ _b"> </span>bo<span class="_ _4"></span>dy”<span class="_ _2"> </span>must<span class="_ _2"> </span>b<span class="_ _4"></span>e</div><div class="t m0 x17 h7 y104d ff3 fs4 fc0 sc0 ls0 ws0">executed.<span class="_ _3"> </span>In this<span class="_ _30"> </span>case, after completing<span class="_ _2f"> </span>the execution<span class="_ _30"> </span>of the<span class="_ _2f"> </span>“lo<span class="_ _4"></span>op<span class="_ _30"> </span>b<span class="_ _4"></span>o<span class="_ _4"></span>dy”,<span class="_ _2f"> </span>the “update</div><div class="t m0 x17 h7 y104e ff3 fs4 fc0 sc0 ls0 ws0">co<span class="_ _4"></span>de” (<span class="ff5">i=i+1</span>)<span class="_ _5"> </span>is<span class="_ _5"> </span>executed<span class="_ _5"> </span>and<span class="_ _5"> </span>the<span class="_ _5"> </span>execution<span class="_ _5"> </span>jumps<span class="_ _5"> </span>back to<span class="_ _5"> </span>the<span class="_ _5"> </span>b<span class="_ _4"></span>eginning<span class="_ _5"> </span>of<span class="_ _5"> </span>the<span class="_ _5"> </span>lo<span class="_ _4"></span>op</div><div class="t m0 x17 h7 y104f ff3 fs4 fc0 sc0 ls0 ws0">so that the “loop condition” can b<span class="_ _4"></span>e ev<span class="_ _7"></span>aluated again.<span class="_ _3"> </span>If the “lo<span class="_ _4"></span>op condition” ev<span class="_ _7"></span>aluates</div><div class="t m0 x17 h7 y1050 ff3 fs4 fc0 sc0 ls0 ws0">to<span class="_ _3"> </span>false,<span class="_ _3"> </span>then<span class="_ _3"> </span>the<span class="_ _3"> </span>loop<span class="_ _3"> </span>execution<span class="_ _3"> </span>is<span class="_ _3"> </span>complete<span class="_ _b"> </span>and<span class="_ _3"> </span>the<span class="_ _3"> </span>execution<span class="_ _3"> </span>con<span class="_ _1"></span>tin<span class="_ _1"></span>ues<span class="_ _3"> </span>after<span class="_ _b"> </span>the</div><div class="t m0 x17 h7 y1051 ff3 fs4 fc0 sc0 ls0 ws0">lo<span class="_ _4"></span>op<span class="_ _5"> </span>b<span class="_ _4"></span>ody<span class="_ _7"></span>.</div><div class="t m0 xd5 h8 y1052 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _16"> </span><span class="ff5 fs4">for<span class="_ _31"> </span>(i=0;<span class="_ _31"> </span>i&lt;10;<span class="_ _9"> </span>i=i+1)</span></div><div class="t m0 xd5 h8 y1053 ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _16"> </span><span class="ff5 fs4">{</span></div><div class="t m0 xd5 h8 y1054 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _32"> </span><span class="ff5 fs4">y<span class="_ _9"> </span>=<span class="_ _31"> </span>y+2;</span></div><div class="t m0 xd5 h8 y1055 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _16"> </span><span class="ff5 fs4">}</span></div><div class="t m0 x13 h7 yd3 ff3 fs4 fc0 sc0 ls0 ws0">Assuming<span class="_ _2"> </span>that<span class="_ _5"> </span>v<span class="_ _8"></span>ariables<span class="_ _2"> </span><span class="ff5">i<span class="_ _2"> </span></span>and<span class="_ _2"> </span><span class="ff5">y<span class="_ _2"> </span></span>are<span class="_ _2"> </span>mapp<span class="_ _4"></span>ed<span class="_ _5"> </span>to<span class="_ _2"> </span>registers<span class="_ _2"> </span><span class="ff5">a1<span class="_ _2"> </span></span>and<span class="_ _2"> </span><span class="ff5">a2</span>,<span class="_ _2"> </span>resp<span class="_ _4"></span>ectiv<span class="_ _8"></span>ely<span class="_ _7"></span>,</div><div class="t m0 x17 h7 y48 ff3 fs4 fc0 sc0 ls0 ws0">the following co<span class="_ _4"></span>de shows how the previous<span class="_ _5"> </span>“C”<span class="_ _5"> </span>co<span class="_ _4"></span>de can<span class="_ _5"> </span>b<span class="_ _4"></span>e implemen<span class="_ _1"></span>ted in<span class="_ _5"> </span>assembly</div><div class="t m0 x42 h7 yc ff5 fs4 fc0 sc0 ls0 ws0">http://riscv-<span class="_ _4"></span>programming.org<span class="_ _2"> </span><span class="ff3">(V<span class="_ _7"></span>ersion:<span class="_ _3"> </span>March<span class="_ _2"> </span>29,<span class="_ _2"> </span>2021)<span class="_ _85"> </span>82</span></div><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:187.121000px;bottom:36.395000px;width:148.940000px;height:13.948000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

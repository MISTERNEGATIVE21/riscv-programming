<div id="pf89" class="pf w0 h0" data-page-no="89"><div class="pc pc89 w0 h0"><img class="bi x17 y181 w2 h20" alt="" src="bg89.png"/><div class="t m0 x17 h7 y147 ff3 fs4 fc0 sc0 ls0 ws0">CHAPTER<span class="_ _2"> </span>10.<span class="_ _19"> </span>EXTERNAL<span class="_ _2"> </span>INTERRUPTS</div><div class="t m0 x13 h7 y1e ff3 fs4 fc0 sc0 ls0 ws0">There<span class="_ _2"> </span>are<span class="_ _2"> </span>several<span class="_ _2"> </span>strategies<span class="_ _2"> </span>that<span class="_ _2"> </span>may<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>emplo<span class="_ _1"></span>y<span class="_ _1"></span>ed<span class="_ _2"> </span>to<span class="_ _2"> </span>sav<span class="_ _8"></span>e<span class="_ _b"> </span>the<span class="_ _5"> </span>registers’<span class="_ _b"> </span>con<span class="_ _8"></span>tents</div><div class="t m0 x17 h7 yd4 ff3 fs4 fc0 sc0 ls0 ws0">in<span class="_ _3"> </span>the<span class="_ _3"> </span>main<span class="_ _3"> </span>memory.<span class="_ _83"> </span>In<span class="_ _3"> </span>our<span class="_ _3"> </span>discussion,<span class="_ _a"> </span>we<span class="_ _3"> </span>will<span class="_ _b"> </span>assume<span class="_ _3"> </span>there<span class="_ _a"> </span>is<span class="_ _3"> </span>a<span class="_ _3"> </span>dedicated<span class="_ _3"> </span>stac<span class="_ _8"></span>k</div><div class="t m0 x17 h7 yd5 ff3 fs4 fc0 sc0 ls0 ws0">for<span class="_ _2"> </span>in<span class="_ _8"></span>terrupt<span class="_ _2"> </span>service<span class="_ _2"> </span>routines.<span class="_ _a"> </span>This<span class="_ _2"> </span>stack,<span class="_ _5"> </span>called<span class="_ _2"> </span>here<span class="_ _2"> </span>ISR<span class="_ _5"> </span>stack,<span class="_ _5"> </span>is<span class="_ _2"> </span>allo<span class="_ _4"></span>cated<span class="_ _5"> </span>on<span class="_ _2"> </span>main</div><div class="t m0 x17 h7 yfd ff3 fs4 fc0 sc0 ls0 ws0">memory<span class="_ _2"> </span>on<span class="_ _2"> </span>a<span class="_ _2"> </span>set<span class="_ _b"> </span>of<span class="_ _5"> </span>addresses<span class="_ _b"> </span>that<span class="_ _5"> </span>do<span class="_ _4"></span>es<span class="_ _2"> </span>not<span class="_ _2"> </span>collide<span class="_ _2"> </span>with<span class="_ _b"> </span>the<span class="_ _5"> </span>addresses<span class="_ _b"> </span>used<span class="_ _5"> </span>by<span class="_ _2"> </span>other</div><div class="t m0 x17 h7 y28a ff3 fs4 fc0 sc0 ls0 ws0">programs<span class="_ _a"> </span>running<span class="_ _a"> </span>on<span class="_ _25"> </span>the<span class="_ _a"> </span>system.<span class="_ _1a"> </span>In<span class="_ _25"> </span>this<span class="_ _a"> </span>wa<span class="_ _8"></span>y<span class="_ _7"></span>,<span class="_ _9"> </span>whenev<span class="_ _1"></span>er<span class="_ _a"> </span>an<span class="_ _a"> </span>interrupt<span class="_ _a"> </span>o<span class="_ _4"></span>ccurs,<span class="_ _25"> </span>the</div><div class="t m0 x17 h7 y48a ff3 fs4 fc0 sc0 ls0 ws0">in<span class="_ _1"></span>terrupt<span class="_ _30"> </span>service<span class="_ _30"> </span>routine<span class="_ _2f"> </span>can<span class="_ _30"> </span>safely<span class="_ _30"> </span>sav<span class="_ _8"></span>e<span class="_ _30"> </span>the<span class="_ _2f"> </span>con<span class="_ _8"></span>text<span class="_ _2f"> </span>of<span class="_ _30"> </span>the<span class="_ _30"> </span>currently<span class="_ _30"> </span>executing<span class="_ _30"> </span>program</div><div class="t m0 x17 h7 y22 ff3 fs4 fc0 sc0 ls0 ws0">in<span class="_ _1"></span>to<span class="_ _2"> </span>the<span class="_ _2"> </span>ISR<span class="_ _2"> </span>stac<span class="_ _1"></span>k.</div><div class="t m0 x13 h7 y23 ff3 fs4 fc0 sc0 ls0 ws0">T<span class="_ _7"></span>o<span class="_ _5"> </span>push<span class="_ _5"> </span>v<span class="_ _8"></span>alues<span class="_ _5"> </span>into the<span class="_ _5"> </span>ISR<span class="_ _5"> </span>stack, we must ﬁrst<span class="_ _5"> </span>make the<span class="_ _5"> </span><span class="ff5">SP<span class="_ _5"> </span></span>register<span class="_ _5"> </span>p<span class="_ _4"></span>oin<span class="_ _8"></span>t<span class="_ _5"> </span>to<span class="_ _2"> </span>the</div><div class="t m0 x17 h7 y938 ff3 fs4 fc0 sc0 ls0 ws0">top<span class="_ _b"> </span>of<span class="_ _2"> </span>the<span class="_ _b"> </span>ISR<span class="_ _2"> </span>stack.<span class="_ _31"> </span>In<span class="_ _b"> </span>the<span class="_ _2"> </span>R<span class="_ _7"></span>V32I<span class="_ _2"> </span>ISA,<span class="_ _b"> </span>this<span class="_ _2"> </span>task<span class="_ _b"> </span>can<span class="_ _b"> </span>be<span class="_ _b"> </span>performed<span class="_ _b"> </span>with<span class="_ _b"> </span>help<span class="_ _2"> </span>from</div><div class="t m0 x17 h7 y939 ff3 fs4 fc0 sc0 ls0 ws0">the <span class="ff5">mscratch<span class="_ _37"> </span></span>CSR. T<span class="_ _7"></span>o do so,<span class="_ _5"> </span>w<span class="_ _1"></span>e ﬁrst conﬁgure the system so that the<span class="_ _5"> </span><span class="ff5">mscratch<span class="_ _37"> </span></span>CSR</div><div class="t m0 x17 h7 y93a ff3 fs4 fc0 sc0 ls0 ws0">p<span class="_ _4"></span>oin<span class="_ _8"></span>ts<span class="_ _b"> </span>to<span class="_ _b"> </span>the<span class="_ _b"> </span>top<span class="_ _2"> </span>of<span class="_ _b"> </span>the<span class="_ _b"> </span>ISR<span class="_ _b"> </span>stac<span class="_ _8"></span>k<span class="_ _b"> </span>on<span class="_ _b"> </span>p<span class="_ _4"></span>o<span class="_ _8"></span>wer-up.<span class="_ _31"> </span>Then,<span class="_ _3"> </span>at<span class="_ _b"> </span>the<span class="_ _2"> </span>b<span class="_ _4"></span>eginning/end<span class="_ _b"> </span>of<span class="_ _b"> </span>the</div><div class="t m0 x17 h7 y113 ff3 fs4 fc0 sc0 ls0 ws0">in<span class="_ _1"></span>terrupt service routine,<span class="_ _5"> </span>we exchange the v<span class="_ _8"></span>alue of <span class="ff5">mscratch<span class="_ _5"> </span></span>and <span class="ff5">SP<span class="_ _5"> </span></span>by executing the</div><div class="t m0 x17 h7 y93b ff5 fs4 fc0 sc0 ls0 ws0">csrrw<span class="_ _2"> </span><span class="ff3">instruction.<span class="_ _3"> </span>The<span class="_ _2"> </span>following<span class="_ _5"> </span>co<span class="_ _4"></span>de<span class="_ _5"> </span>illustrates<span class="_ _2"> </span>this<span class="_ _2"> </span>pro<span class="_ _4"></span>cess.<span class="_ _3"> </span>First<span class="_ _2"> </span>(line<span class="_ _2"> </span>3),<span class="_ _2"> </span>the<span class="_ _5"> </span>ISR</span></div><div class="t m0 x17 h7 y104 ff3 fs4 fc0 sc0 ls0 ws0">sw<span class="_ _1"></span>aps the<span class="_ _2f"> </span><span class="ff5">sp<span class="_ _2f"> </span></span>and the<span class="_ _2f"> </span><span class="ff5">mscratch<span class="_ _2f"> </span></span>registers’ con<span class="_ _8"></span>tents so<span class="_ _2f"> </span>that the<span class="_ _30"> </span><span class="ff5">sp<span class="_ _37"> </span></span>register points to<span class="_ _30"> </span>the</div><div class="t m0 x17 h7 y105 ff3 fs4 fc0 sc0 ls0 ws0">top<span class="_ _2f"> </span>of<span class="_ _30"> </span>the ISR<span class="_ _30"> </span>stac<span class="_ _1"></span>k<span class="_ _2f"> </span>and<span class="_ _30"> </span>the <span class="ff5">mscratch<span class="_ _30"> </span></span>p<span class="_ _4"></span>oin<span class="_ _8"></span>ts<span class="_ _2f"> </span>to<span class="_ _30"> </span>the top<span class="_ _30"> </span>of the<span class="_ _30"> </span>previous<span class="_ _2f"> </span>program<span class="_ _30"> </span>stack.</div><div class="t m0 x17 h7 y106 ff3 fs4 fc0 sc0 ls0 ws0">Then,<span class="_ _b"> </span>the<span class="_ _b"> </span>ISR<span class="_ _b"> </span>allo<span class="_ _4"></span>cates<span class="_ _b"> </span>space<span class="_ _b"> </span>on<span class="_ _b"> </span>the<span class="_ _b"> </span>ISR<span class="_ _b"> </span>stac<span class="_ _1"></span>k<span class="_ _b"> </span>and<span class="_ _b"> </span>sav<span class="_ _8"></span>es<span class="_ _b"> </span>all<span class="_ _b"> </span>the<span class="_ _b"> </span>necessary<span class="_ _b"> </span>context</div><div class="t m0 x17 h7 y93c ff3 fs4 fc0 sc0 ls0 ws0">(lines 4-7).<span class="_ _3"> </span>After this,<span class="_ _5"> </span>it identiﬁes the interrupt source b<span class="_ _1"></span>y insp<span class="_ _4"></span>ecting the <span class="ff5">mcause<span class="_ _37"> </span></span>CSR</div><div class="t m0 x17 h7 y16fe ff3 fs4 fc0 sc0 ls0 ws0">and<span class="_ _5"> </span>inv<span class="_ _8"></span>okes<span class="_ _5"> </span>the<span class="_ _2"> </span>sp<span class="_ _4"></span>ecialized ISR<span class="_ _2"> </span>to<span class="_ _2"> </span>handle<span class="_ _5"> </span>the<span class="_ _2"> </span>interrupt<span class="_ _5"> </span>(lines<span class="_ _5"> </span>9-11).<span class="_ _a"> </span>Finally<span class="_ _7"></span>,<span class="_ _2"> </span>the<span class="_ _5"> </span>ISR</div><div class="t m0 x17 h7 y117 ff3 fs4 fc0 sc0 ls0 ws0">restores the<span class="_ _5"> </span>context by loading the<span class="_ _5"> </span>registers’<span class="_ _5"> </span>v<span class="_ _8"></span>alues from<span class="_ _5"> </span>the<span class="_ _5"> </span>ISR<span class="_ _5"> </span>stac<span class="_ _1"></span>k,<span class="_ _5"> </span>sw<span class="_ _1"></span>apping the</div><div class="t m0 x17 h7 y93d ff5 fs4 fc0 sc0 ls0 ws0">mscratch<span class="_ _2"> </span><span class="ff3">and<span class="_ _2"> </span></span>sp<span class="_ _2"> </span><span class="ff3">registers’<span class="_ _2"> </span>con<span class="_ _1"></span>ten<span class="_ _1"></span>ts,<span class="_ _2"> </span>and<span class="_ _2"> </span>executing<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">mret<span class="_ _2"> </span></span>instruction.</span></div><div class="t m0 x140 h8 y16ff ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _16"> </span><span class="ff5 fs4">main_isr:</span></div><div class="t m0 x140 h8 y1700 ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _32"> </span><span class="ff5 fs4">#<span class="_ _9"> </span>Saves<span class="_ _31"> </span>the<span class="_ _31"> </span>context</span></div><div class="t m0 x140 h8 y1701 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _32"> </span><span class="ff5 fs4">csrrw<span class="_ _9"> </span>sp,<span class="_ _31"> </span>mscratch,<span class="_ _31"> </span>sp<span class="_ _82"> </span>#<span class="_ _31"> </span>Exchange<span class="_ _31"> </span>sp<span class="_ _9"> </span>with<span class="_ _31"> </span>mscratch</span></div><div class="t m0 x140 h8 y1702 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _32"> </span><span class="ff5 fs4">addi<span class="_ _82"> </span>sp,<span class="_ _9"> </span>sp,<span class="_ _31"> </span>-64<span class="_ _c4"> </span>#<span class="_ _31"> </span>Allocates<span class="_ _31"> </span>space<span class="_ _31"> </span>at<span class="_ _9"> </span>the<span class="_ _31"> </span>ISR<span class="_ _31"> </span>stack</span></div><div class="t m0 x140 h8 y1703 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _32"> </span><span class="ff5 fs4">sw<span class="_ _9"> </span>a0,<span class="_ _31"> </span>0(sp)<span class="_ _90"> </span>#<span class="_ _31"> </span>Saves<span class="_ _31"> </span>a0</span></div><div class="t m0 x140 h8 y1704 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _32"> </span><span class="ff5 fs4">sw<span class="_ _9"> </span>a1,<span class="_ _31"> </span>4(sp)<span class="_ _90"> </span>#<span class="_ _31"> </span>Saves<span class="_ _31"> </span>a1</span></div><div class="t m0 x140 h8 y1705 ff24 fs12 fc0 sc0 ls0 ws0">7<span class="_ _32"> </span><span class="ff5 fs4">...</span></div><div class="t m0 x140 h38 y1706 ff24 fs12 fc0 sc0 ls0 ws0">8</div><div class="t m0 x140 h8 y1707 ff24 fs12 fc0 sc0 ls0 ws0">9<span class="_ _32"> </span><span class="ff5 fs4">#<span class="_ _9"> </span>Handles<span class="_ _31"> </span>the<span class="_ _31"> </span>interrupt</span></div><div class="t m0 x7b h8 y1708 ff24 fs12 fc0 sc0 ls0 ws0">10<span class="_ _32"> </span><span class="ff5 fs4">csrr<span class="_ _82"> </span>a1,<span class="_ _9"> </span>mcause<span class="_ _85"> </span>#<span class="_ _31"> </span>Reads<span class="_ _31"> </span>the<span class="_ _31"> </span>interrupt<span class="_ _31"> </span>cause<span class="_ _9"> </span>and<span class="_ _31"> </span>perform</span></div><div class="t m0 x7b h8 y1709 ff24 fs12 fc0 sc0 ls0 ws0">11<span class="_ _32"> </span><span class="ff5 fs4">...<span class="_ _c0"> </span>#<span class="_ _9"> </span>some<span class="_ _31"> </span>action<span class="_ _31"> </span>according<span class="_ _31"> </span>to<span class="_ _9"> </span>the<span class="_ _31"> </span>cause.</span></div><div class="t m0 x7b h38 y170a ff24 fs12 fc0 sc0 ls0 ws0">12</div><div class="t m0 x7b h8 y170b ff24 fs12 fc0 sc0 ls0 ws0">13<span class="_ _32"> </span><span class="ff5 fs4">#<span class="_ _9"> </span>Restores<span class="_ _31"> </span>the<span class="_ _31"> </span>context</span></div><div class="t m0 x7b h8 y170c ff24 fs12 fc0 sc0 ls0 ws0">14<span class="_ _32"> </span><span class="ff5 fs4">...</span></div><div class="t m0 x7b h8 y170d ff24 fs12 fc0 sc0 ls0 ws0">15<span class="_ _32"> </span><span class="ff5 fs4">lw<span class="_ _9"> </span>a1,<span class="_ _31"> </span>4(sp)<span class="_ _c1"> </span>#<span class="_ _31"> </span>Restores<span class="_ _31"> </span>a1</span></div><div class="t m0 x7b h8 y170e ff24 fs12 fc0 sc0 ls0 ws0">16<span class="_ _32"> </span><span class="ff5 fs4">lw<span class="_ _9"> </span>a0,<span class="_ _31"> </span>0(sp)<span class="_ _c1"> </span>#<span class="_ _31"> </span>Restores<span class="_ _31"> </span>a0</span></div><div class="t m0 x7b h8 y170f ff24 fs12 fc0 sc0 ls0 ws0">17<span class="_ _32"> </span><span class="ff5 fs4">addi<span class="_ _82"> </span>sp,<span class="_ _9"> </span>sp,<span class="_ _31"> </span>64<span class="_ _c4"> </span>#<span class="_ _31"> </span>Deallocate<span class="_ _31"> </span>space<span class="_ _31"> </span>from<span class="_ _9"> </span>the<span class="_ _31"> </span>ISR<span class="_ _31"> </span>stack</span></div><div class="t m0 x7b h8 y1710 ff24 fs12 fc0 sc0 ls0 ws0">18<span class="_ _32"> </span><span class="ff5 fs4">csrrw<span class="_ _9"> </span>sp,<span class="_ _31"> </span>mscratch,<span class="_ _31"> </span>sp<span class="_ _31"> </span>#<span class="_ _31"> </span>Exchange<span class="_ _31"> </span>sp<span class="_ _9"> </span>with<span class="_ _31"> </span>mscratch</span></div><div class="t m0 x7b h8 y1711 ff24 fs12 fc0 sc0 ls0 ws0">19<span class="_ _32"> </span><span class="ff5 fs4">mret<span class="_ _4f"> </span>#<span class="_ _31"> </span>Returns<span class="_ _31"> </span>from<span class="_ _31"> </span>the<span class="_ _31"> </span>interrupt</span></div><div class="t m0 x13 h7 y1712 ff3 fs4 fc0 sc0 ls0 ws0">The <span class="ff5">mret<span class="_ _2f"> </span></span>instruction<span class="_ _2f"> </span>is a<span class="_ _30"> </span>sp<span class="_ _4"></span>ecial instruction<span class="_ _2f"> </span>that<span class="_ _2f"> </span>reco<span class="_ _8"></span>vers the<span class="_ _30"> </span>context<span class="_ _2f"> </span>that w<span class="_ _8"></span>as au-</div><div class="t m0 x17 h7 y1713 ff3 fs4 fc0 sc0 ls0 ws0">tomatically<span class="_ _30"> </span>sav<span class="_ _8"></span>ed<span class="_ _30"> </span>by<span class="_ _30"> </span>the<span class="_ _30"> </span>CPU<span class="_ _30"> </span>hardware.<span class="_ _b"> </span>More<span class="_ _30"> </span>sp<span class="_ _4"></span>eciﬁcally<span class="_ _7"></span>,<span class="_ _30"> </span>it<span class="_ _30"> </span>recov<span class="_ _8"></span>ers<span class="_ _2f"> </span>the<span class="_ _30"> </span><span class="ff5">mstatus</span>.<span class="ff5">MIE</span></div><div class="t m0 x17 h7 y1714 ff3 fs4 fc0 sc0 ls0 ws0">subﬁeld<span class="_ _5"> </span>conten<span class="_ _8"></span>ts<span class="_ _5"> </span>by<span class="_ _5"> </span>copying the<span class="_ _2"> </span>v<span class="_ _8"></span>alue<span class="_ _5"> </span>from<span class="_ _5"> </span><span class="ff5">mstatus</span>.<span class="ff5">MPIE<span class="_ _2"> </span></span>and<span class="_ _5"> </span>the<span class="_ _2"> </span>PC<span class="_ _5"> </span>register’s<span class="_ _5"> </span>con-</div><div class="t m0 x17 h7 y1715 ff3 fs4 fc0 sc0 ls0 ws0">ten<span class="_ _1"></span>ts<span class="_ _2"> </span>b<span class="_ _1"></span>y<span class="_ _2"> </span>cop<span class="_ _1"></span>ying<span class="_ _2"> </span>the<span class="_ _2"> </span>v<span class="_ _8"></span>alues<span class="_ _2"> </span>from<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">mepc<span class="_ _2"> </span></span>register</div><div class="t m0 x4c h11 y1716 ffc fs7 fc0 sc0 ls0 ws0">10</div><div class="t m0 x3a h7 y1715 ff3 fs4 fc0 sc0 ls0 ws0">.</div><div class="t m0 x17 ha y1717 ff7 fs6 fc0 sc0 ls0 ws0">10.3.5<span class="_ _e"> </span>Setting<span class="_ _a"> </span>up<span class="_ _a"> </span>the<span class="_ _a"> </span>In<span class="_ _8"></span>terrupt<span class="_ _a"> </span>Handling<span class="_ _a"> </span>Mechanism</div><div class="t m0 x17 h7 y1718 ff3 fs4 fc0 sc0 ls0 ws0">F<span class="_ _7"></span>or<span class="_ _b"> </span>the<span class="_ _2"> </span>interrupt<span class="_ _2"> </span>handling<span class="_ _b"> </span>mec<span class="_ _8"></span>hanism<span class="_ _b"> </span>to<span class="_ _b"> </span>w<span class="_ _8"></span>ork<span class="_ _b"> </span>properly<span class="_ _7"></span>,<span class="_ _b"> </span>a<span class="_ _b"> </span>set<span class="_ _2"> </span>of<span class="_ _b"> </span>tasks<span class="_ _2"> </span>must<span class="_ _b"> </span>be<span class="_ _b"> </span>per-</div><div class="t m0 x17 h7 y1719 ff3 fs4 fc0 sc0 ls0 ws0">formed.<span class="_ _0"> </span>These<span class="_ _a"> </span>tasks,<span class="_ _25"> </span>usually<span class="_ _3"> </span>p<span class="_ _4"></span>erformed<span class="_ _3"> </span>on<span class="_ _a"> </span>the<span class="_ _a"> </span>b<span class="_ _4"></span>oot<span class="_ _a"> </span>pro<span class="_ _4"></span>cess,<span class="_ _3"> </span>are<span class="_ _a"> </span>discussed<span class="_ _a"> </span>in<span class="_ _3"> </span>the</div><div class="t m0 x17 h7 y171a ff3 fs4 fc0 sc0 ls0 ws0">follo<span class="_ _1"></span>wing<span class="_ _2"> </span>sections.</div><div class="t m0 x17 h7 ybe2 ff6 fs4 fc0 sc0 ls0 ws0">Registering<span class="_ _b"> </span>the<span class="_ _b"> </span>in<span class="_ _8"></span>terrupt<span class="_ _b"> </span>service<span class="_ _3"> </span>routine(s)</div><div class="t m0 x17 h7 y171b ff3 fs4 fc0 sc0 ls0 ws0">T<span class="_ _7"></span>o<span class="_ _3"> </span>register<span class="_ _3"> </span>the<span class="_ _b"> </span>interrupt<span class="_ _3"> </span>service<span class="_ _b"> </span>routine,<span class="_ _a"> </span>the<span class="_ _3"> </span>system<span class="_ _3"> </span>must<span class="_ _b"> </span>write<span class="_ _3"> </span>the<span class="_ _3"> </span>address<span class="_ _3"> </span>of<span class="_ _3"> </span>the</div><div class="t m0 x17 h7 y171c ff3 fs4 fc0 sc0 ls0 ws0">ISR<span class="_ _2"> </span>(direct<span class="_ _b"> </span>mode)<span class="_ _2"> </span>or<span class="_ _b"> </span>the<span class="_ _2"> </span>base<span class="_ _2"> </span>address<span class="_ _b"> </span>of<span class="_ _5"> </span>the<span class="_ _b"> </span>in<span class="_ _8"></span>terrupt<span class="_ _b"> </span>v<span class="_ _8"></span>ector<span class="_ _2"> </span>table<span class="_ _b"> </span>(v<span class="_ _8"></span>ectored<span class="_ _b"> </span>mode)</div><div class="t m0 x7c h1e y208 ff12 fse fc0 sc0 ls0 ws0">10</div><div class="t m0 x13 h1f y209 ff13 fsf fc0 sc0 ls0 ws0">In<span class="_ _37"> </span>systems<span class="_ _37"> </span>with<span class="_ _5"> </span>multiple<span class="_ _2f"> </span>privilege<span class="_ _5"> </span>mo<span class="_ _4"></span>des<span class="_ _2f"> </span>(<span class="ff14">e.g.</span>,<span class="_ _5"> </span>Machine<span class="_ _2f"> </span>and<span class="_ _5"> </span>User<span class="_ _37"> </span>mo<span class="_ _4"></span>des),<span class="_ _37"> </span>the<span class="_ _37"> </span><span class="ff28">mret<span class="_ _5"> </span></span>instruction</div><div class="t m0 x17 h1f y48 ff13 fsf fc0 sc0 ls0 ws0">also<span class="_ _37"> </span>recov<span class="_ _8"></span>ers<span class="_ _37"> </span>the<span class="_ _37"> </span>privilege<span class="_ _5"> </span>mo<span class="_ _4"></span>de.</div><div class="t m0 x42 h7 yc ff5 fs4 fc0 sc0 ls0 ws0">http://riscv-<span class="_ _4"></span>programming.org<span class="_ _2"> </span><span class="ff3">(V<span class="_ _7"></span>ersion:<span class="_ _3"> </span>March<span class="_ _2"> </span>29,<span class="_ _2"> </span>2021)<span class="_ _64"> </span>124</span></div><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",90.709,465.032,null]'><div class="d m1" style="border-style:none;position:absolute;left:165.581000px;bottom:746.172000px;width:62.940000px;height:10.849000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",90.709,723.196,null]'><div class="d m1" style="border-style:none;position:absolute;left:150.275000px;bottom:734.217000px;width:111.724000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:367.909000px;bottom:734.217000px;width:18.459000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",90.709,465.032,null]'><div class="d m1" style="border-style:none;position:absolute;left:481.985000px;bottom:734.217000px;width:23.578000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",90.709,465.032,null]'><div class="d m1" style="border-style:none;position:absolute;left:135.067000px;bottom:722.262000px;width:37.166000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",90.709,723.196,null]'><div class="d m1" style="border-style:none;position:absolute;left:135.067000px;bottom:698.352000px;width:105.714000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:172.427000px;bottom:688.334000px;width:18.458000px;height:8.911000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:254.140000px;bottom:674.441000px;width:18.458000px;height:10.849000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:182.190000px;bottom:662.486000px;width:18.459000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,506.875,null]'><div class="d m1" style="border-style:none;position:absolute;left:293.677000px;bottom:662.486000px;width:18.597000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,532.778,null]'><div class="d m1" style="border-style:none;position:absolute;left:196.341000px;bottom:650.531000px;width:22.056000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,532.778,null]'><div class="d m1" style="border-style:none;position:absolute;left:483.507000px;bottom:650.531000px;width:22.056000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:243.023000px;bottom:638.022000px;width:18.459000px;height:11.956000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",90.709,723.196,null]'><div class="d m1" style="border-style:none;position:absolute;left:135.067000px;bottom:626.621000px;width:107.008000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:487.105000px;bottom:614.112000px;width:18.458000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:178.521000px;bottom:590.755000px;width:18.459000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:182.146000px;bottom:578.800000px;width:18.458000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:302.819000px;bottom:578.800000px;width:18.459000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,532.778,null]'><div class="d m1" style="border-style:none;position:absolute;left:483.507000px;bottom:566.291000px;width:22.056000px;height:11.956000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:255.406000px;bottom:554.336000px;width:18.459000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:487.105000px;bottom:554.336000px;width:18.458000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:399.178000px;bottom:542.935000px;width:18.459000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,552.703,null]'><div class="d m1" style="border-style:none;position:absolute;left:240.837000px;bottom:245.425000px;width:23.440000px;height:10.849000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,449.092,null]'><div class="d m1" style="border-style:none;position:absolute;left:426.144000px;bottom:233.470000px;width:15.968000px;height:10.849000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf89" data-dest-detail='[137,"XYZ",151.306,89.795,null]'><div class="d m1" style="border-style:none;position:absolute;left:354.107000px;bottom:221.238000px;width:10.433000px;height:12.316000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,474.995,null]'><div class="d m1" style="border-style:none;position:absolute;left:135.067000px;bottom:94.733000px;width:18.458000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:187.121000px;bottom:36.395000px;width:148.940000px;height:13.948000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

<div id="pf80" class="pf w0 h0" data-page-no="80"><div class="pc pc80 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg80.png"/><div class="t m0 xf h8 y10c ff3 fs4 fc0 sc0 ls0 ws0">8.3.<span class="_ _1f"> </span>I/O<span class="_ _2"> </span>OPERA<span class="_ _9"></span>TIONS<span class="_ _2"> </span>ON<span class="_ _2"> </span>RISC-V</div><div class="c x35 y11f2 w1b h82"><div class="t m0 x125 h83 y11f3 ff9b fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">Device</span></div><div class="t m0 x14b h84 y11f4 ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">0000</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">0000</span></div><div class="t m0 x142 h85 y11f5 ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">Internal </span><span class="fc2 sc0">RAM</span></div><div class="t m0 x3f h85 y11f6 ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">(boot </span><span class="fc2 sc0">memory)</span></div><div class="t m0 x14b h84 y11f7 ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">0001</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">0000</span></div><div class="t m0 xd6 h86 y11f8 ff9c fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">...</span></div><div class="t m0 x43 h85 y11f9 ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">...</span></div><div class="t m0 x14b h84 y11fa ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">53FB</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">C000</span></div><div class="t m0 x141 h85 y11fb ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">UAR</span><span class="_ _9"></span><span class="fc2 sc0">T</span><span class="_ _9"></span><span class="fc2 sc0">-1 </span></div><div class="t m0 x14b h84 y11fc ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">53FB</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">FFFF</span></div><div class="t m0 xd6 h86 y11fd ff9c fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">...</span></div><div class="t m0 x43 h85 y11fe ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">...</span></div><div class="t m0 x14b h84 y11ff ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">53FA</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">0000</span></div><div class="t m0 xdd h85 y1200 ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">GPT</span></div><div class="t m0 x14b h84 y1201 ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">53FA</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">3FFF</span></div><div class="t m0 xd6 h86 y1202 ff9c fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">...</span></div><div class="t m0 x43 h85 y1203 ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">...</span></div><div class="t m0 x14b h84 y1204 ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">53F8</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">4000</span></div><div class="t m0 xff h85 y1205 ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">GPIO</span></div><div class="t m0 x14b h84 y1206 ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">53F8</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">400B</span></div><div class="t m0 xd6 h86 y1207 ff9c fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">...</span></div><div class="t m0 x43 h85 y1208 ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">...</span></div><div class="t m0 x14b h84 y1209 ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">0FFF</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">C000</span></div><div class="t m0 xff h85 y120a ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">TZIC</span></div><div class="t m0 x14b h84 y120b ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">0FFF</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">FFFF</span></div><div class="t m0 xd6 h86 y120c ff9c fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">...</span></div><div class="t m0 x43 h85 y120d ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">...</span></div><div class="t m0 x14b h84 y120e ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">7000</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">0000</span></div><div class="t m0 x142 h85 y120f ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">Main </span><span class="fc2 sc0">Memory </span></div><div class="t m0 x1b h85 y1210 ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">(of</span><span class="fc2 sc0">f-chip </span><span class="fc2 sc0">DDR2)</span></div><div class="t m0 x14b h84 y1211 ff9c fs45 fc0 sc0 ls0 ws0"><span class="fc2 sc0">8000</span><span class="fs46"><span class="fc2 sc0"> </span></span><span class="fc2 sc0">0000</span></div><div class="t m0 x14c h87 y1212 ff9d fs47 fc0 sc0 ls0 ws0"><span class="fc2 sc0">64 </span><span class="fc2 sc0">KB</span></div><div class="t m0 x14c h87 y1213 ff9d fs47 fc0 sc0 ls0 ws0"><span class="fc2 sc0">16 </span><span class="fc2 sc0">KB</span></div><div class="t m0 x14c h87 y1214 ff9d fs47 fc0 sc0 ls0 ws0"><span class="fc2 sc0">16 </span><span class="fc2 sc0">KB</span></div><div class="t m0 x14c h87 y1215 ff9d fs47 fc0 sc0 ls0 ws0"><span class="fc2 sc0">12 </span><span class="fc2 sc0">B</span></div><div class="t m0 x14c h87 y1216 ff9d fs47 fc0 sc0 ls0 ws0"><span class="fc2 sc0">16 </span><span class="fc2 sc0">KB</span></div><div class="t m0 x14c h87 y1217 ff9d fs47 fc0 sc0 ls0 ws0"><span class="fc2 sc0">256 </span><span class="fc2 sc0">MB</span></div><div class="t m2 x129 h85 y1218 ff9d fs44 fc0 sc0 ls0 ws0"><span class="fc2 sc0">Address </span><span class="fc2 sc0">space</span></div></div><div class="t m0 xf h8 y1219 ff3 fs4 fc0 sc0 ls0 ws0">Figure<span class="_"> </span>8.4:<span class="_ _34"> </span>A<span class="_ _6"> </span>single<span class="_"> </span>address<span class="_ _6"> </span>space<span class="_"> </span>mapp<span class="_ _5"></span>ed<span class="_ _6"> </span>to<span class="_"> </span>main<span class="_ _6"> </span>memory<span class="_"> </span>(addresses<span class="_ _6"> </span><span class="ff5">0x70000000<span class="_ _38"> </span></span>to<span class="_ _6"> </span><span class="ff5">0x80000000</span>)<span class="_"> </span>and</div><div class="t m0 xf h8 y121a ff3 fs4 fc0 sc0 ls0 ws0">m<span class="_ _1"></span>ultiple<span class="_ _2"> </span>p<span class="_ _5"></span>eripherals.</div><div class="t m0 x114 h9 y121b ff22 fs11 fc0 sc0 ls0 ws0">1<span class="_ _2a"> </span><span class="ff5 fs4">.section<span class="_ _4"> </span>.text</span></div><div class="t m0 x114 h9 y121c ff22 fs11 fc0 sc0 ls0 ws0">2<span class="_ _2a"> </span><span class="ff5 fs4">.set<span class="_ _4"> </span>DISPLAY_CONTROL_REG_PORT,<span class="_ _18"> </span>0x00000040</span></div><div class="t m0 x114 h9 y121d ff22 fs11 fc0 sc0 ls0 ws0">3<span class="_ _2a"> </span><span class="ff5 fs4">.set<span class="_ _4"> </span>FLOOR_DATA_REG_PORT,<span class="_ _18"> </span>0x00000080</span></div><div class="t m0 x114 h2f y121e ff22 fs11 fc0 sc0 ls0 ws0">4</div><div class="t m0 x114 h9 y121f ff22 fs11 fc0 sc0 ls0 ws0">5<span class="_ _2a"> </span><span class="ff5 fs4">update_display:</span></div><div class="t m0 x114 h9 y1220 ff22 fs11 fc0 sc0 ls0 ws0">6<span class="_ _37"> </span><span class="ff5 fs4">li<span class="_ _7a"> </span>a0,<span class="_ _18"> </span>FLOOR_DATA_REG_PORT<span class="_ _5a"> </span>#<span class="_ _18"> </span>reads<span class="_ _4"> </span>the<span class="_ _4"> </span>floor<span class="_ _18"> </span>number<span class="_ _4"> </span>and</span></div><div class="t m0 x114 h9 y1221 ff22 fs11 fc0 sc0 ls0 ws0">7<span class="_ _37"> </span><span class="ff5 fs4">lb<span class="_ _7a"> </span>a1,<span class="_ _18"> </span>(a0)<span class="_ _b9"> </span>#<span class="_ _7a"> </span>store<span class="_ _18"> </span>into<span class="_ _4"> </span>a1</span></div><div class="t m0 x114 h9 y1222 ff22 fs11 fc0 sc0 ls0 ws0">8<span class="_ _37"> </span><span class="ff5 fs4">la<span class="_ _7a"> </span>a0,<span class="_ _18"> </span>floor_to_pattern_table<span class="_ _3f"> </span>#<span class="_ _4"> </span>convert<span class="_ _18"> </span>the<span class="_ _4"> </span>floor<span class="_ _4"> </span>number</span></div><div class="t m0 x114 h9 y1223 ff22 fs11 fc0 sc0 ls0 ws0">9<span class="_ _37"> </span><span class="ff5 fs4">add<span class="_ _18"> </span>t0,<span class="_ _4"> </span>a0,<span class="_ _4"> </span>a1<span class="_ _c1"> </span>#<span class="_ _7a"> </span>into<span class="_ _18"> </span>a<span class="_ _4"> </span>configuration</span></div><div class="t m0 x126 h9 y1224 ff22 fs11 fc0 sc0 ls0 ws0">10<span class="_ _37"> </span><span class="ff5 fs4">lb<span class="_ _7a"> </span>a1,<span class="_ _18"> </span>(t0)<span class="_ _b9"> </span>#<span class="_ _7a"> </span>byte</span></div><div class="t m0 x126 h9 y1225 ff22 fs11 fc0 sc0 ls0 ws0">11<span class="_ _37"> </span><span class="ff5 fs4">li<span class="_ _7a"> </span>a0,<span class="_ _18"> </span>DISPLAY_CONTROL_REG_PORT<span class="_ _4"> </span>#<span class="_ _18"> </span>set<span class="_ _4"> </span>the<span class="_ _4"> </span>display<span class="_ _4"> </span>controller</span></div><div class="t m0 x126 h9 y1226 ff22 fs11 fc0 sc0 ls0 ws0">12<span class="_ _37"> </span><span class="ff5 fs4">sb<span class="_ _7a"> </span>a1,<span class="_ _18"> </span>(a0)<span class="_ _b9"> </span>#<span class="_ _7a"> </span>with<span class="_ _18"> </span>the<span class="_ _4"> </span>configuration<span class="_ _18"> </span>byte</span></div><div class="t m0 x126 h9 y1227 ff22 fs11 fc0 sc0 ls0 ws0">13<span class="_ _37"> </span><span class="ff5 fs4">ret<span class="_ _8c"> </span>#<span class="_ _18"> </span>return</span></div><div class="t m0 x126 h2f y1228 ff22 fs11 fc0 sc0 ls0 ws0">14</div><div class="t m0 x126 h9 y1229 ff22 fs11 fc0 sc0 ls0 ws0">15<span class="_ _2a"> </span><span class="ff5 fs4">.section<span class="_ _4"> </span>.rodata</span></div><div class="t m0 x126 h9 y122a ff22 fs11 fc0 sc0 ls0 ws0">16<span class="_ _2a"> </span><span class="ff5 fs4">floor_to_pattern_table:</span></div><div class="t m0 x126 h9 y122b ff22 fs11 fc0 sc0 ls0 ws0">17<span class="_ _37"> </span><span class="ff5 fs4">.byte<span class="_ _18"> </span>0x7e,0x30,0x6d,0x79,0x33,0x5b,0x5f,0x70,0x7f,0x7b</span></div><div class="c x11 y122c w1c h88"><div class="t m0 xc h89 y122d ff9e fs48 fc0 sc0 ls0 ws0"><span class="fc2 sc0">00110011</span></div><div class="t m0 x111 h8a y122e ff9f fs49 fc0 sc0 ls0 ws0"><span class="fc2 sc0">R</span><span class="_ _9"></span><span class="fc2 sc0">V32I</span></div><div class="t m0 x1c h8a y122f ff9f fs49 fc0 sc0 ls0 ws0"><span class="fc2 sc0">CPU</span></div><div class="t m0 x43 h8a y1230 ff9f fs49 fc0 sc0 ls0 ws0"><span class="fc2 sc0">Main </span><span class="fc2 sc0">Memory</span></div><div class="t m0 xc h8b y1231 ff9f fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">(</span><span class="ff9e fs48"><span class="fc2 sc0">0x10000000-0xFFFFFFF</span></span><span class="fc2 sc0">)</span></div><div class="t m0 x4c h8b y1232 ff9f fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">Control </span><span class="fc2 sc0">Reg. </span></div><div class="t m0 xf4 h8b y1233 ff9f fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">(</span><span class="ff9e fs48"><span class="fc2 sc0">0x00000040</span></span><span class="fc2 sc0">)</span></div><div class="t m0 xff h8a y1234 ff9f fs49 fc0 sc0 ls0 ws0"><span class="fc2 sc0">Display </span><span class="fc2 sc0">Controller</span></div><div class="t m0 x6d h8c y1235 ffa0 fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">f</span></div><div class="t m0 xe3 h8c y1236 ffa0 fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">b</span></div><div class="t m0 xda h8c y1237 ffa0 fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">a</span></div><div class="t m0 x69 h8c y1238 ffa0 fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">e</span></div><div class="t m0 x12 h8c y1239 ffa0 fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">c</span></div><div class="t m0 x13b h8c y123a ffa0 fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">g</span></div><div class="t m0 xe2 h8c y123b ffa0 fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">d</span></div><div class="t m0 xe3 h8c y123c ffa0 fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">p</span></div><div class="t m0 x130 h8d y123d ff9f fs4b fc0 sc0 ls0 ws0"><span class="fc2 sc0">segments</span></div><div class="t m0 x130 h8d y123e ff9f fs4b fc0 sc0 ls0 ws0"><span class="fc2 sc0">dot</span></div><div class="t m0 xc h89 y123f ff9e fs48 fc0 sc0 ls0 ws0"><span class="fc2 sc0">00000100</span></div><div class="t m0 x119 h8b y1240 ff9f fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">Data </span><span class="fc2 sc0">Reg. </span></div><div class="t m0 xf4 h8b y1241 ff9f fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">(</span><span class="ff9e fs48"><span class="fc2 sc0">0x00000080</span></span><span class="fc2 sc0">)</span></div><div class="t m0 x28 h8a y1242 ff9f fs49 fc0 sc0 ls0 ws0"><span class="fc2 sc0">Floor </span><span class="fc2 sc0">Sensor </span><span class="fc2 sc0">Controller</span></div><div class="t m2 x126 h8a y1243 ff9f fs49 fc0 sc0 ls0 ws0"><span class="fc2 sc0">bus</span></div><div class="t m0 x6c h8b y1244 ff9f fs4a fc0 sc0 ls0 ws0"><span class="fc2 sc0">Floor </span><span class="fc2 sc0">Sensor</span></div></div><div class="t m0 x13 h8 y1245 ff3 fs4 fc0 sc0 ls0 ws0">Figure<span class="_ _2"> </span>8.5:<span class="_ _7"> </span>R<span class="_ _12"></span>V32I-based<span class="_ _2"> </span>computing<span class="_ _2"> </span>system<span class="_ _2"> </span>with<span class="_ _2"> </span>a<span class="_ _2"> </span>sev<span class="_ _1"></span>en-segmen<span class="_ _1"></span>t<span class="_ _2"> </span>displa<span class="_ _1"></span>y<span class="_ _2"> </span>and<span class="_ _2"> </span>a<span class="_ _6"> </span>ﬂo<span class="_ _5"></span>or<span class="_ _2"> </span>sensor.</div><div class="t m0 x2c h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">Prin<span class="_ _1"></span>ted<span class="_ _2"> </span>v<span class="_ _1"></span>ersion<span class="_ _2"> </span>a<span class="_ _1"></span>v<span class="_ _27"></span>ailable<span class="_ _2"> </span>for<span class="_ _6"> </span>purchase<span class="_ _6"> </span>at<span class="_ _2"> </span>Amazon.com</div><div class="t m0 x2d h8 y142 ff3 fs4 fc0 sc0 ls0 ws0">F<span class="_ _9"></span>ree<span class="_ _2"> </span>online<span class="_ _6"> </span>version<span class="_ _6"> </span>at<span class="_ _2"> </span><span class="ff5">http://riscv-<span class="_ _22"></span>programming.org</span></div><div class="t m0 x11e h8 y143 ff3 fs4 fc0 sc0 ls0 ws0">(Generated<span class="_ _2"> </span>on<span class="_ _2"> </span>Ma<span class="_ _1"></span>y<span class="_ _6"> </span>31,<span class="_ _2"> </span>202<span class="_ _5"></span>4)</div><div class="t m0 x9b h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">115</div><a class="l" href="https://a.co/d/gUfKWsD"><div class="d m1" style="border-style:none;position:absolute;left:358.258000px;bottom:69.067000px;width:58.171000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:271.722000px;bottom:56.835000px;width:148.940000px;height:11.125000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

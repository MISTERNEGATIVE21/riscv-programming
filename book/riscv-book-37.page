<div id="pf25" class="pf w0 h0" data-page-no="25"><div class="pc pc25 w0 h0"><img class="bi x17 y146 w2 h62" alt="" src="bg25.png"/><div class="t m0 x17 hc y719 ff7 fs8 fc0 sc0 ls0 ws0">Chapter<span class="_ _19"> </span>3</div><div class="t m0 x17 h9 y71a ff7 fs5 fc0 sc0 ls0 ws0">Assem<span class="_ _7"></span>bly<span class="_ _84"></span>,<span class="_ _f"> </span>ob<span class="_ _36"></span>ject,<span class="_ _f"> </span>and</div><div class="t m0 x17 h9 y71b ff7 fs5 fc0 sc0 ls0 ws0">executable<span class="_ _f"> </span>ﬁles</div><div class="t m0 x17 h7 y71c ff3 fs4 fc0 sc0 ls0 ws0">This<span class="_ _b"> </span>c<span class="_ _8"></span>hapter<span class="_ _b"> </span>presen<span class="_ _8"></span>ts<span class="_ _b"> </span>the<span class="_ _2"> </span>main<span class="_ _b"> </span>concepts<span class="_ _b"> </span>and<span class="_ _2"> </span>elements<span class="_ _2"> </span>of<span class="_ _b"> </span>assem<span class="_ _8"></span>bly<span class="_ _7"></span>,<span class="_ _b"> </span>ob<span class="_ _4"></span>ject,<span class="_ _b"> </span>and<span class="_ _2"> </span>exe-</div><div class="t m0 x17 h7 y71d ff3 fs4 fc0 sc0 ls0 ws0">cutable<span class="_ _2"> </span>ﬁles.</div><div class="t m0 x17 hd y71e ff7 fs3 fc0 sc0 ls0 ws0">3.1<span class="_ _32"> </span>Generating<span class="_ _31"> </span>nativ<span class="_ _8"></span>e<span class="_ _16"> </span>programs</div><div class="t m0 x17 h7 y71f ff3 fs4 fc0 sc0 ls0 ws0">In this<span class="_ _5"> </span>section,<span class="_ _5"> </span>we discuss<span class="_ _5"> </span>how a program<span class="_ _5"> </span>written<span class="_ _5"> </span>in<span class="_ _5"> </span>a<span class="_ _5"> </span>high-level language,<span class="_ _5"> </span>suc<span class="_ _1"></span>h as<span class="_ _5"> </span>C,</div><div class="t m0 x17 h7 y720 ff3 fs4 fc0 sc0 ls0 ws0">is<span class="_ _2"> </span>translated<span class="_ _2"> </span>in<span class="_ _1"></span>to<span class="_ _2"> </span>a<span class="_ _2"> </span>nativ<span class="_ _1"></span>e<span class="_ _2"> </span>program.</div><div class="t m0 x13 h7 y721 ff3 fs4 fc0 sc0 ls0 ws0">As<span class="_ _a"> </span>discussed<span class="_ _25"> </span>in<span class="_ _25"> </span>Chapter<span class="_ _a"> </span>1,<span class="_ _9"> </span><span class="ff6">a<span class="_ _16"> </span>nativ<span class="_ _8"></span>e<span class="_ _16"> </span>program<span class="_ _31"> </span>is<span class="_ _31"> </span>a<span class="_ _31"> </span>program<span class="_ _31"> </span>enco<span class="_ _4"></span>ded<span class="_ _31"> </span>us-</span></div><div class="t m0 x17 h7 y722 ff6 fs4 fc0 sc0 ls0 ws0">ing<span class="_ _b"> </span>instructions<span class="_ _2"> </span>that<span class="_ _b"> </span>can<span class="_ _b"> </span>be<span class="_ _b"> </span>directly<span class="_ _b"> </span>executed<span class="_ _b"> </span>b<span class="_ _8"></span>y<span class="_ _b"> </span>the<span class="_ _2"> </span>c<span class="_ _4"></span>omputer<span class="_ _2"> </span>hardware,</div><div class="t m0 x17 h7 y723 ff6 fs4 fc0 sc0 ls0 ws0">without<span class="_ _25"> </span>help<span class="_ _9"> </span>from<span class="_ _9"> </span>an<span class="_ _9"> </span>emulator<span class="_ _25"> </span>or<span class="_ _9"> </span>a<span class="_ _9"> </span>virtual<span class="_ _9"> </span>machine<span class="ff3">.<span class="_ _15"> </span>These<span class="_ _a"> </span>programs<span class="_ _3"> </span>are</span></div><div class="t m0 x17 h7 y724 ff3 fs4 fc0 sc0 ls0 ws0">usually<span class="_ _5"> </span>automatically<span class="_ _5"> </span>translated<span class="_ _2"> </span>from<span class="_ _5"> </span>programs<span class="_ _2"> </span>written<span class="_ _5"> </span>in<span class="_ _5"> </span>high-level<span class="_ _5"> </span>languages,<span class="_ _5"> </span>such</div><div class="t m0 x17 h7 y725 ff3 fs4 fc0 sc0 ls0 ws0">as<span class="_ _2"> </span>C,<span class="_ _2"> </span>b<span class="_ _1"></span>y<span class="_ _2"> </span>to<span class="_ _4"></span>ols<span class="_ _5"> </span>like<span class="_ _5"> </span>compilers,<span class="_ _2"> </span>assemblers,<span class="_ _5"> </span>and<span class="_ _2"> </span>linkers.</div><div class="t m0 x13 h7 y726 ff3 fs4 fc0 sc0 ls0 ws0">A<span class="_ _2"> </span>program<span class="_ _5"> </span>written<span class="_ _2"> </span>in<span class="_ _2"> </span>a<span class="_ _2"> </span>high-level<span class="_ _5"> </span>language,<span class="_ _2"> </span>such<span class="_ _5"> </span>as<span class="_ _2"> </span>C,<span class="_ _2"> </span>is<span class="_ _2"> </span>enco<span class="_ _4"></span>ded<span class="_ _5"> </span>as<span class="_ _2"> </span>a<span class="_ _2"> </span>plain<span class="_ _2"> </span>text</div><div class="t m0 x17 h7 y727 ff3 fs4 fc0 sc0 ls0 ws0">ﬁle.<span class="_ _3"> </span>High-lev<span class="_ _1"></span>el languages are<span class="_ _2f"> </span>designed to be agnostic of ISA<span class="_ _2f"> </span>and they<span class="_ _2f"> </span>are composed of</div><div class="t m0 x17 h7 y728 ff3 fs4 fc0 sc0 ls0 ws0">sev<span class="_ _1"></span>eral<span class="_ _30"> </span>abstract elemen<span class="_ _8"></span>ts, suc<span class="_ _8"></span>h<span class="_ _2f"> </span>as<span class="_ _30"> </span>v<span class="_ _8"></span>ariables, repetition, or<span class="_ _30"> </span>lo<span class="_ _4"></span>op<span class="_ _30"> </span>statements,<span class="_ _30"> </span>conditional</div><div class="t m0 x17 h7 y729 ff3 fs4 fc0 sc0 ls0 ws0">statemen<span class="_ _1"></span>ts, routines, <span class="ff8">etc.</span>.<span class="_ _3"> </span>The following code shows an example of a<span class="_ _2f"> </span>program written</div><div class="t m0 x17 h7 y72a ff3 fs4 fc0 sc0 ls0 ws0">using<span class="_ _2"> </span>the<span class="_ _2"> </span>C<span class="_ _2"> </span>language,<span class="_ _2"> </span>whic<span class="_ _1"></span>h<span class="_ _2"> </span>is<span class="_ _2"> </span>a<span class="_ _2"> </span>high-lev<span class="_ _1"></span>el<span class="_ _2"> </span>language.</div><div class="t m0 xd5 h8 y72b ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _16"> </span><span class="ff5 fs4">int<span class="_ _31"> </span>main()</span></div><div class="t m0 xd5 h8 y72c ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _16"> </span><span class="ff5 fs4">{</span></div><div class="t m0 xd5 h8 y72d ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _32"> </span><span class="ff5 fs4">int<span class="_ _9"> </span>r<span class="_ _31"> </span>=<span class="_ _31"> </span>func<span class="_ _31"> </span>(10)</span></div><div class="t m0 xd5 h8 y72e ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _32"> </span><span class="ff5 fs4">return<span class="_ _9"> </span>r+1;</span></div><div class="t m0 xd5 h8 y72f ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _16"> </span><span class="ff5 fs4">}</span></div><div class="t m0 x13 h7 y730 ff6 fs4 fc0 sc0 ls0 ws0">A<span class="_ _25"> </span>compiler<span class="_ _25"> </span>is<span class="_ _25"> </span>a<span class="_ _25"> </span>to<span class="_ _4"></span>ol<span class="_ _a"> </span>that<span class="_ _25"> </span>translates<span class="_ _25"> </span>a<span class="_ _25"> </span>program<span class="_ _9"> </span>from<span class="_ _25"> </span>one<span class="_ _25"> </span>language<span class="_ _25"> </span>to</div><div class="t m0 x17 h7 y731 ff6 fs4 fc0 sc0 ls0 ws0">another<span class="ff3">.<span class="_ _12"> </span>Usually<span class="_ _23"></span>,<span class="_ _3"> </span>programming<span class="_ _b"> </span>language<span class="_ _b"> </span>compilers<span class="_ _b"> </span>are<span class="_ _b"> </span>emplo<span class="_ _8"></span>yed<span class="_ _b"> </span>to<span class="_ _b"> </span>translate<span class="_ _b"> </span>pro-</span></div><div class="t m0 x17 h7 y732 ff3 fs4 fc0 sc0 ls0 ws0">grams<span class="_ _b"> </span>written<span class="_ _3"> </span>in<span class="_ _b"> </span>high-level<span class="_ _b"> </span>languages<span class="_ _b"> </span>into<span class="_ _b"> </span>low<span class="_ _8"></span>er-level<span class="_ _b"> </span>languages.<span class="_ _26"> </span>F<span class="_ _7"></span>or<span class="_ _b"> </span>example,<span class="_ _3"> </span>a<span class="_ _b"> </span>C</div><div class="t m0 x17 h7 y733 ff3 fs4 fc0 sc0 ls0 ws0">compiler is<span class="_ _5"> </span>emplo<span class="_ _1"></span>y<span class="_ _1"></span>ed to<span class="_ _5"> </span>translate a<span class="_ _5"> </span>program written<span class="_ _5"> </span>in C<span class="_ _5"> </span>language into assembly lan-</div><div class="t m0 x17 h7 y734 ff3 fs4 fc0 sc0 ls0 ws0">guage.<span class="_ _3"> </span>The<span class="_ _5"> </span>GNU<span class="_ _5"> </span>pro<span class="_ _4"></span>ject<span class="_ _5"> </span>C<span class="_ _5"> </span>and C++<span class="_ _5"> </span>compiler</div><div class="t m0 x11c h11 y735 ffc fs7 fc0 sc0 ls0 ws0">1</div><div class="t m0 x78 h7 y734 ff3 fs4 fc0 sc0 ls0 ws0">,<span class="_ _5"> </span>or <span class="ff5">gcc</span>,<span class="_ _2"> </span>is a<span class="_ _5"> </span>compiler<span class="_ _5"> </span>that<span class="_ _5"> </span>is capable</div><div class="t m0 x17 h7 y736 ff3 fs4 fc0 sc0 ls0 ws0">of<span class="_ _3"> </span>translating<span class="_ _3"> </span>programs<span class="_ _3"> </span>written<span class="_ _3"> </span>in<span class="_ _3"> </span>C<span class="_ _3"> </span>and<span class="_ _b"> </span>C++<span class="_ _3"> </span>languages<span class="_ _3"> </span>into<span class="_ _3"> </span>assem<span class="_ _8"></span>bly<span class="_ _3"> </span>programs,</div><div class="t m0 x17 h7 y737 ff8 fs4 fc0 sc0 ls0 ws0">i.e.<span class="ff3">,<span class="_ _5"> </span>a<span class="_ _5"> </span>program<span class="_ _5"> </span>written<span class="_ _5"> </span>in<span class="_ _5"> </span>assem<span class="_ _1"></span>bly<span class="_ _5"> </span>language.<span class="_ _3"> </span>The<span class="_ _5"> </span>following command<span class="_ _5"> </span>line<span class="_ _5"> </span>illustrates</span></div><div class="t m0 x17 h7 y738 ff3 fs4 fc0 sc0 ls0 ws0">ho<span class="_ _1"></span>w<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">riscv64-unknown-elf-gcc<span class="_ _b"> </span></span>tool,<span class="_ _2"> </span>a<span class="_ _2"> </span>GNU<span class="_ _b"> </span>pro<span class="_ _4"></span>ject<span class="_ _2"> </span>C<span class="_ _2"> </span>and<span class="_ _2"> </span>C++<span class="_ _2"> </span>compiler<span class="_ _b"> </span>that</div><div class="t m0 x17 h7 y739 ff3 fs4 fc0 sc0 ls0 ws0">pro<span class="_ _4"></span>duces<span class="_ _2"> </span>co<span class="_ _4"></span>de<span class="_ _2"> </span>for<span class="_ _2"> </span>RISC-V<span class="_ _b"> </span>based<span class="_ _2"> </span>computers,<span class="_ _b"> </span>can<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>in<span class="_ _1"></span>v<span class="_ _1"></span>ok<span class="_ _1"></span>ed<span class="_ _2"> </span>to<span class="_ _b"> </span>produce<span class="_ _b"> </span>a<span class="_ _2"> </span>R<span class="_ _7"></span>V32I<span class="_ _2"> </span>as-</div><div class="t m0 x17 h7 y73a ff3 fs4 fc0 sc0 ls0 ws0">sem<span class="_ _1"></span>bly<span class="_ _2"> </span>program<span class="_ _2"> </span>from<span class="_ _2"> </span>a<span class="_ _2"> </span>C<span class="_ _2"> </span>program.<span class="_ _a"> </span>In<span class="_ _2"> </span>this<span class="_ _2"> </span>example,<span class="_ _2"> </span>the<span class="_ _2"> </span>C<span class="_ _2"> </span>program<span class="_ _2"> </span>is<span class="_ _2"> </span>stored<span class="_ _2"> </span>on<span class="_ _2"> </span>the</div><div class="t m0 x17 h7 y73b ff5 fs4 fc0 sc0 ls0 ws0">main.c<span class="_ _2"> </span><span class="ff3">ﬁle<span class="_ _2"> </span>and<span class="_ _2"> </span>the<span class="_ _2"> </span>R<span class="_ _23"></span>V32I<span class="_ _2"> </span>assembly<span class="_ _5"> </span>program<span class="_ _2"> </span>will<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>stored<span class="_ _2"> </span>on<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">main.s<span class="_ _2"> </span></span>ﬁle.</span></div><div class="t m0 x17 h8 y73c ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _9"> </span>riscv64-unknown-elf-gcc<span class="_ _31"> </span>-mabi=ilp32<span class="_ _31"> </span>-march=rv32i<span class="_ _31"> </span>-S<span class="_ _31"> </span>main.c<span class="_ _31"> </span>-o<span class="_ _9"> </span>main.s</div><div class="t m0 x41 h1e y180 ff12 fse fc0 sc0 ls0 ws0">1</div><div class="t m0 x13 h44 y48 ff28 fsf fc0 sc0 ls0 ws0">https://gcc.gnu.org/</div><div class="t m0 x19 h7 yc ff3 fs4 fc0 sc0 ls0 ws0">24</div><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",90.709,413.56,null]'><div class="d m1" style="border-style:none;position:absolute;left:220.718000px;bottom:464.091000px;width:68.466000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pff" data-dest-detail='[15,"XYZ",136.063,771.024,null]'><div class="d m1" style="border-style:none;position:absolute;left:263.795000px;bottom:451.237000px;width:6.974000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",90.709,413.56,null]'><div class="d m1" style="border-style:none;position:absolute;left:287.450000px;bottom:451.237000px;width:80.272000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",90.709,506.875,null]'><div class="d m1" style="border-style:none;position:absolute;left:374.742000px;bottom:378.608000px;width:18.597000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf25" data-dest-detail='[37,"XYZ",151.306,80.331,null]'><div class="d m1" style="border-style:none;position:absolute;left:338.631000px;bottom:187.235000px;width:6.462000px;height:12.316000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://gcc.gnu.org/"><div class="d m1" style="border-style:none;position:absolute;left:150.310000px;bottom:67.030000px;width:86.676000px;height:11.497000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

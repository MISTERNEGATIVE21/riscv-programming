<div id="pf2e" class="pf w0 h0" data-page-no="2e"><div class="pc pc2e w0 h0"><img class="bi x15 y8aa w2 h6d" alt="" src="bg2e.png"/><div class="t m0 x15 h7 y147 ff3 fs4 fc0 sc0 ls0 ws0">3.3.<span class="_ _19"> </span>PROGRAM<span class="_ _5"> </span>SECTIONS</div><div class="t m0 xd h8 y1e ff5 fs4 fc0 sc0 ls0 ws0">10060:<span class="_ _9"> </span>00a00513<span class="_ _87"> </span>li<span class="_ _9"> </span>a0,10</div><div class="t m0 xd h8 yd4 ff5 fs4 fc0 sc0 ls0 ws0">10064:<span class="_ _9"> </span>01400593<span class="_ _87"> </span>li<span class="_ _9"> </span>a1,20</div><div class="t m0 xd h8 yd5 ff5 fs4 fc0 sc0 ls0 ws0">10068:<span class="_ _9"> </span>fedff0ef<span class="_ _87"> </span>jal<span class="_ _9"> </span>ra,10054<span class="_ _31"> </span>&lt;exit&gt;</div><div class="t m0 xd h8 yfd ff5 fs4 fc0 sc0 ls0 ws0">...</div><div class="t m0 xd h7 y8ab ff3 fs4 fc0 sc0 ls0 ws0">Ev<span class="_ _1"></span>en though<span class="_ _2f"> </span>the link<span class="_ _8"></span>er placed the<span class="_ _2f"> </span><span class="ff5">exit<span class="_ _2f"> </span></span>function ﬁrst, the<span class="_ _2f"> </span>code asso<span class="_ _4"></span>ciated with<span class="_ _30"> </span>the</div><div class="t m0 x105 h7 y8ac ff5 fs4 fc0 sc0 ls0 ws0">start<span class="_ _2"> </span><span class="ff3">lab<span class="_ _4"></span>el<span class="_ _2"> </span>will<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>executed<span class="_ _2"> </span>ﬁrst<span class="_ _b"> </span>because<span class="_ _2"> </span>the<span class="_ _b"> </span>en<span class="_ _8"></span>try<span class="_ _2"> </span>p<span class="_ _4"></span>oin<span class="_ _1"></span>t<span class="_ _2"> </span>ﬁeld<span class="_ _2"> </span>contains<span class="_ _2"> </span>the<span class="_ _2"> </span>address</span></div><div class="t m0 x15 h7 y8ad ff3 fs4 fc0 sc0 ls0 ws0">asso<span class="_ _4"></span>ciated<span class="_ _5"> </span>with<span class="_ _2"> </span>the<span class="_ _15"> </span><span class="ff5">start<span class="_ _2"> </span></span>lab<span class="_ _4"></span>el.</div><div class="t m0 xd h7 y8ae ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _2"> </span>GNU<span class="_ _2"> </span><span class="ff5">readelf<span class="_ _2"> </span></span>to<span class="_ _4"></span>ol<span class="_ _5"> </span>can<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>used<span class="_ _2"> </span>to<span class="_ _2"> </span>display<span class="_ _5"> </span>information<span class="_ _2"> </span>ab<span class="_ _4"></span>out<span class="_ _2"> </span>ELF<span class="_ _2"> </span>ﬁles.<span class="_ _3"> </span>The</div><div class="t m0 x15 h7 y8af ff3 fs4 fc0 sc0 ls0 ws0">follo<span class="_ _1"></span>wing<span class="_ _5"> </span>command<span class="_ _2"> </span>sho<span class="_ _8"></span>ws<span class="_ _2"> </span>how the<span class="_ _2"> </span><span class="ff5">riscv64-unknown-elf-readelf<span class="_ _5"> </span></span>to<span class="_ _4"></span>ol<span class="_ _5"> </span>can<span class="_ _5"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>used</div><div class="t m0 x15 h7 y8b0 ff3 fs4 fc0 sc0 ls0 ws0">to<span class="_ _25"> </span>insp<span class="_ _4"></span>ect<span class="_ _a"> </span>the<span class="_ _25"> </span>header<span class="_ _9"> </span>of<span class="_ _25"> </span>the<span class="_ _25"> </span><span class="ff5">main.x<span class="_ _25"> </span></span>executable<span class="_ _9"> </span>ﬁle.<span class="_ _2b"> </span>Notice<span class="_ _25"> </span>that<span class="_ _25"> </span>the<span class="_ _25"> </span>entry<span class="_ _a"> </span>p<span class="_ _4"></span>oin<span class="_ _1"></span>t</div><div class="t m0 x15 h7 y8b1 ff3 fs4 fc0 sc0 ls0 ws0">address<span class="_ _2"> </span>ﬁeld<span class="_ _2"> </span>w<span class="_ _1"></span>as<span class="_ _2"> </span>set<span class="_ _2"> </span>to<span class="_ _2"> </span><span class="ff5">0x10060</span>,<span class="_ _2"> </span><span class="ff8">i.e.</span>,<span class="_ _2"> </span>the<span class="_ _2"> </span>address<span class="_ _2"> </span>of<span class="_ _2"> </span>the<span class="_ _15"> </span><span class="ff5">start<span class="_ _2"> </span></span>lab<span class="_ _4"></span>el.</div><div class="t m0 x15 h8 y8b2 ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _9"> </span>riscv64-unknown-elf-readelf<span class="_ _31"> </span>-h<span class="_ _31"> </span>main.x</div><div class="t m0 x15 h8 y8b3 ff5 fs4 fc0 sc0 ls0 ws0">ELF<span class="_ _9"> </span>Header:</div><div class="t m0 x3d h8 y8b4 ff5 fs4 fc0 sc0 ls0 ws0">Magic:<span class="_ _3b"> </span>7f<span class="_ _31"> </span>45<span class="_ _9"> </span>4c<span class="_ _31"> </span>46<span class="_ _31"> </span>01<span class="_ _31"> </span>01<span class="_ _31"> </span>01<span class="_ _9"> </span>00<span class="_ _31"> </span>00<span class="_ _31"> </span>00<span class="_ _31"> </span>00<span class="_ _31"> </span>00<span class="_ _9"> </span>00<span class="_ _31"> </span>00<span class="_ _31"> </span>00<span class="_ _31"> </span>00</div><div class="t m0 x3d h8 y8b5 ff5 fs4 fc0 sc0 ls0 ws0">Class:<span class="_ _88"> </span>ELF32</div><div class="t m0 x3d h8 y8b6 ff5 fs4 fc0 sc0 ls0 ws0">Data:<span class="_ _89"> </span>2’s<span class="_ _9"> </span>complement,<span class="_ _31"> </span>little<span class="_ _31"> </span>endian</div><div class="t m0 x3d h8 y8b7 ff5 fs4 fc0 sc0 ls0 ws0">Version:<span class="_ _8a"> </span>1<span class="_ _9"> </span>(current)</div><div class="t m0 x3d h8 y8b8 ff5 fs4 fc0 sc0 ls0 ws0">OS/ABI:<span class="_ _8b"> </span>UNIX<span class="_ _9"> </span>-<span class="_ _31"> </span>System<span class="_ _31"> </span>V</div><div class="t m0 x3d h8 y8b9 ff5 fs4 fc0 sc0 ls0 ws0">ABI<span class="_ _9"> </span>Version:<span class="_ _8c"> </span>0</div><div class="t m0 x3d h8 y8ba ff5 fs4 fc0 sc0 ls0 ws0">Type:<span class="_ _89"> </span>EXEC<span class="_ _9"> </span>(Executable<span class="_ _31"> </span>file)</div><div class="t m0 x3d h8 y8bb ff5 fs4 fc0 sc0 ls0 ws0">Machine:<span class="_ _8a"> </span>RISC-V</div><div class="t m0 x3d h8 y8bc ff5 fs4 fc0 sc0 ls0 ws0">Version:<span class="_ _8a"> </span>0x1</div><div class="t m0 x3d h8 y8bd ff5 fs4 fc0 sc0 ls0 ws0">Entry<span class="_ _9"> </span>point<span class="_ _31"> </span>address:<span class="_ _7f"> </span>0x10060</div><div class="t m0 x3d h8 y8be ff5 fs4 fc0 sc0 ls0 ws0">Start<span class="_ _9"> </span>of<span class="_ _31"> </span>program<span class="_ _31"> </span>headers:<span class="_ _8d"> </span>52<span class="_ _9"> </span>(bytes<span class="_ _31"> </span>into<span class="_ _31"> </span>file)</div><div class="t m0 x3d h8 y8bf ff5 fs4 fc0 sc0 ls0 ws0">Start<span class="_ _9"> </span>of<span class="_ _31"> </span>section<span class="_ _31"> </span>headers:<span class="_ _8d"> </span>476<span class="_ _9"> </span>(bytes<span class="_ _31"> </span>into<span class="_ _31"> </span>file)</div><div class="t m0 x3d h8 y8c0 ff5 fs4 fc0 sc0 ls0 ws0">Flags:<span class="_ _88"> </span>0x0</div><div class="t m0 x3d h8 y8c1 ff5 fs4 fc0 sc0 ls0 ws0">Size<span class="_ _9"> </span>of<span class="_ _31"> </span>this<span class="_ _31"> </span>header:<span class="_ _8e"> </span>52<span class="_ _9"> </span>(bytes)</div><div class="t m0 x3d h8 y8c2 ff5 fs4 fc0 sc0 ls0 ws0">Size<span class="_ _9"> </span>of<span class="_ _31"> </span>program<span class="_ _31"> </span>headers:<span class="_ _87"> </span>32<span class="_ _9"> </span>(bytes)</div><div class="t m0 x3d h8 y8c3 ff5 fs4 fc0 sc0 ls0 ws0">Number<span class="_ _9"> </span>of<span class="_ _31"> </span>program<span class="_ _31"> </span>headers:<span class="_ _34"> </span>1</div><div class="t m0 x3d h8 y8c4 ff5 fs4 fc0 sc0 ls0 ws0">Size<span class="_ _9"> </span>of<span class="_ _31"> </span>section<span class="_ _31"> </span>headers:<span class="_ _87"> </span>40<span class="_ _9"> </span>(bytes)</div><div class="t m0 x3d h8 y8c5 ff5 fs4 fc0 sc0 ls0 ws0">Number<span class="_ _9"> </span>of<span class="_ _31"> </span>section<span class="_ _31"> </span>headers:<span class="_ _34"> </span>6</div><div class="t m0 x3d h8 y8c6 ff5 fs4 fc0 sc0 ls0 ws0">Section<span class="_ _9"> </span>header<span class="_ _31"> </span>string<span class="_ _31"> </span>table<span class="_ _31"> </span>index:<span class="_ _31"> </span>5</div><div class="t m0 x15 hd y8c7 ff7 fs3 fc0 sc0 ls0 ws0">3.3<span class="_ _32"> </span>Program<span class="_ _31"> </span>sections</div><div class="t m0 x15 h7 y8c8 ff3 fs4 fc0 sc0 ls0 ws0">Executable and<span class="_ _5"> </span>ob<span class="_ _4"></span>ject<span class="_ _5"> </span>ﬁles, and<span class="_ _5"> </span>assembly programs are<span class="_ _5"> </span>usually organized<span class="_ _5"> </span>in<span class="_ _5"> </span>sections.</div><div class="t m0 x15 h7 y8c9 ff3 fs4 fc0 sc0 ls0 ws0">A<span class="_ _25"> </span>section<span class="_ _25"> </span>may<span class="_ _a"> </span>contain<span class="_ _a"> </span>data<span class="_ _9"> </span>or<span class="_ _25"> </span>instructions,<span class="_ _9"> </span>and<span class="_ _9"> </span>the<span class="_ _25"> </span>conten<span class="_ _8"></span>ts<span class="_ _25"> </span>of<span class="_ _25"> </span>each<span class="_ _25"> </span>section<span class="_ _25"> </span>are</div><div class="t m0 x15 h7 y8ca ff3 fs4 fc0 sc0 ls0 ws0">mapp<span class="_ _4"></span>ed<span class="_ _2"> </span>to<span class="_ _b"> </span>a<span class="_ _b"> </span>set<span class="_ _b"> </span>of<span class="_ _b"> </span>consecutive<span class="_ _b"> </span>main<span class="_ _2"> </span>memory<span class="_ _b"> </span>addresses.<span class="_ _12"> </span>The<span class="_ _b"> </span>follo<span class="_ _8"></span>wing<span class="_ _b"> </span>sections<span class="_ _b"> </span>are</div><div class="t m0 x15 h7 y8cb ff3 fs4 fc0 sc0 ls0 ws0">often<span class="_ _2"> </span>presen<span class="_ _1"></span>t<span class="_ _2"> </span>on<span class="_ _2"> </span>executable<span class="_ _2"> </span>ﬁles<span class="_ _2"> </span>generated<span class="_ _2"> </span>for<span class="_ _2"> </span>Lin<span class="_ _1"></span>ux-based<span class="_ _2"> </span>systems:</div><div class="t m0 xd h7 y8cc ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff5">.text<span class="ff3">:<span class="_ _3"> </span>a<span class="_ _2"> </span>section<span class="_ _2"> </span>dedicated<span class="_ _2"> </span>to<span class="_ _2"> </span>store<span class="_ _2"> </span>the<span class="_ _2"> </span>program<span class="_ _2"> </span>instructions;</span></span></div><div class="t m0 xd h7 y8cd ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff5">.data<span class="ff3">:<span class="_ _3"> </span>a<span class="_ _2f"> </span>section dedicated<span class="_ _2f"> </span>to store<span class="_ _2f"> </span>initialized<span class="_ _2f"> </span>global v<span class="_ _7"></span>ariables, <span class="ff8">i.e.</span>, the v<span class="_ _7"></span>ariables</span></span></div><div class="t m0 x1a h7 y8ce ff3 fs4 fc0 sc0 ls0 ws0">that<span class="_ _2"> </span>need<span class="_ _2"> </span>their<span class="_ _2"> </span>v<span class="_ _8"></span>alue<span class="_ _2"> </span>to<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>initialized<span class="_ _2"> </span>b<span class="_ _4"></span>efore<span class="_ _5"> </span>the<span class="_ _2"> </span>program<span class="_ _2"> </span>starts<span class="_ _2"> </span>executing;</div><div class="t m0 xd h7 y8cf ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff5">.bss<span class="ff3">:<span class="_ _3"> </span>a<span class="_ _2"> </span>section<span class="_ _2"> </span>dedicated<span class="_ _2"> </span>to<span class="_ _2"> </span>store<span class="_ _2"> </span>uninitialized<span class="_ _2"> </span>global<span class="_ _2"> </span>v<span class="_ _8"></span>ariables;</span></span></div><div class="t m0 xd h7 y8d0 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _9"> </span><span class="ff5">.rodata<span class="ff3">:<span class="_ _16"> </span>a<span class="_ _3"> </span>section<span class="_ _3"> </span>dedicated<span class="_ _b"> </span>to<span class="_ _3"> </span>store<span class="_ _b"> </span>constants,<span class="_ _3"> </span><span class="ff8">i.e.</span>,<span class="_ _3"> </span>v<span class="_ _7"></span>alues<span class="_ _3"> </span>that<span class="_ _b"> </span>are<span class="_ _3"> </span>read<span class="_ _3"> </span>b<span class="_ _8"></span>y</span></span></div><div class="t m0 x1a h7 y8d1 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _2"> </span>program<span class="_ _2"> </span>but<span class="_ _2"> </span>not<span class="_ _2"> </span>mo<span class="_ _4"></span>diﬁed<span class="_ _5"> </span>during<span class="_ _2"> </span>execution.</div><div class="t m0 xd h7 y66b ff3 fs4 fc0 sc0 ls0 ws0">When<span class="_ _3"> </span>linking<span class="_ _a"> </span>multiple<span class="_ _3"> </span>ob<span class="_ _4"></span>ject<span class="_ _a"> </span>ﬁles,<span class="_ _25"> </span>the<span class="_ _a"> </span>link<span class="_ _1"></span>er<span class="_ _3"> </span>groups<span class="_ _a"> </span>information<span class="_ _a"> </span>from<span class="_ _a"> </span>sections</div><div class="t m0 x15 h7 y66c ff3 fs4 fc0 sc0 ls0 ws0">with<span class="_ _5"> </span>the<span class="_ _5"> </span>same<span class="_ _2"> </span>name<span class="_ _5"> </span>and<span class="_ _2"> </span>places<span class="_ _5"> </span>them<span class="_ _5"> </span>together<span class="_ _2"> </span>in<span class="_ _1"></span>to<span class="_ _5"> </span>a<span class="_ _2"> </span>single<span class="_ _5"> </span>section<span class="_ _5"> </span>on<span class="_ _2"> </span>the<span class="_ _5"> </span>executable</div><div class="t m0 x15 h7 y66d ff3 fs4 fc0 sc0 ls0 ws0">ﬁle.<span class="_ _3"> </span>F<span class="_ _7"></span>or<span class="_ _2f"> </span>example,<span class="_ _2f"> </span>when<span class="_ _2f"> </span>linking<span class="_ _30"> </span>multiple<span class="_ _2f"> </span>ob<span class="_ _4"></span>ject<span class="_ _2f"> </span>ﬁles, the<span class="_ _30"> </span>conten<span class="_ _8"></span>ts of<span class="_ _30"> </span>the <span class="ff5">.text<span class="_ _30"> </span></span>sections</div><div class="t m0 x15 h7 y66e ff3 fs4 fc0 sc0 ls0 ws0">from<span class="_ _b"> </span>all<span class="_ _b"> </span>ob<span class="_ _4"></span>ject<span class="_ _b"> </span>ﬁles<span class="_ _2"> </span>are<span class="_ _b"> </span>group<span class="_ _4"></span>ed<span class="_ _b"> </span>together<span class="_ _b"> </span>and<span class="_ _2"> </span>placed<span class="_ _b"> </span>sequentially<span class="_ _2"> </span>on<span class="_ _b"> </span>the<span class="_ _b"> </span>executable</div><div class="t m0 x15 h7 yfc ff3 fs4 fc0 sc0 ls0 ws0">ﬁle<span class="_ _b"> </span>on<span class="_ _b"> </span>a<span class="_ _3"> </span>single<span class="_ _b"> </span>section<span class="_ _b"> </span>that<span class="_ _3"> </span>is<span class="_ _b"> </span>also<span class="_ _b"> </span>called<span class="_ _b"> </span><span class="ff5">.text</span>.<span class="_ _26"> </span>Figure<span class="_ _b"> </span>3.2<span class="_ _b"> </span>shows<span class="_ _b"> </span>the<span class="_ _b"> </span>lay<span class="_ _8"></span>out<span class="_ _b"> </span>of<span class="_ _3"> </span>an</div><div class="t m0 x15 h7 yd2 ff3 fs4 fc0 sc0 ls0 ws0">R<span class="_ _23"></span>V32I<span class="_ _2"> </span>executable<span class="_ _5"> </span>ﬁle<span class="_ _2"> </span>that<span class="_ _5"> </span>was generated<span class="_ _2"> </span>b<span class="_ _1"></span>y<span class="_ _5"> </span>the<span class="_ _2"> </span><span class="ff5">riscv64-unknown-elf-ld<span class="_ _5"> </span></span>to<span class="_ _4"></span>ol,<span class="_ _5"> </span>and</div><div class="t m0 x15 h7 yd3 ff3 fs4 fc0 sc0 ls0 ws0">is<span class="_ _2f"> </span>enco<span class="_ _4"></span>ded<span class="_ _30"> </span>using the<span class="_ _30"> </span>Executable and<span class="_ _2f"> </span>Linking<span class="_ _2f"> </span>F<span class="_ _7"></span>ormat.<span class="_ _3"> </span>This<span class="_ _2f"> </span>ﬁle<span class="_ _2f"> </span>con<span class="_ _8"></span>tains three<span class="_ _2f"> </span>sections:</div><div class="t m0 x15 h7 y48 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _b"> </span><span class="ff5">.data</span>,<span class="_ _2"> </span>the<span class="_ _b"> </span><span class="ff5">.rodata</span>,<span class="_ _b"> </span>and<span class="_ _b"> </span>the<span class="_ _2"> </span><span class="ff5">.text<span class="_ _b"> </span></span>sections.<span class="_ _31"> </span>The<span class="_ _b"> </span>con<span class="_ _8"></span>tents<span class="_ _2"> </span>of<span class="_ _b"> </span>section<span class="_ _b"> </span><span class="ff5">.text<span class="_ _2"> </span></span>are</div><div class="t m0 x1f h7 yc ff5 fs4 fc0 sc0 ls0 ws0">http://riscv-<span class="_ _4"></span>programming.org<span class="_ _2"> </span><span class="ff3">(V<span class="_ _7"></span>ersion:<span class="_ _a"> </span>Marc<span class="_ _8"></span>h<span class="_ _2"> </span>29,<span class="_ _2"> </span>2021)<span class="_ _4e"> </span>33</span></div><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",90.709,465.032,null]'><div class="d m1" style="border-style:none;position:absolute;left:230.354000px;bottom:289.797000px;width:62.526000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf2f" data-dest-detail='[47,"XYZ",136.063,777.001,null]'><div class="d m1" style="border-style:none;position:absolute;left:341.345000px;bottom:103.798000px;width:14.723000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:141.766000px;bottom:36.395000px;width:148.940000px;height:13.948000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>

<div id="pf6d" class="pf w0 h0" data-page-no="6d"><div class="pc pc6d w0 h0"><img class="bi x18 y21d w2 h29" alt="" src="bg6d.png"/><div class="t m0 x18 h7 y15a ff3 fs4 fc0 sc0 ls0 ws0">8.6.<span class="_ _22"> </span>GLOBAL<span class="_ _2"> </span>VS<span class="_ _2"> </span>LOCAL<span class="_ _2"> </span>V<span class="_ _2c"></span>ARIABLES</div><div class="t m0 x18 hd y38 ff6 fs3 fc0 sc0 ls0 ws0">8.6<span class="_ _36"> </span>Global<span class="_ _e"> </span>vs<span class="_ _e"> </span>lo<span class="_ _4"></span>cal<span class="_ _e"> </span>v<span class="_ _7"></span>ariables</div><div class="t m0 x18 h7 y9b5 ff3 fs4 fc0 sc0 ls0 ws0">In<span class="_ _a"> </span>high-lev<span class="_ _1"></span>el<span class="_ _d"> </span>languages,<span class="_ _3"> </span>such<span class="_ _d"> </span>as<span class="_ _a"> </span>“C”,<span class="_ _a"> </span>global<span class="_ _d"> </span>v<span class="_ _8"></span>ariables<span class="_ _a"> </span>are<span class="_ _a"> </span>v<span class="_ _8"></span>ariables<span class="_ _a"> </span>declared<span class="_ _a"> </span>outside</div><div class="t m0 x18 h7 y9b6 ff3 fs4 fc0 sc0 ls0 ws0">routines,<span class="_ _2"> </span>and<span class="_ _2"> </span>they<span class="_ _2"> </span>can<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>accessed<span class="_ _2"> </span>on<span class="_ _2"> </span>any<span class="_ _5"> </span>routine<span class="_ _2"> </span>in<span class="_ _2"> </span>the<span class="_ _2"> </span>program.</div><div class="t m0 xd h7 y9b7 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _3"> </span>following<span class="_ _a"> </span>co<span class="_ _4"></span>de<span class="_ _3"> </span>shows<span class="_ _a"> </span>an<span class="_ _3"> </span>example<span class="_ _c"> </span>of<span class="_ _3"> </span>a<span class="_ _3"> </span>“C”<span class="_ _3"> </span>program<span class="_ _3"> </span>with<span class="_ _c"> </span>a<span class="_ _3"> </span>global<span class="_ _3"> </span>v<span class="_ _8"></span>ariable</div><div class="t m0 x18 h7 y9b8 ff3 fs4 fc0 sc0 ls0 ws0">named<span class="_ _2"> </span><span class="ff5">x</span>.<span class="_ _3"> </span>Notice<span class="_ _2"> </span>that<span class="_ _2"> </span>the<span class="_ _2"> </span>global<span class="_ _2"> </span>v<span class="_ _8"></span>ariable<span class="_ _2"> </span>may<span class="_ _2"> </span>be<span class="_ _2"> </span>accessed<span class="_ _2"> </span>from<span class="_ _2"> </span>within<span class="_ _2"> </span>any<span class="_ _2"> </span>routine.</div><div class="t m0 x112 h8 y1240 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _1f"> </span><span class="ff5 fs4">int<span class="_ _e"> </span>x;</span></div><div class="t m0 x112 h38 y1241 ff24 fs12 fc0 sc0 ls0 ws0">2</div><div class="t m0 x112 h8 y1242 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _1f"> </span><span class="ff5 fs4">int<span class="_ _e"> </span>main()</span></div><div class="t m0 x112 h8 y1243 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _1f"> </span><span class="ff5 fs4">{</span></div><div class="t m0 x112 h8 y1244 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _7e"> </span><span class="ff5 fs4">return<span class="_ _e"> </span>x+1;</span></div><div class="t m0 x112 h8 y1245 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _1f"> </span><span class="ff5 fs4">}</span></div><div class="t m0 xd h7 y1246 ff7 fs4 fc0 sc0 ls0 ws0">Global v<span class="_ _7"></span>ariables<span class="_ _2"> </span>are allo<span class="_ _4"></span>cated on the static data<span class="_ _2"> </span>space by the assem<span class="_ _8"></span>bler</div><div class="t m0 x18 h7 y1247 ff7 fs4 fc0 sc0 ls0 ws0">and are usually declared on assem<span class="_ _8"></span>bly programs with the help of directiv<span class="_ _8"></span>es<span class="ff3">.</span></div><div class="t m0 x18 h7 y1248 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _2"> </span>follo<span class="_ _1"></span>wing<span class="_ _2"> </span>co<span class="_ _4"></span>de<span class="_ _5"> </span>shows<span class="_ _5"> </span>the<span class="_ _2"> </span>assembly<span class="_ _5"> </span>co<span class="_ _4"></span>de<span class="_ _5"> </span>for<span class="_ _2"> </span>the<span class="_ _2"> </span>previous<span class="_ _2"> </span>“C”<span class="_ _2"> </span>program.</div><div class="t m0 x112 h8 y1249 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _1f"> </span><span class="ff5 fs4">.data</span></div><div class="t m0 x112 h8 y124a ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _1f"> </span><span class="ff5 fs4">x:</span></div><div class="t m0 x112 h8 y124b ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _7e"> </span><span class="ff5 fs4">.skip<span class="_ _e"> </span>4</span></div><div class="t m0 x112 h38 y124c ff24 fs12 fc0 sc0 ls0 ws0">4</div><div class="t m0 x112 h8 y124d ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _1f"> </span><span class="ff5 fs4">.text</span></div><div class="t m0 x112 h8 y124e ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _1f"> </span><span class="ff5 fs4">main:</span></div><div class="t m0 x112 h8 y124f ff24 fs12 fc0 sc0 ls0 ws0">7<span class="_ _7e"> </span><span class="ff5 fs4">la<span class="_ _3f"> </span>a0,<span class="_ _e"> </span>x<span class="_ _5a"> </span>#<span class="_ _11"> </span>Loads<span class="_ _e"> </span>the<span class="_ _11"> </span>address<span class="_ _e"> </span>of<span class="_ _e"> </span>variable<span class="_ _e"> </span>x</span></div><div class="t m0 x112 h8 y1250 ff24 fs12 fc0 sc0 ls0 ws0">8<span class="_ _7e"> </span><span class="ff5 fs4">lw<span class="_ _3f"> </span>a0,<span class="_ _e"> </span>0(a0)<span class="_ _85"> </span>#<span class="_ _e"> </span>Loads<span class="_ _11"> </span>the<span class="_ _e"> </span>value<span class="_ _e"> </span>o<span class="_ _e"> </span>x</span></div><div class="t m0 x112 h8 y1251 ff24 fs12 fc0 sc0 ls0 ws0">9<span class="_ _7e"> </span><span class="ff5 fs4">addi<span class="_ _e"> </span>a0,<span class="_ _11"> </span>a0,<span class="_ _e"> </span>1<span class="_ _85"> </span>#<span class="_ _e"> </span>Increments<span class="_ _e"> </span>the<span class="_ _e"> </span>value</span></div><div class="t m0 x11e h8 y1252 ff24 fs12 fc0 sc0 ls0 ws0">10<span class="_ _84"> </span><span class="ff5 fs4">ret<span class="_ _93"> </span>#<span class="_ _11"> </span>Return</span></div><div class="t m0 xd h7 y1253 ff3 fs4 fc0 sc0 ls0 ws0">In<span class="_ _2"> </span>the<span class="_ _d"> </span>previous<span class="_ _d"> </span>co<span class="_ _4"></span>de,<span class="_ _2"> </span>the<span class="_ _d"> </span><span class="ff5">.data<span class="_ _d"> </span></span>directive<span class="_ _2"> </span>(line<span class="_ _d"> </span>1)<span class="_ _2"> </span>informs<span class="_ _d"> </span>the<span class="_ _d"> </span>assembler<span class="_ _2"> </span>that<span class="_ _d"> </span>the</div><div class="t m0 x18 h7 y1254 ff3 fs4 fc0 sc0 ls0 ws0">follo<span class="_ _1"></span>wing<span class="_ _2"> </span>conten<span class="_ _8"></span>ts<span class="_ _d"> </span>must<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>placed<span class="_ _d"> </span>into<span class="_ _2"> </span>the<span class="_ _2"> </span>static<span class="_ _d"> </span>data<span class="_ _d"> </span>space.<span class="_ _11"> </span>The<span class="_ _d"> </span><span class="ff5">x<span class="_ _2"> </span></span>lab<span class="_ _4"></span>el<span class="_ _d"> </span>marks<span class="_ _2"> </span>the</div><div class="t m0 x18 h7 y1255 ff3 fs4 fc0 sc0 ls0 ws0">address<span class="_ _2"> </span>of<span class="_ _d"> </span>v<span class="_ _8"></span>ariable<span class="_ _d"> </span><span class="ff5">x</span>.<span class="_ _11"> </span>The<span class="_ _2"> </span><span class="ff5">.skip<span class="_ _e"> </span>4<span class="_ _d"> </span></span>directiv<span class="_ _1"></span>e<span class="_ _2"> </span>(line<span class="_ _d"> </span>3)<span class="_ _d"> </span>instructs<span class="_ _2"> </span>the<span class="_ _d"> </span>assembler<span class="_ _2"> </span>to<span class="_ _2"> </span>skip</div><div class="t m0 x18 h7 y1256 ff3 fs4 fc0 sc0 ls0 ws0">four bytes, which is<span class="_ _5"> </span>used<span class="_ _5"> </span>to allo<span class="_ _4"></span>cate space<span class="_ _5"> </span>for<span class="_ _5"> </span>v<span class="_ _8"></span>ariable<span class="_ _5"> </span><span class="ff5">x</span>.<span class="_ _3"> </span>The<span class="_ _5"> </span><span class="ff5">.text<span class="_ _5"> </span></span>directive (line 5)</div><div class="t m0 x18 h7 y1257 ff3 fs4 fc0 sc0 ls0 ws0">informs<span class="_ _2"> </span>the<span class="_ _d"> </span>assembler<span class="_ _2"> </span>that<span class="_ _d"> </span>the<span class="_ _d"> </span>following<span class="_ _2"> </span>conten<span class="_ _8"></span>ts<span class="_ _d"> </span>m<span class="_ _1"></span>ust<span class="_ _2"> </span>now<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _2"> </span>placed<span class="_ _d"> </span>into<span class="_ _2"> </span>the<span class="_ _d"> </span>co<span class="_ _4"></span>de</div><div class="t m0 x18 h7 y1258 ff3 fs4 fc0 sc0 ls0 ws0">space.<span class="_ _3"> </span>The<span class="_ _2"> </span>remainder<span class="_ _2"> </span>of<span class="_ _2"> </span>the<span class="_ _2"> </span>co<span class="_ _4"></span>de<span class="_ _2"> </span>(lines<span class="_ _2"> </span>6-10)<span class="_ _2"> </span>implements<span class="_ _5"> </span>the<span class="_ _2"> </span>main<span class="_ _2"> </span>routine.</div><div class="t m0 xd h7 y1259 ff3 fs4 fc0 sc0 ls0 ws0">In high-lev<span class="_ _8"></span>el languages, suc<span class="_ _8"></span>h as in<span class="_ _12"> </span>“C”, lo<span class="_ _4"></span>cal<span class="_ _12"> </span>v<span class="_ _8"></span>ariables are v<span class="_ _7"></span>ariables declared inside</div><div class="t m0 x18 h7 y125a ff3 fs4 fc0 sc0 ls0 ws0">routines,<span class="_ _2"> </span>and<span class="_ _2"> </span>can<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>used<span class="_ _2"> </span>only<span class="_ _2"> </span>inside<span class="_ _2"> </span>the<span class="_ _2"> </span>routine<span class="_ _2"> </span>that<span class="_ _2"> </span>declared<span class="_ _2"> </span>it.</div><div class="t m0 xd h7 y125b ff3 fs4 fc0 sc0 ls0 ws0">Ideally<span class="_ _7"></span>,<span class="_ _d"> </span>lo<span class="_ _4"></span>cal<span class="_ _d"> </span>v<span class="_ _8"></span>ariables<span class="_ _a"> </span>should<span class="_ _d"> </span>b<span class="_ _4"></span>e<span class="_ _d"> </span>allo<span class="_ _4"></span>cated<span class="_ _d"> </span>on<span class="_ _d"> </span>registers.<span class="_ _1b"> </span>The<span class="_ _d"> </span>follo<span class="_ _1"></span>wing<span class="_ _d"> </span>co<span class="_ _4"></span>de<span class="_ _d"> </span>con-</div><div class="t m0 x18 h7 y125c ff3 fs4 fc0 sc0 ls0 ws0">tains<span class="_ _2"> </span>a<span class="_ _2"> </span>lo<span class="_ _4"></span>cal<span class="_ _5"> </span>v<span class="_ _8"></span>ariable<span class="_ _2"> </span>called<span class="_ _2"> </span><span class="ff5">tmp<span class="_ _2"> </span></span>that<span class="_ _2"> </span>can<span class="_ _2"> </span>b<span class="_ _4"></span>e<span class="_ _5"> </span>allo<span class="_ _4"></span>cated<span class="_ _2"> </span>on<span class="_ _2"> </span>a<span class="_ _2"> </span>register.</div><div class="t m0 x112 h8 y125d ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _1f"> </span><span class="ff5 fs4">void<span class="_ _e"> </span>exchange(int*<span class="_ _11"> </span>a,<span class="_ _e"> </span>int*<span class="_ _e"> </span>b)</span></div><div class="t m0 x112 h8 y125e ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _1f"> </span><span class="ff5 fs4">{</span></div><div class="t m0 x112 h8 y125f ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _7e"> </span><span class="ff5 fs4">int<span class="_ _e"> </span>tmp<span class="_ _11"> </span>=<span class="_ _e"> </span>*b;</span></div><div class="t m0 x112 h8 y1260 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _7e"> </span><span class="ff5 fs4">*b<span class="_ _e"> </span>=<span class="_ _11"> </span>*a</span></div><div class="t m0 x112 h8 y1261 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _7e"> </span><span class="ff5 fs4">*a<span class="_ _e"> </span>=<span class="_ _11"> </span>tmp;</span></div><div class="t m0 x112 h8 y1262 ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _1f"> </span><span class="ff5 fs4">}</span></div><div class="t m0 xd h7 y1263 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _a"> </span>following<span class="_ _a"> </span>co<span class="_ _4"></span>de<span class="_ _d"> </span>shows<span class="_ _a"> </span>the<span class="_ _a"> </span>assembly<span class="_ _a"> </span>co<span class="_ _4"></span>de<span class="_ _a"> </span>for<span class="_ _a"> </span>the<span class="_ _3"> </span>previous<span class="_ _a"> </span>“C”<span class="_ _a"> </span>co<span class="_ _4"></span>de.<span class="_ _2d"> </span>Notice</div><div class="t m0 x18 h7 y1264 ff3 fs4 fc0 sc0 ls0 ws0">that<span class="_ _2"> </span>the<span class="_ _2"> </span>lo<span class="_ _4"></span>cal<span class="_ _5"> </span>v<span class="_ _8"></span>ariable<span class="_ _2"> </span><span class="ff5">tmp<span class="_ _2"> </span></span>was<span class="_ _5"> </span>allo<span class="_ _4"></span>cated<span class="_ _5"> </span>on<span class="_ _2"> </span>register<span class="_ _2"> </span>a2.</div><div class="t m0 x112 h8 y1265 ff24 fs12 fc0 sc0 ls0 ws0">1<span class="_ _1f"> </span><span class="ff5 fs4">exchange:</span></div><div class="t m0 x112 h8 y1266 ff24 fs12 fc0 sc0 ls0 ws0">2<span class="_ _36"> </span><span class="ff5 fs4">lw<span class="_ _11"> </span>a2,<span class="_ _e"> </span>(a1)<span class="_ _3f"> </span>#<span class="_ _e"> </span>tmp<span class="_ _e"> </span>=<span class="_ _11"> </span>*b</span></div><div class="t m0 x112 h8 y1267 ff24 fs12 fc0 sc0 ls0 ws0">3<span class="_ _36"> </span><span class="ff5 fs4">lw<span class="_ _11"> </span>a3,<span class="_ _e"> </span>(a0)<span class="_ _3f"> </span>#<span class="_ _e"> </span>a3<span class="_ _e"> </span>=<span class="_ _11"> </span>*a</span></div><div class="t m0 x112 h8 y1268 ff24 fs12 fc0 sc0 ls0 ws0">4<span class="_ _36"> </span><span class="ff5 fs4">sw<span class="_ _11"> </span>a3,<span class="_ _e"> </span>(a1)<span class="_ _3f"> </span>#<span class="_ _e"> </span>*b<span class="_ _e"> </span>=<span class="_ _11"> </span>a3</span></div><div class="t m0 x112 h8 y1269 ff24 fs12 fc0 sc0 ls0 ws0">5<span class="_ _36"> </span><span class="ff5 fs4">sw<span class="_ _11"> </span>a2,<span class="_ _e"> </span>(a0)<span class="_ _3f"> </span>#<span class="_ _e"> </span>*a<span class="_ _e"> </span>=<span class="_ _11"> </span>tmp</span></div><div class="t m0 x112 h8 ycda ff24 fs12 fc0 sc0 ls0 ws0">6<span class="_ _36"> </span><span class="ff5 fs4">ret</span></div><div class="t m0 x32 h7 yc ff5 fs4 fc0 sc0 ls0 ws0">http://riscv-<span class="_ _4"></span>programming.org<span class="_ _2"> </span><span class="ff3">(V<span class="_ _7"></span>ersion:<span class="_ _3"> </span>August<span class="_ _2"> </span>26,<span class="_ _d"> </span>2021)<span class="_ _6f"> </span>95</span></div><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:139.954000px;bottom:36.395000px;width:148.940000px;height:13.948000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
